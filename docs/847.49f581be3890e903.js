"use strict";(self.webpackChunkToolsManagerClientApp=self.webpackChunkToolsManagerClientApp||[]).push([[847],{7323:(f,g,r)=>{r.d(g,{G:()=>t});class t{static#t=this.addUserApi="Users/addUser";static#e=this.branchesApi="Branches";static#n=this.customersApi="Customers";static#a=this.equipmentApi="Equipment";static#r=this.equipmentParametersApi="Equipment/parameters";static#o=this.measurementUnitsApi="MeasurementUnits";static#i=this.userApi="Users";static#s=this.userEmployeeApi="Users/employee";static#m=this.userEmployeesApi="Users/employees";static#c=this.userRolesApi="UserRole";static#p=this.workItemActivityLogApi="WorkItem/workItemActivityLog";static#l=this.workItemApi="WorkItem";static#d=this.workOrderApi="WorkOrder";static#_=this.workOrderTypesApi=`${this.workOrderApi}/workOrderTypes`;static#u=this.toolsApi="Tools";static#g=this.toolParametersApi="Tools/parameters";static#h=this.toolOutputsApi="ToolOutputs";static#f=this.workStateApi="WorkState"}},6858:(f,g,r)=>{r.d(g,{O:()=>h});var t=r(529),o=r(2340),l=r(1571);class h{constructor(i){this.httpClient=i,this.api_url=o.N.apiUrl}get(i){return this.httpClient.get(this.api_url+i)}post(i,c){return new t.WM({"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET,HEAD,OPTIONS,POST,PUT","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept, Authorization"}),this.httpClient.post(this.api_url+i,c)}put(i,c){return this.httpClient.put(this.api_url+i,c)}postFormData(i,c){const p=new t.WM({"Content-Type":"multipart/form-data"});return this.httpClient.post(this.api_url+i,c,{headers:p})}static#t=this.\u0275fac=function(c){return new(c||h)(l.LFG(t.eN))};static#e=this.\u0275prov=l.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}},4028:(f,g,r)=>{r.d(g,{d:()=>C});var t=r(1571),o=r(2687),l=r(6895),h=r(2216),a=r(433),i=r(7323),c=r(6858),p=r(1875),d=r(7281);function n(_,s){if(1&_){const e=t.EpF();t.TgZ(0,"div",14)(1,"app-dropdown",15),t.NdJ("onSelectOptionEvent",function(u){t.CHM(e);const b=t.oxw();return t.KtG(b.onSelectOption(u))}),t.ALo(2,"toDropdownItem"),t.qZA()()}if(2&_){const e=t.oxw();t.xp6(1),t.Q6J("options",t.xi3(2,2,e.measurementUnits,"measurementUnits"))("label","Unidad de medida")}}class P{constructor(s,e){this.fb=s,this.httpService=e,this.faCheck=o.LEp,this.faX=o.EOp,this.cancelEvent=new t.vpe,this.addNewParameterEvent=new t.vpe}ngOnInit(){this.getMeasurementUnits(),this.initForm()}initForm(){this.addParameterForm=this.fb.group({parameterName:[null,a.kI.required],measurementUnitId:[null,a.kI.required],measurementUnitSymbol:[null],parameterValue:[null,a.kI.required]})}getMeasurementUnits(){this.httpService.get(i.G.measurementUnitsApi).subscribe(s=>this.measurementUnits=s)}onSelectOption(s){const e=this.measurementUnits.find(m=>m.measurementUnitId==s.id);this.addParameterForm.patchValue({measurementUnitId:e.measurementUnitId,measurementUnitSymbol:e.symbol})}addNewParameter(){!this.addParameterForm.valid||this.addNewParameterEvent.emit({name:this.addParameterForm.controls.parameterName.value,measurementUnitId:this.addParameterForm.controls.measurementUnitId.value,measurementUnitSymbol:this.addParameterForm.controls.measurementUnitSymbol.value,parameterValue:this.addParameterForm.controls.parameterValue.value})}static#t=this.\u0275fac=function(e){return new(e||P)(t.Y36(a.qu),t.Y36(c.O))};static#e=this.\u0275cmp=t.Xpm({type:P,selectors:[["app-add-new-parameter"]],outputs:{cancelEvent:"cancelEvent",addNewParameterEvent:"addNewParameterEvent"},decls:18,vars:5,consts:[[3,"formGroup"],[1,"row"],[1,"text-center"],[1,"col-lg-3","col-md-5"],["for","parameterName",1,"form-label"],["type","text","id","parameterName","formControlName","parameterName",1,"form-control"],["class","col-md-3",4,"ngIf"],[1,"col-lg-3","col-md-2"],["for","parameterValue",1,"form-label"],["type","text","id","parameterValue","formControlName","parameterValue",1,"form-control"],[1,"col-lg-3","col-md-2","action-buttons"],["type","button",1,"btn","btn-outline-success","me-2",3,"disabled","click"],[3,"icon"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"col-md-3"],[3,"options","label","onSelectOptionEvent"]],template:function(e,m){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"h2",2),t._uU(3,"Nuevo par\xe1metero"),t.qZA(),t.TgZ(4,"div",3)(5,"label",4),t._uU(6,"Nombre del par\xe1metro"),t.qZA(),t._UZ(7,"input",5),t.qZA(),t.YNc(8,n,3,5,"div",6),t.TgZ(9,"div",7)(10,"label",8),t._uU(11,"Valor/Descripci\xf3n"),t.qZA(),t._UZ(12,"input",9),t.qZA(),t.TgZ(13,"div",10)(14,"button",11),t.NdJ("click",function(){return m.addNewParameter()}),t._UZ(15,"fa-icon",12),t.qZA(),t.TgZ(16,"button",13),t.NdJ("click",function(){return m.cancelEvent.emit()}),t._UZ(17,"fa-icon",12),t.qZA()()()()),2&e&&(t.Q6J("formGroup",m.addParameterForm),t.xp6(8),t.Q6J("ngIf",m.measurementUnits),t.xp6(6),t.Q6J("disabled",!m.addParameterForm.valid),t.xp6(1),t.Q6J("icon",m.faCheck),t.xp6(2),t.Q6J("icon",m.faX))},dependencies:[l.O5,h.BN,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,p.J,d.s],styles:[".action-buttons[_ngcontent-%COMP%]{padding-top:2rem}"]})}function A(_,s){if(1&_){const e=t.EpF();t.TgZ(0,"form",1)(1,"div",2)(2,"h2",3),t._uU(3,"Configurar par\xe1metero"),t.qZA(),t.TgZ(4,"div",4)(5,"label",5),t._uU(6,"Nombre del par\xe1metro"),t.qZA(),t._UZ(7,"input",6),t.qZA(),t.TgZ(8,"div",7)(9,"label",5),t._uU(10,"Unidad de medida"),t.qZA(),t._UZ(11,"input",6),t.qZA(),t.TgZ(12,"div",8)(13,"label",9),t._uU(14,"Valor/Descripci\xf3n"),t.qZA(),t._UZ(15,"input",10),t.qZA(),t.TgZ(16,"div",11)(17,"button",12),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.setParameterValue())}),t._UZ(18,"fa-icon",13),t.qZA(),t.TgZ(19,"button",14),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.cancelEvent.emit())}),t._UZ(20,"fa-icon",13),t.qZA()()()()}if(2&_){const e=t.oxw();t.Q6J("formGroup",e.setParameterForm),t.xp6(7),t.Q6J("value",e.toolParameter.name),t.xp6(4),t.Q6J("value",e.toolParameter.measurementUnitSymbol),t.xp6(6),t.Q6J("disabled",!e.setParameterForm.valid),t.xp6(1),t.Q6J("icon",e.faCheck),t.xp6(2),t.Q6J("icon",e.faX)}}class v{constructor(s){this.fb=s,this.faCheck=o.LEp,this.faX=o.EOp,this.cancelEvent=new t.vpe,this.setParameterEvent=new t.vpe}ngOnInit(){this.initForm()}initForm(){this.setParameterForm=this.fb.group({parameterValue:[null,a.kI.required]})}setParameterValue(){!this.setParameterForm.valid||this.setParameterEvent.emit({id:this.toolParameter.id,measurementUnitId:this.toolParameter.measurementUnitId,measurementUnitSymbol:this.toolParameter.measurementUnitSymbol,name:this.toolParameter.name,parameterValue:this.setParameterForm.controls.parameterValue.value})}static#t=this.\u0275fac=function(e){return new(e||v)(t.Y36(a.qu))};static#e=this.\u0275cmp=t.Xpm({type:v,selectors:[["app-set-parameter"]],inputs:{toolParameter:"toolParameter"},outputs:{cancelEvent:"cancelEvent",setParameterEvent:"setParameterEvent"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"text-center"],[1,"col-lg-3","col-md-5"],[1,"form-label"],["type","text","disabled","",1,"form-control",3,"value"],[1,"col-md-3"],[1,"col-lg-3","col-md-2"],["for","parameterValue",1,"form-label"],["type","text","id","parameterValue","formControlName","parameterValue",1,"form-control"],[1,"col-lg-3","col-md-2","action-buttons"],["type","button",1,"btn","btn-outline-success","me-2",3,"disabled","click"],[3,"icon"],["type","button",1,"btn","btn-outline-danger",3,"click"]],template:function(e,m){1&e&&t.YNc(0,A,21,6,"form",0),2&e&&t.Q6J("ngIf",m.toolParameter)},dependencies:[l.O5,h.BN,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".action-buttons[_ngcontent-%COMP%]{padding-top:2rem}"]})}function E(_,s){if(1&_){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"fa-icon",9),t.NdJ("click",function(){const b=t.CHM(e).$implicit,Z=t.oxw(3);return t.KtG(Z.onSetParameter(b))}),t.qZA()()()}if(2&_){const e=s.$implicit,m=t.oxw(3);t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.measurementUnitSymbol),t.xp6(2),t.Q6J("icon",m.faPlus)}}function T(_,s){if(1&_&&(t.TgZ(0,"table",7)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Nombre"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Magnitud"),t.qZA(),t._UZ(7,"th"),t.qZA()(),t.TgZ(8,"tbody"),t.YNc(9,E,7,3,"tr",8),t.qZA()()),2&_){const e=t.oxw(2);t.xp6(9),t.Q6J("ngForOf",e.parametersList)}}function w(_,s){1&_&&(t.TgZ(0,"p"),t._uU(1,"No hay m\xe1s par\xe1metros para agregar."),t.qZA())}function O(_,s){if(1&_){const e=t.EpF();t.ynx(0),t.YNc(1,T,10,1,"table",3),t.TgZ(2,"div"),t.YNc(3,w,2,0,"p",0),t.qZA(),t.TgZ(4,"div",4)(5,"button",5),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.onCreateNewParameter())}),t._uU(6," Crear nuevo par\xe1metro "),t.qZA(),t.TgZ(7,"button",6),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.onCancelAddParameter())}),t._uU(8," Cancelar "),t.qZA()(),t.BQk()}if(2&_){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.parametersList.length),t.xp6(2),t.Q6J("ngIf",!e.parametersList.length)}}function U(_,s){if(1&_){const e=t.EpF();t.TgZ(0,"app-add-new-parameter",10),t.NdJ("addNewParameterEvent",function(u){t.CHM(e);const b=t.oxw();return t.KtG(b.onNewParameterCreated(u))})("cancelEvent",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.onCancelCreateNewParameter())}),t.qZA()}}function I(_,s){if(1&_){const e=t.EpF();t.TgZ(0,"app-set-parameter",11),t.NdJ("cancelEvent",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.onCancelSetParameter())})("setParameterEvent",function(u){t.CHM(e);const b=t.oxw();return t.KtG(b.parameterWasSet(u))}),t.qZA()}if(2&_){const e=t.oxw();t.Q6J("toolParameter",e.parameterToSet)}}class C{constructor(){this.parametersList=[],this.faPlus=o.r8p,this.isCreatingNewParameter=!1,this.isSettingParameter=!1,this.cancelAddParameterEvent=new t.vpe,this.newParameterAddedEvent=new t.vpe}ngOnChanges(s){this.setParametersList()}setParametersList(){!this.existingParameters||(this.parametersList=this.parametersToFilter&&this.parametersToFilter.length?this.existingParameters.filter(s=>!this.parametersToFilter.some(e=>e.id==s.id)):this.existingParameters)}onCreateNewParameter(){this.isCreatingNewParameter=!0}onCancelCreateNewParameter(){this.isCreatingNewParameter=!1}onCancelAddParameter(){this.cancelAddParameterEvent.emit()}onNewParameterCreated(s){this.isCreatingNewParameter=!1,this.newParameterAddedEvent.emit(s)}onSetParameter(s){this.isSettingParameter=!0,this.parameterToSet=s}onCancelSetParameter(){this.isSettingParameter=!1}parameterWasSet(s){this.isSettingParameter=!1,this.newParameterAddedEvent.emit(s)}static#t=this.\u0275fac=function(e){return new(e||C)};static#e=this.\u0275cmp=t.Xpm({type:C,selectors:[["app-add-parameter"]],inputs:{existingParameters:"existingParameters",parametersToFilter:"parametersToFilter"},outputs:{cancelAddParameterEvent:"cancelAddParameterEvent",newParameterAddedEvent:"newParameterAddedEvent"},features:[t.TTD],decls:3,vars:3,consts:[[4,"ngIf"],[3,"addNewParameterEvent","cancelEvent",4,"ngIf"],[3,"toolParameter","cancelEvent","setParameterEvent",4,"ngIf"],["class","table",4,"ngIf"],[1,"text-center"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-outline-danger","ms-3",3,"click"],[1,"table"],[4,"ngFor","ngForOf"],["role","button",3,"icon","click"],[3,"addNewParameterEvent","cancelEvent"],[3,"toolParameter","cancelEvent","setParameterEvent"]],template:function(e,m){1&e&&(t.YNc(0,O,9,2,"ng-container",0),t.YNc(1,U,1,0,"app-add-new-parameter",1),t.YNc(2,I,1,1,"app-set-parameter",2)),2&e&&(t.Q6J("ngIf",m.parametersList&&!m.isCreatingNewParameter&&!m.isSettingParameter),t.xp6(1),t.Q6J("ngIf",m.isCreatingNewParameter),t.xp6(1),t.Q6J("ngIf",m.isSettingParameter))},dependencies:[l.sg,l.O5,h.BN,P,v]})}},1875:(f,g,r)=>{r.d(g,{J:()=>i});var t=r(1571),o=r(6895),l=r(9453);function h(c,p){if(1&c&&(t.TgZ(0,"label",6),t._uU(1),t.qZA()),2&c){const d=t.oxw();t.xp6(1),t.Oqu(d.label)}}function a(c,p){if(1&c){const d=t.EpF();t.TgZ(0,"li",7),t.NdJ("click",function(){const A=t.CHM(d).$implicit,v=t.oxw();return t.KtG(v.onSelectOption(A))}),t.TgZ(1,"p",8),t._uU(2),t.qZA()()}if(2&c){const d=p.$implicit;t.xp6(2),t.Oqu(d.description)}}class i{constructor(){this.buttonText="Seleccionar",this.onSelectOptionEvent=new t.vpe}ngOnChanges(){this.selectedOptionId&&this.options&&(this.selectedOption=this.options.find(p=>p.id==this.selectedOptionId))}onSelectOption(p){this.selectedOption=p,this.onSelectOptionEvent.emit(p)}static#t=this.\u0275fac=function(d){return new(d||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-dropdown"]],inputs:{label:"label",buttonText:"buttonText",options:"options",selectedOptionId:"selectedOptionId"},outputs:{onSelectOptionEvent:"onSelectOptionEvent"},features:[t.TTD],decls:7,vars:3,consts:[["ngbDropdown","",1,"app-dropdown"],["class","form-label",4,"ngIf"],["ngbDropdownToggle","","type","button","aria-controls","dropdown-basic",1,"btn","app-dropdown--button"],[1,"caret"],["ngbDropdownMenu","","role","menu",1,"app-dropdown--menu","p-0"],["class","dp-item","ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],[1,"form-label"],["ngbDropdownItem","",1,"dp-item",3,"click"],["role","button",1,"m-0","ps-2","pe-2"]],template:function(d,n){1&d&&(t.TgZ(0,"div",0),t.YNc(1,h,2,1,"label",1),t.TgZ(2,"button",2),t._uU(3),t._UZ(4,"span",3),t.qZA(),t.TgZ(5,"ul",4),t.YNc(6,a,3,1,"li",5),t.qZA()()),2&d&&(t.xp6(1),t.Q6J("ngIf",n.label),t.xp6(2),t.hij(" ",n.selectedOption?n.selectedOption.description:n.buttonText," "),t.xp6(3),t.Q6J("ngForOf",n.options))},dependencies:[o.sg,o.O5,l.jt,l.iD,l.Vi,l.TH],styles:[".dp-item[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;border-bottom:1px solid rgba(200,200,200,.75)}.dp-item[_ngcontent-%COMP%]:hover{background:rgba(200,200,200,.1)}.dp-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.app-dropdown--button[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border:1px solid #ced4da;width:100%}.app-dropdown--menu[_ngcontent-%COMP%]{max-height:200px;overflow:auto}"]})}},9993:(f,g,r)=>{r.d(g,{w:()=>c});var t=r(618),o=r(1571),l=r(1481),h=r(9453),a=r(6895);function i(p,d){if(1&p){const n=o.EpF();o.TgZ(0,"img",1),o.NdJ("click",function(){o.CHM(n);const A=o.oxw();return o.KtG(A.onImageClicked())}),o.qZA()}if(2&p){const n=o.oxw();o.Q6J("src",n.imgSrc,o.LSH)}}class c{constructor(d,n){this.sanitizer=d,this.modalService=n}ngOnChanges(){this.generateImageThumbnail()}generateImageThumbnail(){!this.compImage&&!this.appFile||(this.imgSrc=this.appFile?this.appFile.url:this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(this.compImage)))}onImageClicked(){this.modalService.open(t.M,{centered:!0}).componentInstance.fileUrl=this.imgSrc}static#t=this.\u0275fac=function(n){return new(n||c)(o.Y36(l.H7),o.Y36(h.FF))};static#e=this.\u0275cmp=o.Xpm({type:c,selectors:[["app-image-thumbnail"]],inputs:{compImage:"compImage",appFile:"appFile"},features:[o.TTD],decls:1,vars:1,consts:[["role","button",3,"src","click",4,"ngIf"],["role","button",3,"src","click"]],template:function(n,P){1&n&&o.YNc(0,i,1,1,"img",0),2&n&&o.Q6J("ngIf",P.imgSrc)},dependencies:[a.O5],styles:["img[_ngcontent-%COMP%]{height:9rem;object-fit:contain;border-radius:.5rem}"]})}},618:(f,g,r)=>{r.d(g,{M:()=>l});var t=r(1571),o=r(9453);class l{constructor(a){this.activeModal=a}static#t=this.\u0275fac=function(i){return new(i||l)(t.Y36(o.Kz))};static#e=this.\u0275cmp=t.Xpm({type:l,selectors:[["app-modal-image"]],inputs:{fileUrl:"fileUrl"},decls:4,vars:1,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","text-center"],[3,"src"]],template:function(i,c){1&i&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return c.activeModal.dismiss()}),t.qZA()(),t.TgZ(2,"div",2),t._UZ(3,"img",3),t.qZA()),2&i&&(t.xp6(3),t.Q6J("src",c.fileUrl,t.LSH))},styles:["img[_ngcontent-%COMP%]{max-width:100%;max-height:70vh;object-fit:contain}"]})}},7281:(f,g,r)=>{r.d(g,{s:()=>l});var t=r(1066),o=r(1571);class l{transform(a,i=""){if(!a)return new Array;switch(i){case"user":case"employee":return a.map(n=>({id:n.userId,description:n.name}));case"customer":case"branch":case"equipment":return a.map(n=>({id:n.id,description:n.name}));case"workItemActivityLog":return a.map(n=>({id:n.workItemActivityLogId,description:n.description}));case"measurementUnits":return a.map(n=>({id:n.measurementUnitId,description:"NA"==n.displayName?"NA":`${n.displayName} (${n.symbol})`}));case"workState":const c=new t.$;return a.map(n=>({id:n.id,description:c.transform(n)}));default:const{idPropName:p,descriptionPropName:d}=this.findProperties(a[0]);return a.map(n=>({id:n[p],description:n[d]}))}}findProperties(a){let i="",c="";for(let p in a)p.match(/^id$/i)?.length&&(i=p),(p.match(/^name$/i)?.length||p.includes("Description"))&&(c=p);return{idPropName:i,descriptionPropName:c}}static#t=this.\u0275fac=function(i){return new(i||l)};static#e=this.\u0275pipe=o.Yjl({name:"toDropdownItem",type:l,pure:!0})}},1066:(f,g,r)=>{r.d(g,{$:()=>o});var t=r(1571);class o{transform(h){if(!h)return"";switch(h.id){case 1:return"Abierta";case 2:return"En proceso";case 3:return"Cerrada";default:return""}}static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275pipe=t.Yjl({name:"workState",type:o,pure:!0})}},2340:(f,g,r)=>{r.d(g,{N:()=>t});const t={production:!0,apiUrl:"https://management.gmcrefrigeracion.com/api/",filesUrl:""}}}]);