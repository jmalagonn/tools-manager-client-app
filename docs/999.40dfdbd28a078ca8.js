"use strict";(self.webpackChunkToolsManagerClientApp=self.webpackChunkToolsManagerClientApp||[]).push([[999],{3999:(ko,qt,p)=>{p.r(qt),p.d(qt,{ToolsManagementModule:()=>K});var d=p(6895),y=p(8869),h=p(2771),t=p(1571),A=p(6858),jt=p(9993),c=p(433),_=p(2687),v=p(2216),Jt=p(1875),Ot=p(7281);function Wt(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"div",14)(1,"app-dropdown",15),t.NdJ("onSelectOptionEvent",function(i){t.CHM(o);const a=t.oxw();return t.KtG(a.onSelectOption(i))}),t.ALo(2,"toDropdownItem"),t.qZA()()}if(2&n){const o=t.oxw();t.xp6(1),t.Q6J("options",t.xi3(2,2,o.measurementUnits,"measurementUnits"))("label","Unidad de medida")}}class C{constructor(e,o){this.fb=e,this.httpService=o,this.faCheck=_.LEp,this.faX=_.EOp,this.cancelEvent=new t.vpe,this.addNewParameterEvent=new t.vpe}ngOnInit(){this.getMeasurementUnits(),this.initForm()}initForm(){this.addParameterForm=this.fb.group({parameterName:[null,c.kI.required],measurementUnitId:[null,c.kI.required],measurementUnitSymbol:[null],parameterValue:[null,c.kI.required]})}getMeasurementUnits(){this.httpService.get(h.G8.measurementUnitsApi).subscribe(e=>this.measurementUnits=e)}onSelectOption(e){const o=this.measurementUnits.find(r=>r.measurementUnitId==e.id);this.addParameterForm.patchValue({measurementUnitId:o.measurementUnitId,measurementUnitSymbol:o.symbol})}addNewParameter(){!this.addParameterForm.valid||this.addNewParameterEvent.emit({name:this.addParameterForm.controls.parameterName.value,measurementUnitId:this.addParameterForm.controls.measurementUnitId.value,measurementUnitSymbol:this.addParameterForm.controls.measurementUnitSymbol.value,parameterValue:this.addParameterForm.controls.parameterValue.value})}static#t=this.\u0275fac=function(o){return new(o||C)(t.Y36(c.qu),t.Y36(A.O))};static#e=this.\u0275cmp=t.Xpm({type:C,selectors:[["app-add-new-parameter"]],outputs:{cancelEvent:"cancelEvent",addNewParameterEvent:"addNewParameterEvent"},decls:18,vars:5,consts:[[3,"formGroup"],[1,"row"],[1,"text-center"],[1,"col-lg-3","col-md-5"],["for","parameterName",1,"form-label"],["type","text","id","parameterName","formControlName","parameterName",1,"form-control"],["class","col-md-3",4,"ngIf"],[1,"col-lg-3","col-md-2"],["for","parameterValue",1,"form-label"],["type","text","id","parameterValue","formControlName","parameterValue",1,"form-control"],[1,"col-lg-3","col-md-2","action-buttons"],["type","button",1,"btn","btn-outline-success","me-2",3,"disabled","click"],[3,"icon"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"col-md-3"],[3,"options","label","onSelectOptionEvent"]],template:function(o,r){1&o&&(t.TgZ(0,"form",0)(1,"div",1)(2,"h2",2),t._uU(3,"Nuevo par\xe1metero"),t.qZA(),t.TgZ(4,"div",3)(5,"label",4),t._uU(6,"Nombre del par\xe1metro"),t.qZA(),t._UZ(7,"input",5),t.qZA(),t.YNc(8,Wt,3,5,"div",6),t.TgZ(9,"div",7)(10,"label",8),t._uU(11,"Valor/Descripci\xf3n"),t.qZA(),t._UZ(12,"input",9),t.qZA(),t.TgZ(13,"div",10)(14,"button",11),t.NdJ("click",function(){return r.addNewParameter()}),t._UZ(15,"fa-icon",12),t.qZA(),t.TgZ(16,"button",13),t.NdJ("click",function(){return r.cancelEvent.emit()}),t._UZ(17,"fa-icon",12),t.qZA()()()()),2&o&&(t.Q6J("formGroup",r.addParameterForm),t.xp6(8),t.Q6J("ngIf",r.measurementUnits),t.xp6(6),t.Q6J("disabled",!r.addParameterForm.valid),t.xp6(1),t.Q6J("icon",r.faCheck),t.xp6(2),t.Q6J("icon",r.faX))},dependencies:[d.O5,v.BN,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,Jt.J,Ot.s],styles:[".action-buttons[_ngcontent-%COMP%]{padding-top:2rem}"]})}function Xt(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"form",1)(1,"div",2)(2,"h2",3),t._uU(3,"Configurar par\xe1metero"),t.qZA(),t.TgZ(4,"div",4)(5,"label",5),t._uU(6,"Nombre del par\xe1metro"),t.qZA(),t._UZ(7,"input",6),t.qZA(),t.TgZ(8,"div",7)(9,"label",5),t._uU(10,"Unidad de medida"),t.qZA(),t._UZ(11,"input",6),t.qZA(),t.TgZ(12,"div",8)(13,"label",9),t._uU(14,"Valor/Descripci\xf3n"),t.qZA(),t._UZ(15,"input",10),t.qZA(),t.TgZ(16,"div",11)(17,"button",12),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.setParameterValue())}),t._UZ(18,"fa-icon",13),t.qZA(),t.TgZ(19,"button",14),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.cancelEvent.emit())}),t._UZ(20,"fa-icon",13),t.qZA()()()()}if(2&n){const o=t.oxw();t.Q6J("formGroup",o.setParameterForm),t.xp6(7),t.Q6J("value",o.toolParameter.name),t.xp6(4),t.Q6J("value",o.toolParameter.measurementUnitSymbol),t.xp6(6),t.Q6J("disabled",!o.setParameterForm.valid),t.xp6(1),t.Q6J("icon",o.faCheck),t.xp6(2),t.Q6J("icon",o.faX)}}class F{constructor(e){this.fb=e,this.faCheck=_.LEp,this.faX=_.EOp,this.cancelEvent=new t.vpe,this.setParameterEvent=new t.vpe}ngOnInit(){this.initForm()}initForm(){this.setParameterForm=this.fb.group({parameterValue:[null,c.kI.required]})}setParameterValue(){!this.setParameterForm.valid||this.setParameterEvent.emit({id:this.toolParameter.id,measurementUnitId:this.toolParameter.measurementUnitId,measurementUnitSymbol:this.toolParameter.measurementUnitSymbol,name:this.toolParameter.name,parameterValue:this.setParameterForm.controls.parameterValue.value})}static#t=this.\u0275fac=function(o){return new(o||F)(t.Y36(c.qu))};static#e=this.\u0275cmp=t.Xpm({type:F,selectors:[["app-set-parameter"]],inputs:{toolParameter:"toolParameter"},outputs:{cancelEvent:"cancelEvent",setParameterEvent:"setParameterEvent"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"text-center"],[1,"col-lg-3","col-md-5"],[1,"form-label"],["type","text","disabled","",1,"form-control",3,"value"],[1,"col-md-3"],[1,"col-lg-3","col-md-2"],["for","parameterValue",1,"form-label"],["type","text","id","parameterValue","formControlName","parameterValue",1,"form-control"],[1,"col-lg-3","col-md-2","action-buttons"],["type","button",1,"btn","btn-outline-success","me-2",3,"disabled","click"],[3,"icon"],["type","button",1,"btn","btn-outline-danger",3,"click"]],template:function(o,r){1&o&&t.YNc(0,Xt,21,6,"form",0),2&o&&t.Q6J("ngIf",r.toolParameter)},dependencies:[d.O5,v.BN,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u],styles:[".action-buttons[_ngcontent-%COMP%]{padding-top:2rem}"]})}function te(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"fa-icon",9),t.NdJ("click",function(){const a=t.CHM(o).$implicit,s=t.oxw(3);return t.KtG(s.onSetParameter(a))}),t.qZA()()()}if(2&n){const o=e.$implicit,r=t.oxw(3);t.xp6(2),t.Oqu(o.name),t.xp6(2),t.Oqu(o.measurementUnitSymbol),t.xp6(2),t.Q6J("icon",r.faPlus)}}function ee(n,e){if(1&n&&(t.TgZ(0,"table",7)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Nombre"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Magnitud"),t.qZA(),t._UZ(7,"th"),t.qZA()(),t.TgZ(8,"tbody"),t.YNc(9,te,7,3,"tr",8),t.qZA()()),2&n){const o=t.oxw(2);t.xp6(9),t.Q6J("ngForOf",o.parametersList)}}function oe(n,e){1&n&&(t.TgZ(0,"p"),t._uU(1,"No hay m\xe1s par\xe1metros para agregar."),t.qZA())}function ne(n,e){if(1&n){const o=t.EpF();t.ynx(0),t.YNc(1,ee,10,1,"table",3),t.TgZ(2,"div"),t.YNc(3,oe,2,0,"p",0),t.qZA(),t.TgZ(4,"div",4)(5,"button",5),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.onCreateNewParameter())}),t._uU(6," Crear nuevo par\xe1metro "),t.qZA(),t.TgZ(7,"button",6),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.onCancelAddParameter())}),t._uU(8," Cancelar "),t.qZA()(),t.BQk()}if(2&n){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.parametersList.length),t.xp6(2),t.Q6J("ngIf",!o.parametersList.length)}}function re(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"app-add-new-parameter",10),t.NdJ("addNewParameterEvent",function(i){t.CHM(o);const a=t.oxw();return t.KtG(a.onNewParameterCreated(i))})("cancelEvent",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.onCancelCreateNewParameter())}),t.qZA()}}function ie(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"app-set-parameter",11),t.NdJ("cancelEvent",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.onCancelSetParameter())})("setParameterEvent",function(i){t.CHM(o);const a=t.oxw();return t.KtG(a.parameterWasSet(i))}),t.qZA()}if(2&n){const o=t.oxw();t.Q6J("toolParameter",o.parameterToSet)}}class w{constructor(){this.parametersList=[],this.faPlus=_.r8p,this.isCreatingNewParameter=!1,this.isSettingParameter=!1,this.cancelAddParameterEvent=new t.vpe,this.newParameterAddedEvent=new t.vpe}ngOnChanges(e){this.setParametersList()}setParametersList(){!this.existingParameters||(this.parametersList=this.parametersToFilter&&this.parametersToFilter.length?this.existingParameters.filter(e=>!this.parametersToFilter.some(o=>o.id==e.id)):this.existingParameters)}onCreateNewParameter(){this.isCreatingNewParameter=!0}onCancelCreateNewParameter(){this.isCreatingNewParameter=!1}onCancelAddParameter(){this.cancelAddParameterEvent.emit()}onNewParameterCreated(e){this.newParameterAddedEvent.emit(e)}onSetParameter(e){this.isSettingParameter=!0,this.parameterToSet=e}onCancelSetParameter(){this.isSettingParameter=!1}parameterWasSet(e){this.newParameterAddedEvent.emit(e)}static#t=this.\u0275fac=function(o){return new(o||w)};static#e=this.\u0275cmp=t.Xpm({type:w,selectors:[["app-add-parameter"]],inputs:{existingParameters:"existingParameters",parametersToFilter:"parametersToFilter"},outputs:{cancelAddParameterEvent:"cancelAddParameterEvent",newParameterAddedEvent:"newParameterAddedEvent"},features:[t.TTD],decls:3,vars:3,consts:[[4,"ngIf"],[3,"addNewParameterEvent","cancelEvent",4,"ngIf"],[3,"toolParameter","cancelEvent","setParameterEvent",4,"ngIf"],["class","table",4,"ngIf"],[1,"text-center"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-outline-danger","ms-3",3,"click"],[1,"table"],[4,"ngFor","ngForOf"],["role","button",3,"icon","click"],[3,"addNewParameterEvent","cancelEvent"],[3,"toolParameter","cancelEvent","setParameterEvent"]],template:function(o,r){1&o&&(t.YNc(0,ne,9,2,"ng-container",0),t.YNc(1,re,1,0,"app-add-new-parameter",1),t.YNc(2,ie,1,1,"app-set-parameter",2)),2&o&&(t.Q6J("ngIf",r.parametersList&&!r.isCreatingNewParameter&&!r.isSettingParameter),t.xp6(1),t.Q6J("ngIf",r.isCreatingNewParameter),t.xp6(1),t.Q6J("ngIf",r.isSettingParameter))},dependencies:[d.sg,d.O5,v.BN,C,F]})}var u=p(5861),Z=p(1894);function ae(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"ngx-dropzone-image-preview",2),t.NdJ("removed",function(){const a=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.onRemoveFile(a))}),t.qZA()}2&n&&t.Q6J("file",e.$implicit)("removable",!0)}class P{constructor(){this.appFilePrefix="app-file",this.files=[],this.removeFileEvent=new t.vpe,this.addFilesEvent=new t.vpe}ngOnChanges(){(!this.files||!this.files.length)&&this.appFiles&&this.getFiles()}onSelectFile(e){const o=this.files;o.push(...e.addedFiles),this.addFilesEvent.emit(e.addedFiles),this.files=o}onRemoveFile(e){if(!this.files||!e)return;const r=this.files.filter(i=>i.name!=e.name);if(this.files=r,this.appFiles&&this.appFiles.length&&e.name.match(/app-file/)?.length){const i=e.name.substring(this.appFilePrefix.length+1),a=this.appFiles.find(s=>s.appFileId==parseInt(i));this.removeFileEvent.emit(a)}}getFiles(){var e=this;this.appFiles.map(function(){var o=(0,u.Z)(function*(r){const a=yield(yield fetch(r.url)).arrayBuffer();e.files?.push(new File([a],e.appFilePrefix+"-"+r.appFileId.toString()))});return function(r){return o.apply(this,arguments)}}())}static#t=this.\u0275fac=function(o){return new(o||P)};static#e=this.\u0275cmp=t.Xpm({type:P,selectors:[["app-add-images"]],inputs:{files:"files",appFiles:"appFiles"},outputs:{removeFileEvent:"removeFileEvent",addFilesEvent:"addFilesEvent"},features:[t.TTD],decls:4,vars:2,consts:[[3,"accept","change"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngFor","ngForOf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed"]],template:function(o,r){1&o&&(t.TgZ(0,"ngx-dropzone",0),t.NdJ("change",function(a){return r.onSelectFile(a)}),t.TgZ(1,"ngx-dropzone-label"),t._uU(2,"Haga click o arrastre hasta aqu\xed para a\xf1adir archivos"),t.qZA(),t.YNc(3,ae,1,2,"ngx-dropzone-image-preview",1),t.qZA()),2&o&&(t.Q6J("accept","image/*"),t.xp6(3),t.Q6J("ngForOf",r.files))},dependencies:[d.sg,Z._f,Z.NP,Z.sv]})}function se(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"div",3)(1,"label",14),t._uU(2),t.qZA(),t.TgZ(3,"div",15)(4,"input",16),t.NdJ("change",function(i){const s=t.CHM(o).$implicit,l=t.oxw(3);return t.KtG(l.onChangeParameterValue(i,s))}),t.qZA(),t.TgZ(5,"fa-icon",17),t.NdJ("click",function(){const a=t.CHM(o).$implicit,s=t.oxw(3);return t.KtG(s.onDeleteParameter(a))}),t.qZA()()()}if(2&n){const o=e.$implicit,r=t.oxw(3);t.xp6(1),t.Q6J("for","toolParameter-"+o.id),t.xp6(1),t.Oqu(o.name),t.xp6(2),t.Q6J("value",o.parameterValue),t.xp6(1),t.Q6J("icon",r.faTrash)}}function le(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(3);return t.KtG(i.onAddMoreParameters())}),t._uU(1," Agregar m\xe1s elementos "),t.qZA()}}function ce(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"app-add-parameter",19),t.NdJ("newParameterAddedEvent",function(i){t.CHM(o);const a=t.oxw(3);return t.KtG(a.onAddedNewParameter(i))})("cancelAddParameterEvent",function(){t.CHM(o);const i=t.oxw(3);return t.KtG(i.onCancelAddMoreParameters())}),t.qZA()}if(2&n){const o=t.oxw(3);t.Q6J("existingParameters",o.toolParameters)("parametersToFilter",o.tool.toolParameters)}}function me(n,e){if(1&n&&(t.ynx(0),t.YNc(1,se,6,4,"div",11),t.TgZ(2,"div",8),t.YNc(3,le,2,0,"button",12),t.YNc(4,ce,1,2,"app-add-parameter",13),t.qZA(),t.BQk()),2&n){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",o.tool.toolParameters),t.xp6(2),t.Q6J("ngIf",!o.isAddingToolParameter),t.xp6(1),t.Q6J("ngIf",o.isAddingToolParameter)}}function ue(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"div",20)(1,"button",21),t._uU(2,"Guardar"),t.qZA(),t.TgZ(3,"button",22),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.onCancel())}),t._uU(4,"Cancelar"),t.qZA()()}if(2&n){const o=t.oxw(2);t.xp6(1),t.Q6J("disabled",!o.editToolForm.valid)}}function de(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"form",1),t.NdJ("ngSubmit",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.editToolForm.valid&&i.onSubmit())}),t.TgZ(1,"div",2)(2,"div",3)(3,"label",4),t._uU(4,"Nombre"),t.qZA(),t._UZ(5,"input",5),t.qZA(),t.YNc(6,me,5,3,"ng-container",6),t.qZA(),t.TgZ(7,"div",7)(8,"h2",8),t._uU(9,"Im\xe1genes"),t.qZA(),t.TgZ(10,"app-add-images",9),t.NdJ("addFilesEvent",function(i){t.CHM(o);const a=t.oxw();return t.KtG(a.onAddFile(i))})("removeFileEvent",function(i){t.CHM(o);const a=t.oxw();return t.KtG(a.onDeleteFile(i))}),t.qZA()(),t.YNc(11,ue,5,1,"div",10),t.qZA()}if(2&n){const o=t.oxw();t.Q6J("formGroup",o.editToolForm),t.xp6(6),t.Q6J("ngIf",o.tool.toolParameters),t.xp6(4),t.Q6J("appFiles",o.tool.files),t.xp6(1),t.Q6J("ngIf",!o.isAddingToolParameter)}}class E{constructor(e,o){this.fb=e,this.httpService=o,this.isAddingToolParameter=!1,this.faTrash=_.$aW,this.deletedFileIds=[],this.addedFiles=[],this.updatedToolEvent=new t.vpe,this.cancelUpdateToolEvent=new t.vpe}ngOnInit(){this.initForm()}initForm(){!this.tool||(this.editToolForm=this.fb.group({toolId:[this.tool.toolId,c.kI.required],toolName:[this.tool.toolName,c.kI.required]}))}onSubmit(){this.tool&&(this.tool.toolName=this.editToolForm?.controls.toolName.value,this.updatedToolEvent.emit({id:this.tool.toolId,name:this.tool.toolName,toolParameters:this.tool.toolParameters,deletedFileIds:this.deletedFileIds,addedFiles:this.addedFiles}))}onCancel(){this.cancelUpdateToolEvent.emit()}onAddMoreParameters(){this.isAddingToolParameter=!0,this.httpService.get(h.G8.toolParametersApi).subscribe(e=>this.toolParameters=e)}onAddedNewParameter(e){this.tool.toolParameters.push(e),this.isAddingToolParameter=!1}onCancelAddMoreParameters(){this.isAddingToolParameter=!1}onChangeParameterValue(e,o){if(!this.tool||!this.tool.toolParameters||!this.tool.toolParameters.length)return;const r=this.tool.toolParameters?.findIndex(i=>i.id==o.id);this.tool.toolParameters[r].parameterValue=e.target.value}onDeleteParameter(e){this.tool.toolParameters=this.tool.toolParameters.filter(o=>o.id!=e.id)}onAddFile(e){this.addedFiles.push(e)}onDeleteFile(e){!this.tool||!e.appFileId||this.deletedFileIds.push(e.appFileId)}static#t=this.\u0275fac=function(o){return new(o||E)(t.Y36(c.qu),t.Y36(A.O))};static#e=this.\u0275cmp=t.Xpm({type:E,selectors:[["app-edit-tool-form"]],inputs:{tool:"tool"},outputs:{updatedToolEvent:"updatedToolEvent",cancelUpdateToolEvent:"cancelUpdateToolEvent"},decls:1,vars:1,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row","g-3","mb-3"],[1,"col-lg-6"],["for","toolName",1,"form-label"],["type","text","id","toolName","formControlName","toolName",1,"form-control"],[4,"ngIf"],[1,"row","mb-3"],[1,"text-center"],[3,"appFiles","addFilesEvent","removeFileEvent"],["class","text-end",4,"ngIf"],["class","col-lg-6",4,"ngFor","ngForOf"],["class","btn btn-outline-primary","type","button",3,"click",4,"ngIf"],[3,"existingParameters","parametersToFilter","newParameterAddedEvent","cancelAddParameterEvent",4,"ngIf"],[1,"form-label",3,"for"],[1,"parameter-box"],["type","text","name","'toolParameter-' + toolParameter.id",1,"form-control",3,"value","change"],["role","button",3,"icon","click"],["type","button",1,"btn","btn-outline-primary",3,"click"],[3,"existingParameters","parametersToFilter","newParameterAddedEvent","cancelAddParameterEvent"],[1,"text-end"],["type","submit",1,"btn","btn-outline-primary",3,"disabled"],["type","button",1,"btn","btn-outline-danger","ms-3",3,"click"]],template:function(o,r){1&o&&t.YNc(0,de,12,4,"form",0),2&o&&t.Q6J("ngIf",r.editToolForm)},dependencies:[d.sg,d.O5,v.BN,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,w,P],styles:[".parameter-box[_ngcontent-%COMP%]{display:flex;align-items:center;padding-right:.75rem;border:1px solid #ced4da;border-radius:.375rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.parameter-box[_ngcontent-%COMP%]:focus-within{box-shadow:0 0 0 .25rem #0d6efd40}.parameter-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none}.parameter-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none}.parameter-box[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{color:#dc3545}"]})}var B=p(8246);function pe(n,e){if(n.match(/^[a-z]+:\/\//i))return n;if(n.match(/^\/\//))return window.location.protocol+n;if(n.match(/^[a-z]+:/i))return n;const o=document.implementation.createHTMLDocument(),r=o.createElement("base"),i=o.createElement("a");return o.head.appendChild(r),o.body.appendChild(i),e&&(r.href=e),i.href=n,i.href}const _e=(()=>{let n=0;return()=>(n+=1,`u${`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4)}${n}`)})();function x(n){const e=[];for(let o=0,r=n.length;o<r;o++)e.push(n[o]);return e}function I(n,e){const r=(n.ownerDocument.defaultView||window).getComputedStyle(n).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function kt(n,e={}){const o=e.width||function fe(n){const e=I(n,"border-left-width"),o=I(n,"border-right-width");return n.clientWidth+e+o}(n),r=e.height||function ge(n){const e=I(n,"border-top-width"),o=I(n,"border-bottom-width");return n.clientHeight+e+o}(n);return{width:o,height:r}}function he(){let n,e;try{e=process}catch{}const o=e&&e.env?e.env.devicePixelRatio:null;return o&&(n=parseInt(o,10),Number.isNaN(n)&&(n=1)),n||window.devicePixelRatio||1}const g=16384;function Te(n){(n.width>g||n.height>g)&&(n.width>g&&n.height>g?n.width>n.height?(n.height*=g/n.width,n.width=g):(n.width*=g/n.height,n.height=g):n.width>g?(n.height*=g/n.width,n.width=g):(n.width*=g/n.height,n.height=g))}function xe(n,e={}){return new Promise(n.toBlob?o=>{n.toBlob(o,e.type?e.type:"image/png",e.quality?e.quality:1)}:o=>{const r=window.atob(n.toDataURL(e.type?e.type:void 0,e.quality?e.quality:void 0).split(",")[1]),i=r.length,a=new Uint8Array(i);for(let s=0;s<i;s+=1)a[s]=r.charCodeAt(s);o(new Blob([a],{type:e.type?e.type:"image/png"}))})}function S(n){return new Promise((e,o)=>{const r=new Image;r.decode=()=>e(r),r.onload=()=>e(r),r.onerror=o,r.crossOrigin="anonymous",r.decoding="async",r.src=n})}function ve(n){return j.apply(this,arguments)}function j(){return(j=(0,u.Z)(function*(n){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(n)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)})).apply(this,arguments)}function be(n,e,o){return W.apply(this,arguments)}function W(){return(W=(0,u.Z)(function*(n,e,o){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${o}`),i.setAttribute("viewBox",`0 0 ${e} ${o}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),i.appendChild(a),a.appendChild(n),ve(i)})).apply(this,arguments)}const f=(n,e)=>{if(n instanceof e)return!0;const o=Object.getPrototypeOf(n);return null!==o&&(o.constructor.name===e.name||f(o,e))};function Mt(n,e,o){const r=window.getComputedStyle(n,o),i=r.getPropertyValue("content");if(""===i||"none"===i)return;const a=_e();try{e.className=`${e.className} ${a}`}catch{return}const s=document.createElement("style");s.appendChild(function Ze(n,e,o){const r=`.${n}:${e}`,i=o.cssText?function ye(n){const e=n.getPropertyValue("content");return`${n.cssText} content: '${e.replace(/'|"/g,"")}';`}(o):function Ae(n){return x(n).map(e=>`${e}: ${n.getPropertyValue(e)}${n.getPropertyPriority(e)?" !important":""};`).join(" ")}(o);return document.createTextNode(`${r}{${i}}`)}(a,o,r)),e.appendChild(s)}const Qt="application/font-woff",Lt="image/jpeg",Ce={woff:Qt,woff2:Qt,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Lt,jpeg:Lt,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function X(n){const e=function Fe(n){const e=/\.([^./]*?)$/g.exec(n);return e?e[1]:""}(n).toLowerCase();return Ce[e]||""}function Pe(n){return n.split(/,/)[1]}function tt(n){return-1!==n.search(/^(data:)/)}function Rt(n,e){return`data:${e};base64,${n}`}function Gt(n,e,o){return et.apply(this,arguments)}function et(){return(et=(0,u.Z)(function*(n,e,o){const r=yield fetch(n,e);if(404===r.status)throw new Error(`Resource "${r.url}" not found`);const i=yield r.blob();return new Promise((a,s)=>{const l=new FileReader;l.onerror=s,l.onloadend=()=>{try{a(o({res:r,result:l.result}))}catch(m){s(m)}},l.readAsDataURL(i)})})).apply(this,arguments)}const ot={};function Ee(n,e,o){let r=n.replace(/\?.*/,"");return o&&(r=n),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}function nt(n,e,o){return rt.apply(this,arguments)}function rt(){return(rt=(0,u.Z)(function*(n,e,o){const r=Ee(n,e,o.includeQueryParams);if(null!=ot[r])return ot[r];let i;o.cacheBust&&(n+=(/\?/.test(n)?"&":"?")+(new Date).getTime());try{i=Rt(yield Gt(n,o.fetchRequestInit,({res:s,result:l})=>(e||(e=s.headers.get("Content-Type")||""),Pe(l))),e)}catch(a){i=o.imagePlaceholder||"";let s=`Failed to fetch resource: ${n}`;a&&(s="string"==typeof a?a:a.message),s&&console.warn(s)}return ot[r]=i,i})).apply(this,arguments)}function Ie(n){return it.apply(this,arguments)}function it(){return(it=(0,u.Z)(function*(n){const e=n.toDataURL();return"data:,"===e?n.cloneNode(!1):S(e)})).apply(this,arguments)}function Se(n,e){return at.apply(this,arguments)}function at(){return(at=(0,u.Z)(function*(n,e){if(n.currentSrc){const a=document.createElement("canvas"),s=a.getContext("2d");return a.width=n.clientWidth,a.height=n.clientHeight,s?.drawImage(n,0,0,a.width,a.height),S(a.toDataURL())}const o=n.poster,r=X(o);return S(yield nt(o,r,e))})).apply(this,arguments)}function Ne(n){return st.apply(this,arguments)}function st(){return(st=(0,u.Z)(function*(n){var e;try{if(null!==(e=n?.contentDocument)&&void 0!==e&&e.body)return yield N(n.contentDocument.body,{},!0)}catch{}return n.cloneNode(!1)})).apply(this,arguments)}function Ue(n,e){return lt.apply(this,arguments)}function lt(){return(lt=(0,u.Z)(function*(n,e){return f(n,HTMLCanvasElement)?Ie(n):f(n,HTMLVideoElement)?Se(n,e):f(n,HTMLIFrameElement)?Ne(n):n.cloneNode(!1)})).apply(this,arguments)}const qe=n=>null!=n.tagName&&"SLOT"===n.tagName.toUpperCase();function Je(n,e,o){return ct.apply(this,arguments)}function ct(){return(ct=(0,u.Z)(function*(n,e,o){var r,i;let a=[];return a=qe(n)&&n.assignedNodes?x(n.assignedNodes()):f(n,HTMLIFrameElement)&&(null===(r=n.contentDocument)||void 0===r?void 0:r.body)?x(n.contentDocument.body.childNodes):x((null!==(i=n.shadowRoot)&&void 0!==i?i:n).childNodes),0===a.length||f(n,HTMLVideoElement)||(yield a.reduce((s,l)=>s.then(()=>N(l,o)).then(m=>{m&&e.appendChild(m)}),Promise.resolve())),e})).apply(this,arguments)}function Qe(n,e){return f(e,Element)&&(function Oe(n,e){const o=e.style;if(!o)return;const r=window.getComputedStyle(n);r.cssText?(o.cssText=r.cssText,o.transformOrigin=r.transformOrigin):x(r).forEach(i=>{let a=r.getPropertyValue(i);"font-size"===i&&a.endsWith("px")&&(a=Math.floor(parseFloat(a.substring(0,a.length-2)))-.1+"px"),f(n,HTMLIFrameElement)&&"display"===i&&"inline"===a&&(a="block"),"d"===i&&e.getAttribute("d")&&(a=`path(${e.getAttribute("d")})`),o.setProperty(i,a,r.getPropertyPriority(i))})}(n,e),function we(n,e){Mt(n,e,":before"),Mt(n,e,":after")}(n,e),function ke(n,e){f(n,HTMLTextAreaElement)&&(e.innerHTML=n.value),f(n,HTMLInputElement)&&e.setAttribute("value",n.value)}(n,e),function Me(n,e){if(f(n,HTMLSelectElement)){const r=Array.from(e.children).find(i=>n.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}(n,e)),e}function Le(n,e){return mt.apply(this,arguments)}function mt(){return(mt=(0,u.Z)(function*(n,e){const o=n.querySelectorAll?n.querySelectorAll("use"):[];if(0===o.length)return n;const r={};for(let a=0;a<o.length;a++){const l=o[a].getAttribute("xlink:href");if(l){const m=n.querySelector(l),T=document.querySelector(l);!m&&T&&!r[l]&&(r[l]=yield N(T,e,!0))}}const i=Object.values(r);if(i.length){const a="http://www.w3.org/1999/xhtml",s=document.createElementNS(a,"svg");s.setAttribute("xmlns",a),s.style.position="absolute",s.style.width="0",s.style.height="0",s.style.overflow="hidden",s.style.display="none";const l=document.createElementNS(a,"defs");s.appendChild(l);for(let m=0;m<i.length;m++)l.appendChild(i[m]);n.appendChild(s)}return n})).apply(this,arguments)}function N(n,e,o){return ut.apply(this,arguments)}function ut(){return(ut=(0,u.Z)(function*(n,e,o){return o||!e.filter||e.filter(n)?Promise.resolve(n).then(r=>Ue(r,e)).then(r=>Je(n,r,e)).then(r=>Qe(n,r)).then(r=>Le(r,e)):null})).apply(this,arguments)}const Yt=/url\((['"]?)([^'"]+?)\1\)/g,Re=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Ge=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Ye(n){const e=n.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function $e(n){const e=[];return n.replace(Yt,(o,r,i)=>(e.push(i),o)),e.filter(o=>!tt(o))}function De(n,e,o,r,i){return dt.apply(this,arguments)}function dt(){return(dt=(0,u.Z)(function*(n,e,o,r,i){try{const a=o?pe(e,o):e,s=X(e);let l;return l=i?Rt(yield i(a),s):yield nt(a,s,r),n.replace(Ye(e),`$1${l}$3`)}catch{}return n})).apply(this,arguments)}function He(n,{preferredFontFormat:e}){return e?n.replace(Ge,o=>{for(;;){const[r,,i]=Re.exec(o)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):n}function $t(n){return-1!==n.search(Yt)}function Dt(n,e,o){return pt.apply(this,arguments)}function pt(){return(pt=(0,u.Z)(function*(n,e,o){if(!$t(n))return n;const r=He(n,o);return $e(r).reduce((a,s)=>a.then(l=>De(l,s,e,o)),Promise.resolve(r))})).apply(this,arguments)}function U(n,e,o){return _t.apply(this,arguments)}function _t(){return(_t=(0,u.Z)(function*(n,e,o){var r;const i=null===(r=e.style)||void 0===r?void 0:r.getPropertyValue(n);if(i){const a=yield Dt(i,null,o);return e.style.setProperty(n,a,e.style.getPropertyPriority(n)),!0}return!1})).apply(this,arguments)}function Ve(n,e){return ft.apply(this,arguments)}function ft(){return(ft=(0,u.Z)(function*(n,e){(yield U("background",n,e))||(yield U("background-image",n,e)),(yield U("mask",n,e))||(yield U("mask-image",n,e))})).apply(this,arguments)}function ze(n,e){return gt.apply(this,arguments)}function gt(){return(gt=(0,u.Z)(function*(n,e){const o=f(n,HTMLImageElement);if((!o||tt(n.src))&&(!f(n,SVGImageElement)||tt(n.href.baseVal)))return;const r=o?n.src:n.href.baseVal,i=yield nt(r,X(r),e);yield new Promise((a,s)=>{n.onload=a,n.onerror=s;const l=n;l.decode&&(l.decode=a),"lazy"===l.loading&&(l.loading="eager"),o?(n.srcset="",n.src=i):n.href.baseVal=i})})).apply(this,arguments)}function Ke(n,e){return ht.apply(this,arguments)}function ht(){return(ht=(0,u.Z)(function*(n,e){const r=x(n.childNodes).map(i=>Ht(i,e));yield Promise.all(r).then(()=>n)})).apply(this,arguments)}function Ht(n,e){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,u.Z)(function*(n,e){f(n,Element)&&(yield Ve(n,e),yield ze(n,e),yield Ke(n,e))})).apply(this,arguments)}function Be(n,e){const{style:o}=n;e.backgroundColor&&(o.backgroundColor=e.backgroundColor),e.width&&(o.width=`${e.width}px`),e.height&&(o.height=`${e.height}px`);const r=e.style;return null!=r&&Object.keys(r).forEach(i=>{o[i]=r[i]}),n}const Vt={};function zt(n){return xt.apply(this,arguments)}function xt(){return(xt=(0,u.Z)(function*(n){let e=Vt[n];return null!=e||(e={url:n,cssText:yield(yield fetch(n)).text()},Vt[n]=e),e})).apply(this,arguments)}function Kt(n,e){return vt.apply(this,arguments)}function vt(){return vt=(0,u.Z)(function*(n,e){let o=n.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(o.match(/url\([^)]+\)/g)||[]).map(function(){var s=(0,u.Z)(function*(l){let m=l.replace(r,"$1");return m.startsWith("https://")||(m=new URL(m,n.url).href),Gt(m,e.fetchRequestInit,({result:T})=>(o=o.replace(l,`url(${T})`),[l,T]))});return function(l){return s.apply(this,arguments)}}());return Promise.all(a).then(()=>o)}),vt.apply(this,arguments)}function Bt(n){if(null==n)return[];const e=[];let r=n.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const m=i.exec(r);if(null===m)break;e.push(m[0])}r=r.replace(i,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,l=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let m=a.exec(r);if(null===m){if(m=l.exec(r),null===m)break;a.lastIndex=l.lastIndex}else l.lastIndex=a.lastIndex;e.push(m[0])}return e}function je(n,e){return bt.apply(this,arguments)}function bt(){return(bt=(0,u.Z)(function*(n,e){const o=[],r=[];return n.forEach(i=>{if("cssRules"in i)try{x(i.cssRules||[]).forEach((a,s)=>{if(a.type===CSSRule.IMPORT_RULE){let l=s+1;const T=zt(a.href).then(b=>Kt(b,e)).then(b=>Bt(b).forEach(Ut=>{try{i.insertRule(Ut,Ut.startsWith("@import")?l+=1:i.cssRules.length)}catch(Oo){console.error("Error inserting rule from remote css",{rule:Ut,error:Oo})}})).catch(b=>{console.error("Error loading remote css",b.toString())});r.push(T)}})}catch(a){const s=n.find(l=>null==l.href)||document.styleSheets[0];null!=i.href&&r.push(zt(i.href).then(l=>Kt(l,e)).then(l=>Bt(l).forEach(m=>{s.insertRule(m,i.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(n.forEach(i=>{if("cssRules"in i)try{x(i.cssRules||[]).forEach(a=>{o.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${i.href}`,a)}}),o))})).apply(this,arguments)}function We(n){return n.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>$t(e.style.getPropertyValue("src")))}function Xe(n,e){return yt.apply(this,arguments)}function yt(){return(yt=(0,u.Z)(function*(n,e){if(null==n.ownerDocument)throw new Error("Provided element is not within a Document");const o=x(n.ownerDocument.styleSheets);return We(yield je(o,e))})).apply(this,arguments)}function to(n,e){return At.apply(this,arguments)}function At(){return(At=(0,u.Z)(function*(n,e){const o=yield Xe(n,e);return(yield Promise.all(o.map(i=>Dt(i.cssText,i.parentStyleSheet?i.parentStyleSheet.href:null,e)))).join("\n")})).apply(this,arguments)}function eo(n,e){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,u.Z)(function*(n,e){const o=null!=e.fontEmbedCSS?e.fontEmbedCSS:e.skipFonts?null:yield to(n,e);if(o){const r=document.createElement("style"),i=document.createTextNode(o);r.appendChild(i),n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)}})).apply(this,arguments)}function oo(n){return wt.apply(this,arguments)}function wt(){return(wt=(0,u.Z)(function*(n,e={}){const{width:o,height:r}=kt(n,e),i=yield N(n,e,!0);return yield eo(i,e),yield Ht(i,e),Be(i,e),yield be(i,o,r)})).apply(this,arguments)}function q(n){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,u.Z)(function*(n,e={}){const{width:o,height:r}=kt(n,e),i=yield oo(n,e),a=yield S(i),s=document.createElement("canvas"),l=s.getContext("2d"),m=e.pixelRatio||he(),T=e.canvasWidth||o,b=e.canvasHeight||r;return s.width=T*m,s.height=b*m,e.skipAutoScale||Te(s),s.style.width=`${T}`,s.style.height=`${b}`,e.backgroundColor&&(l.fillStyle=e.backgroundColor,l.fillRect(0,0,s.width,s.height)),l.drawImage(a,0,0,s.width,s.height),s})).apply(this,arguments)}function It(){return(It=(0,u.Z)(function*(n,e={}){const o=yield q(n,e);return yield xe(o)})).apply(this,arguments)}var ro=p(7185),Nt=p(7129);class J{constructor(e){this.toastrService=e,this.qrCodeElementType=B.TT.IMG,this.qrCodeErrorCorrectionLevel=B.Jk.HIGH,this.faImage=_.VmB,this.faSave=_.r6l}copyOrSaveQRInfo(e=!0){var o=this;return(0,u.Z)(function*(){const r=document.getElementById("tool-qr-info"),i=r.firstChild;i.innerHTML=o.tool.toolName;const a=yield function no(n){return It.apply(this,arguments)}(r,{backgroundColor:"white"});e?yield navigator.clipboard.write([new ClipboardItem({"image/png":a})]):o.saveQrInfo(a),i.innerHTML="C\xf3digo QR",o.toastrService.success("Imagen copiada al portapapeles")})()}saveQrInfo(e){var o=URL.createObjectURL(e),r=document.createElement("a");r.href=o,r.download=`${this.tool.toolName}.png`,r.click(),r.remove()}static#t=this.\u0275fac=function(o){return new(o||J)(t.Y36(ro._W))};static#e=this.\u0275cmp=t.Xpm({type:J,selectors:[["app-qr-info"]],inputs:{tool:"tool"},decls:15,vars:8,consts:[["id","tool-qr-info"],[1,"text-center","tool-qr-info--name"],[1,"qr-card"],[1,"text-center",3,"elementType","value","errorCorrectionLevel"],[1,"text-center"],[1,"d-flex","justify-content-center"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[3,"icon"],[1,"btn","btn-sm","btn-outline-primary","ms-2",3,"click"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"C\xf3digo QR"),t.qZA(),t.TgZ(3,"div",2),t._UZ(4,"ngx-qrcode",3),t.TgZ(5,"p",4),t._uU(6),t.ALo(7,"lastCharacters"),t.qZA()()(),t.TgZ(8,"div",5)(9,"button",6),t.NdJ("click",function(){return r.copyOrSaveQRInfo()}),t._uU(10,"Copiar "),t._UZ(11,"fa-icon",7),t.qZA(),t.TgZ(12,"button",8),t.NdJ("click",function(){return r.copyOrSaveQRInfo(!1)}),t._uU(13,"Guardar "),t._UZ(14,"fa-icon",7),t.qZA()()),2&o&&(t.xp6(4),t.Q6J("elementType",r.qrCodeElementType)("value",r.tool.toolGuid)("errorCorrectionLevel",r.qrCodeErrorCorrectionLevel),t.xp6(2),t.Oqu(t.lcZ(7,6,r.tool.toolGuid)),t.xp6(5),t.Q6J("icon",r.faImage),t.xp6(3),t.Q6J("icon",r.faSave))},dependencies:[v.BN,B.zF,Nt.$]})}function io(n,e){if(1&n&&(t.TgZ(0,"div",10)(1,"p")(2,"b"),t._uU(3),t.qZA(),t._uU(4),t.qZA()()),2&n){const o=e.$implicit;t.xp6(3),t.hij("",o.name,":"),t.xp6(1),t.hij(" ",o.measurementUnitSymbol?o.parameterValue+" | "+o.measurementUnitSymbol:o.parameterValue,"")}}function ao(n,e){1&n&&t._UZ(0,"app-image-thumbnail",17),2&n&&t.Q6J("appFile",e.$implicit)}function so(n,e){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"div",3)(2,"div",10)(3,"p")(4,"b"),t._uU(5,"Nombre:"),t.qZA(),t._uU(6),t.qZA()(),t.TgZ(7,"div",10)(8,"p")(9,"b"),t._uU(10,"Estado:"),t.qZA(),t._uU(11),t.qZA()(),t.YNc(12,io,5,2,"div",11),t.qZA(),t.TgZ(13,"div",12)(14,"h2",7),t._uU(15,"Im\xe1genes"),t.qZA(),t.TgZ(16,"div",13),t.YNc(17,ao,1,1,"app-image-thumbnail",14),t.qZA()(),t.TgZ(18,"div",15)(19,"button",16),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.setUpdatingTool(!0))}),t._uU(20,"Editar herramienta"),t.qZA()(),t.BQk()}if(2&n){const o=t.oxw(2);t.xp6(6),t.hij(" ",o.tool.toolName,""),t.xp6(5),t.hij(" ",o.tool.toolState.toolStateName,""),t.xp6(1),t.Q6J("ngForOf",o.tool.toolParameters),t.xp6(5),t.Q6J("ngForOf",o.tool.files)}}function lo(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"app-edit-tool-form",18),t.NdJ("cancelUpdateToolEvent",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.setUpdatingTool(!1))})("updatedToolEvent",function(i){t.CHM(o);const a=t.oxw(2);return t.KtG(a.onToolUpdated(i))}),t.qZA()}if(2&n){const o=t.oxw(2);t.Q6J("tool",o.tool)}}function co(n,e){if(1&n&&(t.TgZ(0,"div",1)(1,"h1",2),t._uU(2),t.qZA(),t.TgZ(3,"div",3)(4,"div",4),t._UZ(5,"app-qr-info",5),t.qZA(),t.TgZ(6,"div",6)(7,"h2",7),t._uU(8,"Informaci\xf3n general"),t.qZA(),t.YNc(9,so,21,4,"ng-container",8),t.YNc(10,lo,1,1,"app-edit-tool-form",9),t.qZA()()()),2&n){const o=t.oxw();t.xp6(2),t.Oqu(o.tool.toolName),t.xp6(3),t.Q6J("tool",o.tool),t.xp6(4),t.Q6J("ngIf",!o.updatingTool),t.xp6(1),t.Q6J("ngIf",o.updatingTool)}}class O{constructor(e,o){this.route=e,this.httpService=o,this.updatingTool=!1}ngOnInit(){this.getTool()}getTool(){const e=this.route.snapshot.paramMap.get("id");this.httpService.get(`${h.G8.toolsApi}/${e}`).subscribe(o=>this.tool=o)}setUpdatingTool(e){this.updatingTool=e}onToolUpdated(e){const o=new FormData;o.append("id",e.id.toString()),o.append("name",e.name),o.append("toolParameters",JSON.stringify(e.toolParameters)),o.append("deletedFileIds",e.deletedFileIds.length?e.deletedFileIds.toString():"[]"),e.addedFiles.map(r=>o.append("addedFiles",r)),this.httpService.put(h.G8.toolsApi,o).subscribe(r=>{this.tool=r,this.updatingTool=!1})}static#t=this.\u0275fac=function(o){return new(o||O)(t.Y36(y.gz),t.Y36(A.O))};static#e=this.\u0275cmp=t.Xpm({type:O,selectors:[["app-tool-detail"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"text-center","mt-3"],[1,"row","mt-3"],[1,"col-sm-4"],[3,"tool"],[1,"col-sm-8"],[1,"text-center"],[4,"ngIf"],[3,"tool","cancelUpdateToolEvent","updatedToolEvent",4,"ngIf"],[1,"col-sm-6"],["class","col-sm-6",4,"ngFor","ngForOf"],[1,"row-mt-3"],[1,"d-flex","gap-2"],[3,"appFile",4,"ngFor","ngForOf"],[1,"mt-3"],["type","button",1,"btn","btn-outline-primary",3,"click"],[3,"appFile"],[3,"tool","cancelUpdateToolEvent","updatedToolEvent"]],template:function(o,r){1&o&&t.YNc(0,co,11,4,"div",0),2&o&&t.Q6J("ngIf",r.tool)},dependencies:[d.sg,d.O5,jt.w,E,J]})}var k=p(9453);function mo(n,e){if(1&n&&(t.TgZ(0,"form",9)(1,"div",10)(2,"label",11),t._uU(3,"Nombre"),t.qZA(),t._UZ(4,"input",12),t.qZA()()),2&n){const o=t.oxw();t.Q6J("formGroup",o.addToolForm)}}class M{constructor(e,o,r){this.activeModal=e,this.fb=o,this.httpService=r,this.toolAddedEvent=new t.vpe}ngOnInit(){this.initForm()}initForm(){this.addToolForm=this.fb.group({toolName:["",c.kI.required]})}onSubmit(){this.httpService.post("Tools",{toolName:this.addToolForm?.controls.toolName.value}).subscribe(()=>this.activeModal.close(!0))}static#t=this.\u0275fac=function(o){return new(o||M)(t.Y36(k.Kz),t.Y36(c.qu),t.Y36(A.O))};static#e=this.\u0275cmp=t.Xpm({type:M,selectors:[["app-add-tool-modal"]],outputs:{toolAddedEvent:"toolAddedEvent"},decls:13,vars:2,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[3,"formGroup",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"btn","btn-outline-primary",3,"disabled","click"],[3,"formGroup"],[1,"mb-3"],["for","toolName",1,"form-label"],["type","text","id","toolName","formControlName","toolName",1,"form-control"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Agregar Nueva herramienta"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return r.activeModal.close(!1)}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4),t.YNc(7,mo,5,1,"form",5),t.qZA(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return r.activeModal.close(!1)}),t._uU(10,"Cancelar"),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){return r.addToolForm.valid&&r.onSubmit()}),t._uU(12,"Guardar"),t.qZA()()),2&o&&(t.xp6(7),t.Q6J("ngIf",r.addToolForm),t.xp6(4),t.Q6J("disabled",!r.addToolForm.valid))},dependencies:[d.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u]})}function uo(n,e){1&n&&(t.TgZ(0,"p"),t._uU(1,"No hay herramientas seleccionadas"),t.qZA())}function po(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"lastCharacters"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._UZ(7,"fa-icon",4),t.TgZ(8,"fa-icon",5),t.NdJ("click",function(){const a=t.CHM(o).$implicit,s=t.oxw(2);return t.KtG(s.onDeleteTool(a))}),t.qZA()()()}if(2&n){const o=e.$implicit,r=t.oxw(2);t.xp6(2),t.Oqu(t.xi3(3,4,o.toolGuid,6)),t.xp6(3),t.Oqu(o.toolName),t.xp6(2),t.Q6J("icon",r.faCircleInfo),t.xp6(1),t.Q6J("icon",r.faTrash)}}function _o(n,e){if(1&n&&(t.TgZ(0,"table",2)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Id"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Nombre"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Acciones"),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,po,9,7,"tr",3),t.qZA()()),2&n){const o=t.oxw();t.xp6(10),t.Q6J("ngForOf",o.tools)}}class Q{constructor(){this.faTrash=_.$aW,this.faCircleInfo=_.DBf,this.deleteToolEvent=new t.vpe}onDeleteTool(e){this.deleteToolEvent.emit(e)}static#t=this.\u0275fac=function(o){return new(o||Q)};static#e=this.\u0275cmp=t.Xpm({type:Q,selectors:[["app-selected-tools-list"]],inputs:{tools:"tools"},outputs:{deleteToolEvent:"deleteToolEvent"},decls:2,vars:2,consts:[[4,"ngIf"],["class","table",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["role","button",1,"me-2",3,"icon"],["role","button",1,"text-danger",3,"icon","click"]],template:function(o,r){1&o&&(t.YNc(0,uo,2,0,"p",0),t.YNc(1,_o,11,1,"table",1)),2&o&&(t.Q6J("ngIf",!r.tools||r.tools&&!r.tools.length),t.xp6(1),t.Q6J("ngIf",r.tools&&r.tools.length))},dependencies:[d.sg,d.O5,v.BN,Nt.$]})}function fo(n,e){1&n&&(t.TgZ(0,"p"),t._uU(1,"No hay herramientas disponibles"),t.qZA())}function go(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"lastCharacters"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._UZ(7,"fa-icon",4),t.TgZ(8,"fa-icon",5),t.NdJ("click",function(){const a=t.CHM(o).$implicit,s=t.oxw(2);return t.KtG(s.onSelectTool(a))}),t.qZA()()()}if(2&n){const o=e.$implicit,r=t.oxw(2);t.xp6(2),t.Oqu(t.xi3(3,4,o.toolGuid,6)),t.xp6(3),t.Oqu(o.toolName),t.xp6(2),t.Q6J("icon",r.faCircleInfo),t.xp6(1),t.Q6J("icon",r.faPlus)}}function ho(n,e){if(1&n&&(t.TgZ(0,"table",2)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Id"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Nombre"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Acciones"),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,go,9,7,"tr",3),t.qZA()()),2&n){const o=t.oxw();t.xp6(10),t.Q6J("ngForOf",o.tools)}}class L{constructor(){this.faPlus=_.r8p,this.faCircleInfo=_.DBf,this.selectToolEvent=new t.vpe}onSelectTool(e){this.selectToolEvent.emit(e)}static#t=this.\u0275fac=function(o){return new(o||L)};static#e=this.\u0275cmp=t.Xpm({type:L,selectors:[["app-available-tools-list"]],inputs:{tools:"tools"},outputs:{selectToolEvent:"selectToolEvent"},decls:2,vars:2,consts:[[4,"ngIf"],["class","table",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["role","button",1,"me-2",3,"icon"],["role","button",1,"text-primary",3,"icon","click"]],template:function(o,r){1&o&&(t.YNc(0,fo,2,0,"p",0),t.YNc(1,ho,11,1,"table",1)),2&o&&(t.Q6J("ngIf",r.tools&&!r.tools.length),t.xp6(1),t.Q6J("ngIf",r.tools&&r.tools.length))},dependencies:[d.sg,d.O5,v.BN,Nt.$]})}function To(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"div",15)(1,"div",12)(2,"label",16),t._uU(3,"Responsable"),t.qZA(),t.TgZ(4,"app-dropdown",17),t.NdJ("onSelectOptionEvent",function(i){t.CHM(o);const a=t.oxw(2);return t.KtG(a.onSelectResponsible(i))}),t.ALo(5,"toDropdownItem"),t.qZA()()()}if(2&n){const o=t.oxw(2);t.xp6(4),t.Q6J("options",t.xi3(5,1,o.employees,"user"))}}function xo(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"form",9),t.YNc(1,To,6,4,"div",10),t.TgZ(2,"div",11)(3,"div",12)(4,"h5"),t._uU(5,"Herramientas seleccionadas"),t.qZA(),t.TgZ(6,"app-selected-tools-list",13),t.NdJ("deleteToolEvent",function(i){t.CHM(o);const a=t.oxw();return t.KtG(a.onDeleteTool(i))}),t.qZA()()(),t.TgZ(7,"div",11)(8,"div",12)(9,"h5"),t._uU(10,"Listado de herramientas"),t.qZA(),t.TgZ(11,"app-available-tools-list",14),t.NdJ("selectToolEvent",function(i){t.CHM(o);const a=t.oxw();return t.KtG(a.onSelectTool(i))}),t.qZA()()()()}if(2&n){const o=t.oxw();t.Q6J("formGroup",o.registerOutputForm),t.xp6(1),t.Q6J("ngIf",o.employees),t.xp6(5),t.Q6J("tools",o.selectedTools),t.xp6(5),t.Q6J("tools",o.availableTools)}}class R{constructor(e,o,r){this.activeModal=e,this.httpService=o,this.fb=r,this.availableTools=[],this.selectedTools=[]}ngOnInit(){this.initForm(),this.getEmployees(),this.getTools()}getEmployees(){this.httpService.get("Users/employees").subscribe(e=>this.employees=e)}getTools(){this.httpService.get("Tools/available-tools").subscribe(e=>this.availableTools=e)}onSelectTool(e){this.availableTools=this.availableTools?.filter(o=>o.toolId!=e.toolId),this.selectedTools?.push(e),this.registerOutputForm.controls.tools.patchValue(this.selectedTools)}onDeleteTool(e){this.selectedTools=this.selectedTools.filter(o=>o.toolId!=e.toolId),this.availableTools.push(e),this.registerOutputForm.controls.tools.patchValue(this.selectedTools)}initForm(){this.registerOutputForm=this.fb.group({responsible:[null,c.kI.required],tools:[null,c.kI.required]})}registerOutput(){this.httpService.post(h.G8.toolOutputsApi,this.registerOutputForm?.value).subscribe(()=>this.activeModal.close(!0))}onSelectResponsible(e){this.responsible=this.employees.find(o=>o.userId==e.id),this.registerOutputForm.controls.responsible.setValue({...this.responsible})}static#t=this.\u0275fac=function(o){return new(o||R)(t.Y36(k.Kz),t.Y36(A.O),t.Y36(c.qu))};static#e=this.\u0275cmp=t.Xpm({type:R,selectors:[["app-add-tools-output-modal"]],decls:13,vars:2,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[3,"formGroup",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[1,"btn","btn-outline-primary","ms-2",3,"disabled","click"],[3,"formGroup"],["class","row",4,"ngIf"],[1,"row","mt-3"],[1,"col"],[3,"tools","deleteToolEvent"],[3,"tools","selectToolEvent"],[1,"row"],["for","responsible",1,"form-label"],[1,"d-block",3,"options","onSelectOptionEvent"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Registrar nueva salida"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return r.activeModal.close()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4),t.YNc(7,xo,12,4,"form",5),t.qZA(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return r.activeModal.close()}),t._uU(10,"Cerrar"),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){return r.registerOutput()}),t._uU(12,"Guardar"),t.qZA()()),2&o&&(t.xp6(7),t.Q6J("ngIf",r.registerOutputForm),t.xp6(4),t.Q6J("disabled",!r.registerOutputForm.valid))},dependencies:[d.O5,c._Y,c.JL,c.sg,Jt.J,Q,L,Ot.s]})}function vo(n,e){1&n&&(t.TgZ(0,"p",5),t._uU(1,"No se han registrado usuarios a\xfan."),t.qZA())}const bo=function(n){return[n]};function yo(n,e){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"a",8),t._UZ(7,"fa-icon",9),t.qZA()()()),2&n){const o=e.$implicit,r=t.oxw(3);t.xp6(2),t.hij(" ",o.toolName," "),t.xp6(2),t.hij(" ",o.toolState.toolStateName," "),t.xp6(2),t.Q6J("routerLink",t.VKq(4,bo,o.toolId)),t.xp6(1),t.Q6J("icon",r.faCircleInfo)}}function Ao(n,e){if(1&n&&(t.TgZ(0,"table",6)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Nombre"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Estado"),t.qZA(),t._UZ(7,"th"),t.qZA()(),t.TgZ(8,"tbody"),t.YNc(9,yo,8,6,"tr",7),t.qZA()()),2&n){const o=t.oxw(2);t.xp6(9),t.Q6J("ngForOf",o.tools)}}function Zo(n,e){if(1&n&&(t.TgZ(0,"div",1)(1,"div",2),t.YNc(2,vo,2,0,"p",3),t.YNc(3,Ao,10,1,"table",4),t.qZA()()),2&n){const o=t.oxw();t.xp6(2),t.Q6J("ngIf",!o.tools.length),t.xp6(1),t.Q6J("ngIf",o.tools.length)}}class G{constructor(){this.faPen=_.IwR,this.faTrash=_.$aW,this.faCircleInfo=_.DBf}static#t=this.\u0275fac=function(o){return new(o||G)};static#e=this.\u0275cmp=t.Xpm({type:G,selectors:[["app-tools-list"]],inputs:{tools:"tools"},decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col"],["class","text-center",4,"ngIf"],["class","table",4,"ngIf"],[1,"text-center"],[1,"table"],[4,"ngFor","ngForOf"],[3,"routerLink"],["role","button",1,"me-2","text-primary",3,"icon"]],template:function(o,r){1&o&&t.YNc(0,Zo,4,2,"div",0),2&o&&t.Q6J("ngIf",r.tools)},dependencies:[d.sg,d.O5,y.rH,v.BN]})}class Y{transform(e,...o){return 1==e.toolOutputStateId?"Abierto":"Cerrado"}static#t=this.\u0275fac=function(o){return new(o||Y)};static#e=this.\u0275pipe=t.Yjl({name:"outputToolState",type:Y,pure:!0})}function wo(n,e){1&n&&(t.TgZ(0,"p"),t._uU(1,"No hay salidas de herramienta registradas. "),t.qZA())}function Co(n,e){if(1&n&&(t.TgZ(0,"tr")(1,"td")(2,"a",6),t._uU(3),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"outputToolState"),t.qZA()()),2&n){const o=e.$implicit,r=t.oxw(2);t.xp6(2),t.Q6J("routerLink","/"+r.routeConstants.toolOutput+"/"+o.toolOutputId),t.xp6(1),t.hij(" ",o.toolOutputId," "),t.xp6(2),t.Oqu(t.xi3(6,5,o.outputDateTime,"dd/MM/YYYY")),t.xp6(3),t.Oqu(o.responsible.name),t.xp6(2),t.hij(" ",t.lcZ(11,8,o.toolOutputState)," ")}}function Fo(n,e){if(1&n&&(t.TgZ(0,"table",4)(1,"thead")(2,"tr")(3,"th"),t._uU(4," Id "),t.qZA(),t.TgZ(5,"th"),t._uU(6," Fecha de salida "),t.qZA(),t.TgZ(7,"th"),t._uU(8," Responsable "),t.qZA(),t.TgZ(9,"th"),t._uU(10," Estado "),t.qZA()()(),t.TgZ(11,"tbody"),t.YNc(12,Co,12,10,"tr",5),t.qZA()()),2&n){const o=t.oxw();t.xp6(12),t.Q6J("ngForOf",o.toolOutputs)}}class ${constructor(){this.routeConstants=h.p7}static#t=this.\u0275fac=function(o){return new(o||$)};static#e=this.\u0275cmp=t.Xpm({type:$,selectors:[["app-tool-outputs-list"]],inputs:{toolOutputs:"toolOutputs"},decls:5,vars:2,consts:[[1,"row","mt-3"],[1,"col"],[4,"ngIf","ngIfElse"],["noToolsOutput",""],[1,"table","mt-4"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(o,r){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,wo,2,0,"p",2),t.YNc(3,Fo,13,1,"ng-template",null,3,t.W1O),t.qZA()()),2&o){const i=t.MAs(4);t.xp6(2),t.Q6J("ngIf",!r.toolOutputs||!r.toolOutputs.length)("ngIfElse",i)}},dependencies:[d.sg,d.O5,y.rH,d.uU,Y]})}class D{constructor(e,o){this.modalService=e,this.httpService=o,this.routeConstants=h.p7}ngOnInit(){this.getToolsList(),this.getToolOutputs()}onOpenAddToolModal(){this.modalRef=this.modalService.open(M),this.modalRef.closed.subscribe(e=>{e&&this.getToolsList()})}getToolsList(){this.httpService.get("Tools").subscribe(e=>this.tools=e)}getToolOutputs(){this.httpService.get(h.G8.toolOutputsApi).subscribe(e=>this.toolOutputs=e)}openAddToolOutputModal(){this.modalRef=this.modalService.open(R,{size:"lg",scrollable:!0}),this.modalRef.closed.subscribe(()=>this.getToolOutputs())}static#t=this.\u0275fac=function(o){return new(o||D)(t.Y36(k.FF),t.Y36(A.O))};static#e=this.\u0275cmp=t.Xpm({type:D,selectors:[["app-tools-management"]],decls:17,vars:3,consts:[[1,"container"],[1,"text-center","mt-3"],[3,"tools"],[1,"text-center"],[1,"btn","btn-outline-primary",3,"routerLink"],[1,"mt-5"],[3,"toolOutputs"],[1,"btn","btn-outline-primary",3,"click"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Administraci\xf3n de equipos y herramienta"),t.qZA(),t.TgZ(3,"section")(4,"h2",1),t._uU(5,"Inventario"),t.qZA(),t._UZ(6,"app-tools-list",2),t.TgZ(7,"div",3)(8,"a",4),t._uU(9,"Agregar nuevo elemento"),t.qZA()()(),t.TgZ(10,"section",5)(11,"h2",3),t._uU(12,"Salidas de herramienta"),t.qZA(),t._UZ(13,"app-tool-outputs-list",6),t.TgZ(14,"div",3)(15,"button",7),t.NdJ("click",function(){return r.openAddToolOutputModal()}),t._uU(16,"Agregar nueva elemento"),t.qZA()()()()),2&o&&(t.xp6(6),t.Q6J("tools",r.tools),t.xp6(2),t.Q6J("routerLink",r.routeConstants.addToolPath),t.xp6(5),t.Q6J("toolOutputs",r.toolOutputs))},dependencies:[y.rH,G,$]})}class H{transform(e){return e.measurementUnitSymbol?`${e.parameterValue} | ${e.measurementUnitSymbol}`:`${e.parameterValue}`}static#t=this.\u0275fac=function(o){return new(o||H)};static#e=this.\u0275pipe=t.Yjl({name:"parameterValue",type:H,pure:!0})}function Po(n,e){if(1&n&&(t.TgZ(0,"div",4)(1,"label",14),t._uU(2),t.qZA(),t._UZ(3,"input",15),t.ALo(4,"parameterValue"),t.qZA()),2&n){const o=e.$implicit;t.xp6(2),t.Oqu(o.name),t.xp6(1),t.Q6J("value",t.lcZ(4,2,o))}}function Eo(n,e){if(1&n&&(t.ynx(0,12),t.YNc(1,Po,5,4,"div",13),t.BQk()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.tool.toolParameters)}}function Io(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"div",1)(1,"button",16),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.initAdditionalInformation())}),t._uU(2," Agregar informaci\xf3n adicional "),t.qZA(),t.TgZ(3,"button",17),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.addNewTool())}),t._uU(4,"Guardar"),t.qZA()()}if(2&n){const o=t.oxw();t.xp6(3),t.Q6J("disabled",!o.addNewToolForm.valid)}}function So(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"div",12)(1,"app-add-parameter",18),t.NdJ("newParameterAddedEvent",function(i){t.CHM(o);const a=t.oxw();return t.KtG(a.addToolParameter(i))})("cancelAddParameterEvent",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.setIsAddingAdditionalInfo(!1))}),t.qZA()()}if(2&n){const o=t.oxw();t.xp6(1),t.Q6J("existingParameters",o.toolParameters)("parametersToFilter",null==o.tool?null:o.tool.toolParameters)}}function No(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"ngx-dropzone-image-preview",21),t.NdJ("removed",function(){const a=t.CHM(o).$implicit,s=t.oxw(2);return t.KtG(s.onRemoveFile(a))}),t.qZA()}2&n&&t.Q6J("file",e.$implicit)("removable",!0)}function Uo(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"ngx-dropzone",19),t.NdJ("change",function(i){t.CHM(o);const a=t.oxw();return t.KtG(a.onSelectFile(i))}),t.TgZ(1,"ngx-dropzone-label"),t._uU(2,"Haga click o arrastre hasta aqu\xed para a\xf1adir archivos"),t.qZA(),t.YNc(3,No,1,2,"ngx-dropzone-image-preview",20),t.qZA()}if(2&n){const o=t.oxw();t.Q6J("accept","image/*"),t.xp6(3),t.Q6J("ngForOf",o.addNewToolForm.controls.files.value)}}class V{constructor(e,o,r,i){this.fb=e,this.httpService=o,this.router=r,this.modalService=i,this.isAddingAdditionalInfo=!1,this.isAddingExistingParameter=!1,this.isAddingNewParameter=!1}ngOnInit(){this.initForm(),this.getToolParameters()}getToolParameters(){this.httpService.get(h.G8.toolParametersApi).subscribe(e=>this.toolParameters=e)}initForm(){this.addNewToolForm=this.fb.group({toolName:[null,c.kI.required],files:[new Array]})}onAddParameter(e){this.addToolParameter(e),this.setIsAddingAdditionalInfo(!1)}addToolParameter(e){const o={id:e.id||void 0,name:e.name,measurementUnitId:e.measurementUnitId,measurementUnitSymbol:e.measurementUnitSymbol,parameterValue:e.parameterValue};this.tool&&this.tool.toolParameters?this.tool.toolParameters.push(o):this.tool={...this.tool,toolParameters:[o]},this.setIsAddingAdditionalInfo(!1)}addNewTool(){if(!this.addNewToolForm.valid)return;const e=this.addNewToolForm.controls.files.value,o=new FormData;o.append("name",this.addNewToolForm.controls.toolName.value),o.append("toolParameters",JSON.stringify(this.tool.toolParameters)),e.map(r=>o.append("files",r)),this.httpService.post(h.G8.toolsApi,o).subscribe(()=>this.router.navigateByUrl(`/${h.p7.toolsPath}`))}initAdditionalInformation(){this.setIsAddingAdditionalInfo(!0),this.setIsAddingExistingParameter(!1),this.setIsAddingNewParameter(!1)}setIsAddingAdditionalInfo(e){this.isAddingAdditionalInfo=e}setIsAddingExistingParameter(e){this.isAddingExistingParameter=e}setIsAddingNewParameter(e){this.isAddingNewParameter=e}setExistingParameter(e){this.tempParameter=this.toolParameters.find(o=>o.id==e.id),this.setIsAddingExistingParameter(!0)}onSelectFile(e){const o=this.addNewToolForm.controls.files.value;o.push(...e.addedFiles),this.addNewToolForm.patchValue({files:o})}onRemoveFile(e){if(!this.addNewToolForm.controls.files.value)return;const r=this.addNewToolForm.controls.files.value.filter(i=>i.name!=e.name);this.addNewToolForm.patchValue({files:r})}static#t=this.\u0275fac=function(o){return new(o||V)(t.Y36(c.qu),t.Y36(A.O),t.Y36(y.F0),t.Y36(k.FF))};static#e=this.\u0275cmp=t.Xpm({type:V,selectors:[["app-add-new-tool"]],decls:17,vars:5,consts:[[1,"container"],[1,"text-center","mt-3"],[3,"formGroup"],[1,"row","justify-content-center"],[1,"col-lg-3","col-md-4","col-sm-6"],["for","toolName",1,"form-label"],["type","text","id","toolName","formControlName","toolName",1,"form-control"],["class","row mt-3",4,"ngIf"],["class","text-center mt-3",4,"ngIf","ngIfElse"],["addingAdditionalInfo",""],[1,"row"],[3,"accept","change",4,"ngIf"],[1,"row","mt-3"],["class","col-lg-3 col-md-4 col-sm-6",4,"ngFor","ngForOf"],[1,"form-label"],["type","text","disabled","",1,"form-control",3,"value"],[1,"btn","btn-outline-primary","ms-2",3,"click"],[1,"btn","btn-outline-primary","ms-2",3,"disabled","click"],[3,"existingParameters","parametersToFilter","newParameterAddedEvent","cancelAddParameterEvent"],[3,"accept","change"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngFor","ngForOf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed"]],template:function(o,r){if(1&o&&(t.TgZ(0,"section",0)(1,"h1",1),t._uU(2,"Agregar nuevo equipo o herramienta"),t.qZA(),t.TgZ(3,"form",2)(4,"div",3)(5,"div",4)(6,"label",5),t._uU(7,"Nombre"),t.qZA(),t._UZ(8,"input",6),t.qZA(),t.YNc(9,Eo,2,1,"ng-container",7),t.qZA(),t.YNc(10,Io,5,1,"div",8),t.YNc(11,So,2,2,"ng-template",null,9,t.W1O),t.TgZ(13,"div",10)(14,"h2",1),t._uU(15,"A\xf1adir im\xe1genes"),t.qZA(),t.YNc(16,Uo,4,2,"ngx-dropzone",11),t.qZA()()()),2&o){const i=t.MAs(12);t.xp6(3),t.Q6J("formGroup",r.addNewToolForm),t.xp6(6),t.Q6J("ngIf",r.tool&&r.tool.toolParameters&&r.tool.toolParameters.length),t.xp6(1),t.Q6J("ngIf",!r.isAddingAdditionalInfo)("ngIfElse",i),t.xp6(6),t.Q6J("ngIf",r.addNewToolForm)}},dependencies:[d.sg,d.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,Z._f,Z.NP,Z.sv,w,H]})}const qo=[{path:"",component:D},{path:"add-tool",component:V},{path:":id",component:O}];class z{static#t=this.\u0275fac=function(o){return new(o||z)};static#e=this.\u0275mod=t.oAB({type:z});static#o=this.\u0275inj=t.cJS({imports:[y.Bz.forChild(qo),y.Bz]})}var Jo=p(6619);class K{static#t=this.\u0275fac=function(o){return new(o||K)};static#e=this.\u0275mod=t.oAB({type:K});static#o=this.\u0275inj=t.cJS({imports:[d.ez,z,Jo.m]})}}}]);