"use strict";(self.webpackChunkToolsManagerClientApp=self.webpackChunkToolsManagerClientApp||[]).push([[637],{637:(F,m,i)=>{i.r(m),i.d(m,{ProfileModule:()=>p});var a=i(6895),_=i(2687),v=i(5698),f=i(2771),e=i(1571),g=i(3143),h=i(6858),Z=i(3741);function U(o,n){if(1&o&&(e.TgZ(0,"div",1)(1,"div",2)(2,"p")(3,"b"),e._uU(4,"Nombre: "),e.qZA(),e._uU(5),e.qZA()(),e.TgZ(6,"div",2)(7,"p")(8,"b"),e._uU(9,"Email: "),e.qZA(),e._uU(10),e.qZA()(),e.TgZ(11,"div",2)(12,"p")(13,"b"),e._uU(14,"Identificaci\xf3n: "),e.qZA(),e._uU(15),e.qZA()(),e.TgZ(16,"div",2)(17,"p")(18,"b"),e._uU(19,"Direcci\xf3n: "),e.qZA(),e._uU(20),e.qZA()(),e.TgZ(21,"div",2)(22,"p")(23,"b"),e._uU(24,"Tel\xe9fono: "),e.qZA(),e._uU(25),e.qZA()(),e.TgZ(26,"div",2)(27,"p")(28,"b"),e._uU(29,"Empresa: "),e.qZA(),e._uU(30),e.qZA()()()),2&o){const t=e.oxw();e.xp6(5),e.Oqu(t.user.name),e.xp6(5),e.Oqu(t.user.email),e.xp6(5),e.Oqu(t.user.idCard),e.xp6(5),e.Oqu(t.user.address||"-"),e.xp6(5),e.Oqu(t.user.phone||"-"),e.xp6(5),e.Oqu(t.user.company.companyName)}}class u{static#e=this.\u0275fac=function(t){return new(t||u)};static#t=this.\u0275cmp=e.Xpm({type:u,selectors:[["app-user-info"]],inputs:{user:"user"},decls:1,vars:1,consts:[["class","row mt-3 g-2",4,"ngIf"],[1,"row","mt-3","g-2"],[1,"col-lg-4","col-sm-6"]],template:function(t,r){1&t&&e.YNc(0,U,31,6,"div",0),2&t&&e.Q6J("ngIf",r.user)},dependencies:[a.O5]})}var s=i(433);function E(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("ngSubmit",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.onSubmit())}),e.TgZ(1,"div",2)(2,"div",3)(3,"label",4),e._uU(4,"Nombre"),e.qZA(),e._UZ(5,"input",5),e.qZA(),e.TgZ(6,"div",3)(7,"label",6),e._uU(8,"No. de identificaci\xf3n"),e.qZA(),e._UZ(9,"input",7),e.qZA(),e.TgZ(10,"div",3)(11,"label",8),e._uU(12,"Email"),e.qZA(),e._UZ(13,"input",9),e.qZA(),e.TgZ(14,"div",3)(15,"label",10),e._uU(16,"Direcci\xf3n"),e.qZA(),e._UZ(17,"input",11),e.qZA(),e.TgZ(18,"div",3)(19,"label",12),e._uU(20,"Tel\xe9fono"),e.qZA(),e._UZ(21,"input",13),e.qZA()(),e.TgZ(22,"div",14)(23,"button",15),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.cancelEditEvent.emit())}),e._uU(24,"Cancelar"),e.qZA(),e.TgZ(25,"button",16),e._uU(26,"Guardar"),e.qZA()()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.userForm),e.xp6(25),e.Q6J("disabled",!t.userForm.dirty&&t.userForm.valid)}}class l{constructor(n,t){this.fb=n,this.httpService=t,this.cancelEditEvent=new e.vpe,this.updatedUserEvent=new e.vpe}ngOnInit(){this.initForm()}initForm(){this.userForm=this.fb.group({address:[this.user.address],email:[this.user.email,s.kI.required],idCard:[this.user.idCard,s.kI.required],name:[this.user.name,s.kI.required],phone:[this.user.phone]})}onSubmit(){this.userForm.valid&&this.httpService.put(f.G8.userApi,{address:this.userForm.controls.address.value,company:this.user.company,email:this.userForm.controls.email.value,idCard:this.userForm.controls.idCard.value,name:this.userForm.controls.name.value,phone:this.userForm.controls.phone.value,userId:this.user.userId}).subscribe(()=>this.updatedUserEvent.emit())}static#e=this.\u0275fac=function(t){return new(t||l)(e.Y36(s.qu),e.Y36(h.O))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-edit-user-info"]],inputs:{user:"user"},outputs:{cancelEditEvent:"cancelEditEvent",updatedUserEvent:"updatedUserEvent"},decls:1,vars:1,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row","g-2"],[1,"col-lg-4","col-sm-6"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],["for","idCard",1,"form-label"],["type","number","id","idCard","formControlName","idCard",1,"form-control"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control"],["for","address",1,"form-label"],["type","text","id","address","formControlName","address",1,"form-control"],["for","phone",1,"form-label"],["type","text","id","phone","formControlName","phone",1,"form-control"],[1,"action-buttons","d-flex","justify-content-center","mt-3"],["type","button",1,"btn","btn-outline-danger","me-2",3,"click"],["type","submit",1,"btn","btn-outline-primary",3,"disabled"]],template:function(t,r){1&t&&e.YNc(0,E,27,2,"form",0),2&t&&e.Q6J("ngIf",r.userForm)},dependencies:[a.O5,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u]})}function x(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-edit-model",5),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.setEditingProfile(!0))}),e.qZA()}}function C(o,n){if(1&o&&e._UZ(0,"app-user-info",6),2&o){const t=e.oxw();e.Q6J("user",t.user)}}function b(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-edit-user-info",7),e.NdJ("cancelEditEvent",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.setEditingProfile(!1))})("updatedUserEvent",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.onUpdateUser())}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("user",t.user)}}class d{constructor(n,t){this.accountService=n,this.httpService=t,this.faEdit=_.Xcf,this.editingProfile=!1,this.accountService.currentAccount$.pipe((0,v.q)(1)).subscribe(r=>this.account=r)}ngOnInit(){this.getUser()}getUser(){this.httpService.get(`${f.G8.userApi}/${this.account.userId}`).subscribe(n=>this.user=n)}setEditingProfile(n){this.editingProfile=n}onUpdateUser(){this.setEditingProfile(!1),this.getUser()}static#e=this.\u0275fac=function(t){return new(t||d)(e.Y36(g.B),e.Y36(h.O))};static#t=this.\u0275cmp=e.Xpm({type:d,selectors:[["app-profile"]],decls:8,vars:3,consts:[[1,"container","mt-3"],[1,"d-flex","justify-content-center","align-items-center"],["class","d-inline-flex",3,"click",4,"ngIf"],[3,"user",4,"ngIf","ngIfElse"],["editingUserProfile",""],[1,"d-inline-flex",3,"click"],[3,"user"],[3,"user","cancelEditEvent","updatedUserEvent"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"h1",1)(2,"span"),e._uU(3,"Perfil"),e.qZA(),e.YNc(4,x,1,0,"app-edit-model",2),e.qZA(),e.YNc(5,C,1,1,"app-user-info",3),e.YNc(6,b,1,1,"ng-template",null,4,e.W1O),e.qZA()),2&t){const c=e.MAs(7);e.xp6(4),e.Q6J("ngIf",!r.editingProfile),e.xp6(1),e.Q6J("ngIf",!r.editingProfile)("ngIfElse",c)}},dependencies:[a.O5,Z.D,u,l]})}var A=i(8869),T=i(6619);const q=[{path:"",component:d}];class p{static#e=this.\u0275fac=function(t){return new(t||p)};static#t=this.\u0275mod=e.oAB({type:p});static#n=this.\u0275inj=e.cJS({imports:[a.ez,A.Bz.forChild(q),T.m]})}}}]);