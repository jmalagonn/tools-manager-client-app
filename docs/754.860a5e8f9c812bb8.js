"use strict";(self.webpackChunkToolsManagerClientApp=self.webpackChunkToolsManagerClientApp||[]).push([[754],{7323:(h,p,n)=>{n.d(p,{G:()=>s});class s{static#t=this.addUserApi="Users/addUser";static#e=this.branchesApi="Branches";static#r=this.customersApi="Customers";static#n=this.equipmentApi="Equipment";static#o=this.equipmentParametersApi="Equipment/parameters";static#i=this.measurementUnitsApi="MeasurementUnits";static#s=this.userApi="Users";static#a=this.userEmployeeApi="Users/employee";static#l=this.userEmployeesApi="Users/employees";static#c=this.userRolesApi="UserRole";static#p=this.workItemActivityLogApi="WorkItem/workItemActivityLog";static#d=this.workItemApi="WorkItem";static#u=this.workOrderApi="WorkOrder";static#h=this.workOrderTypesApi=`${this.workOrderApi}/workOrderTypes`;static#m=this.toolsApi="Tools";static#f=this.toolParametersApi="Tools/parameters";static#_=this.toolOutputsApi="ToolOutputs";static#C=this.workStateApi="WorkState"}},6858:(h,p,n)=>{n.d(p,{O:()=>a});var s=n(529),d=n(2340),m=n(1571);class a{constructor(t){this.httpClient=t,this.api_url=d.N.apiUrl}get(t){return this.httpClient.get(this.api_url+t)}post(t,u){return new s.WM({"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET,HEAD,OPTIONS,POST,PUT","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept, Authorization"}),this.httpClient.post(this.api_url+t,u)}put(t,u){return this.httpClient.put(this.api_url+t,u)}postFormData(t,u){const f=new s.WM({"Content-Type":"multipart/form-data"});return this.httpClient.post(this.api_url+t,u,{headers:f})}static#t=this.\u0275fac=function(u){return new(u||a)(m.LFG(s.eN))};static#e=this.\u0275prov=m.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}},1066:(h,p,n)=>{n.d(p,{$:()=>d});var s=n(1571);class d{transform(a){if(!a)return"";switch(a.id){case 1:return"Abierta";case 2:return"En proceso";case 3:return"Cerrada";default:return""}}static#t=this.\u0275fac=function(T){return new(T||d)};static#e=this.\u0275pipe=s.Yjl({name:"workState",type:d,pure:!0})}},7754:(h,p,n)=>{n.r(p),n.d(p,{WorkOrderstModule:()=>w});var s=n(6895),d=n(6619),m=n(9127),a=n(8869),T=n(7323),t=n(1571),u=n(6858),f=n(2771),y=n(2687),F=n(2216),Z=n(433);class _{constructor(r){this.el=r,this.leftClass="left"}ngOnInit(){this.el.nativeElement.getBoundingClientRect().x<0&&this.el.nativeElement.classList.add(this.leftClass)}static#t=this.\u0275fac=function(e){return new(e||_)(t.Y36(t.SBq))};static#e=this.\u0275dir=t.lG2({type:_,selectors:[["","leftPositionElement",""]]})}function M(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"input",5),t.NdJ("ngModelChange",function(c){t.CHM(e);const l=t.oxw();return t.KtG(l.inputText=c)}),t.qZA(),t.TgZ(3,"fa-icon",6),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.onClickApply())}),t.qZA(),t.TgZ(4,"fa-icon",7),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.onClickCancel())}),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngModel",e.inputText),t.xp6(1),t.Q6J("icon",e.faCheck),t.xp6(1),t.Q6J("icon",e.faX)}}class C{constructor(){this.faFilter=y.G_j,this.faCheck=y.fV7,this.faX=y.WA2,this.showContent=!1,this.applyFilterEvent=new t.vpe}onClickApply(){this.applyFilterEvent.emit(this.inputText),this.showContent=!1}onClickCancel(){this.inputText="",this.showContent=!1,this.applyFilterEvent.emit(this.inputText)}toggleFilterColumn(r){this.showContent=!this.showContent}static#t=this.\u0275fac=function(e){return new(e||C)};static#e=this.\u0275cmp=t.Xpm({type:C,selectors:[["app-column-filter"]],outputs:{applyFilterEvent:"applyFilterEvent"},decls:3,vars:2,consts:[[1,"container-box"],["role","button",3,"icon","click"],["class","content","leftPositionElement","",4,"ngIf"],["leftPositionElement","",1,"content"],[1,"form-area","d-flex","align-items-center"],["type","text","placeholder","Buscar",1,"form-control",3,"ngModel","ngModelChange"],["role","button",1,"text-success",3,"icon","click"],["role","button",1,"text-danger",3,"icon","click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"fa-icon",1),t.NdJ("click",function(l){return o.toggleFilterColumn(l)}),t.qZA(),t.YNc(2,M,5,3,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("icon",o.faFilter),t.xp6(1),t.Q6J("ngIf",o.showContent))},dependencies:[s.O5,F.BN,Z.Fj,Z.JJ,Z.On,_],styles:[".container-box[_ngcontent-%COMP%]{position:relative}.container-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:absolute;background:white;right:0;width:13rem;border-radius:.375rem;padding:.5rem;box-shadow:0 2px 5px #727272}.container-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .form-area[_ngcontent-%COMP%]{gap:.3rem}.container-box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .form-area[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{font-size:1.25rem}.container-box[_ngcontent-%COMP%]   .content.left[_ngcontent-%COMP%]{right:auto;left:0}"]})}var E=n(1066);class g{transform(r){return r.sort((e,o)=>e.internalCode&&o.internalCode?e.internalCode<=o.internalCode?1:-1:e.workOrderId<=o.workOrderId?1:-1)}static#t=this.\u0275fac=function(e){return new(e||g)};static#e=this.\u0275pipe=t.Yjl({name:"sortWorkOrders",type:g,pure:!0})}function b(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr",5),t.NdJ("click",function(){const l=t.CHM(e).$implicit,W=t.oxw(2);return t.KtG(W.navigateToWorkOrder(l))}),t.TgZ(1,"td")(2,"p"),t._uU(3),t.qZA()(),t.TgZ(4,"td")(5,"p"),t._uU(6),t.ALo(7,"workState"),t.qZA()(),t.TgZ(8,"td")(9,"p"),t._uU(10),t.qZA()(),t.TgZ(11,"td")(12,"p"),t._uU(13),t.qZA()(),t.TgZ(14,"td")(15,"p"),t._uU(16),t.qZA()()()}if(2&i){const e=r.$implicit;t.xp6(3),t.Oqu(e.internalCode?e.internalCode:e.workOrderId),t.xp6(3),t.Oqu(t.lcZ(7,5,e.workState)),t.xp6(4),t.Oqu(e.customerName),t.xp6(3),t.Oqu(e.branchName),t.xp6(3),t.Oqu(e.assignedUserName)}}function P(i,r){if(1&i&&(t.TgZ(0,"tbody"),t.YNc(1,b,17,7,"tr",4),t.ALo(2,"sortWorkOrders"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.filteredWorkOrders))}}class O{constructor(r){this.router=r,this.columns=k,this.filteredCodes="",this.filteredCustomer="",this.filteredBranch="",this.filteredUser=""}ngOnChanges(){this.workOrders&&this.initWorkOrders()}navigateToWorkOrder(r){this.router.navigateByUrl(`/${f.p7.workOrderPath}/${r.workOrderId}`)}onApplyFilter(r,e){if(this.workOrders){switch(e){case this.columns.code:this.filteredCodes=r.toLocaleLowerCase();break;case this.columns.customer:this.filteredCustomer=r.toLocaleLowerCase();break;case this.columns.branch:this.filteredBranch=r.toLocaleLowerCase();break;case this.columns.user:this.filteredUser=r.toLocaleLowerCase()}this.filterWorkOrders()}}initWorkOrders(){this.filteredWorkOrders=this.workOrders}filterWorkOrders(){!this.workOrders||(this.filteredWorkOrders=this.workOrders.filter(r=>{let e=!1;return e=!this.filteredCodes.length||(r.internalCode?r.internalCode.toString().includes(this.filteredCodes):r.workOrderId.toString().includes(this.filteredCodes)),!e||(e=!this.filteredCustomer.length||r.customerName.toLocaleLowerCase().includes(this.filteredCustomer),!e)||(e=!this.filteredBranch.length||r.branchName.toLocaleLowerCase().includes(this.filteredBranch),!e)||(e=!this.filteredUser.length||r.assignedUserName.toLocaleLowerCase().includes(this.filteredUser)),e}))}static#t=this.\u0275fac=function(e){return new(e||O)(t.Y36(a.F0))};static#e=this.\u0275cmp=t.Xpm({type:O,selectors:[["work-orders-table"]],inputs:{workOrders:"workOrders"},features:[t.TTD],decls:28,vars:1,consts:[[1,"table","table-hover"],[1,"d-flex","justify-content-between","gap-2"],[3,"applyFilterEvent"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th")(4,"div",1)(5,"p"),t._uU(6,"C\xf3digo"),t.qZA(),t.TgZ(7,"app-column-filter",2),t.NdJ("applyFilterEvent",function(l){return o.onApplyFilter(l,o.columns.code)}),t.qZA()()(),t.TgZ(8,"th")(9,"div",1)(10,"p"),t._uU(11,"Estado"),t.qZA()()(),t.TgZ(12,"th")(13,"div",1)(14,"p"),t._uU(15,"Cliente"),t.qZA(),t.TgZ(16,"app-column-filter",2),t.NdJ("applyFilterEvent",function(l){return o.onApplyFilter(l,o.columns.customer)}),t.qZA()()(),t.TgZ(17,"th")(18,"div",1)(19,"p"),t._uU(20,"Sucursal"),t.qZA(),t.TgZ(21,"app-column-filter",2),t.NdJ("applyFilterEvent",function(l){return o.onApplyFilter(l,o.columns.branch)}),t.qZA()()(),t.TgZ(22,"th")(23,"div",1)(24,"p"),t._uU(25,"Asignado a"),t.qZA(),t.TgZ(26,"app-column-filter",2),t.NdJ("applyFilterEvent",function(l){return o.onApplyFilter(l,o.columns.user)}),t.qZA()()()()(),t.YNc(27,P,3,3,"tbody",3),t.qZA()),2&e&&(t.xp6(27),t.Q6J("ngIf",o.filteredWorkOrders&&o.filteredWorkOrders.length))},dependencies:[s.sg,s.O5,C,E.$,g],styles:["[_nghost-%COMP%]{display:block;width:100%;overflow:auto}.table[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer}"]})}var k=(()=>{return(i=k||(k={}))[i.code=0]="code",i[i.state=1]="state",i[i.customer=2]="customer",i[i.branch=3]="branch",i[i.user=4]="user",k;var i})();class A{constructor(r){this.httpService=r}ngOnInit(){this.getWorkOrders()}getWorkOrders(){this.httpService.get(`${T.G.workOrderApi}`).subscribe(r=>this.workOrders=r)}static#t=this.\u0275fac=function(e){return new(e||A)(t.Y36(u.O))};static#e=this.\u0275cmp=t.Xpm({type:A,selectors:[["app-work-orders"]],decls:10,vars:1,consts:[[1,"container"],[1,"text-center","mt-3"],["disabled","",1,"btn","btn-outline-primary"],[1,"row","mt-3"],[1,"col-12"],[3,"workOrders"],[1,"d-flex","justify-content-center","align-items-center"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"\xd3RDENES DE TRABAJO"),t.qZA(),t.TgZ(3,"div",1)(4,"button",2),t._uU(5,"A\xf1adir nueva \xf3rden de trabajo"),t.qZA()(),t.TgZ(6,"div",3)(7,"div",4),t._UZ(8,"work-orders-table",5),t.qZA()()(),t._UZ(9,"div",6)),2&e&&(t.xp6(8),t.Q6J("workOrders",o.workOrders))},dependencies:[O]})}const U=[{path:"",component:A}];class v{static#t=this.\u0275fac=function(e){return new(e||v)};static#e=this.\u0275mod=t.oAB({type:v});static#r=this.\u0275inj=t.cJS({imports:[a.Bz.forChild(U),a.Bz]})}class w{static#t=this.\u0275fac=function(e){return new(e||w)};static#e=this.\u0275mod=t.oAB({type:w});static#r=this.\u0275inj=t.cJS({imports:[s.ez,v,d.m,m.I]})}},2340:(h,p,n)=>{n.d(p,{N:()=>s});const s={production:!0,apiUrl:"https://management.gmcrefrigeracion.com/api/",filesUrl:""}}}]);