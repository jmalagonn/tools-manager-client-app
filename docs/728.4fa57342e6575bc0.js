"use strict";(self.webpackChunkToolsManagerClientApp=self.webpackChunkToolsManagerClientApp||[]).push([[728],{8728:(B,N,a)=>{a.r(N),a.d(N,{CustomersModule:()=>A});var c=a(6895),m=a(2590),s=a(433),t=a(1571),d=a(18),u=a(5307);function k(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"form",8),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.addEquipmentForm.valid&&r.onSubmit())}),t.TgZ(1,"div",9)(2,"label",10),t._uU(3,"Nombre"),t.qZA(),t._UZ(4,"input",11),t.qZA(),t.TgZ(5,"button",12),t._uU(6,"Guardar"),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("formGroup",e.addEquipmentForm),t.xp6(5),t.Q6J("disabled",!e.addEquipmentForm.valid)}}class _{constructor(o,e,n){this.bsModalRef=o,this.fb=e,this.httpService=n}ngOnInit(){this.initForm()}initForm(){this.addEquipmentForm=this.fb.group({equipmentName:["",s.kI.required]})}onSubmit(){this.httpService.post("Equipment",{equipmentName:this.addEquipmentForm.controls.equipmentName.value,branchId:this.branchId}).subscribe(e=>{this.bsModalRef.hide(),this.bsModalRef.onHide.emit(e)})}static#t=this.\u0275fac=function(e){return new(e||_)(t.Y36(d.UZ),t.Y36(s.qu),t.Y36(u.O))};static#e=this.\u0275cmp=t.Xpm({type:_,selectors:[["app-add-equipment-modal"]],decls:11,vars:1,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","equipmentName",1,"form-label"],["type","text","id","equipmentName","formControlName","equipmentName",1,"form-control"],[1,"btn","btn-outline-primary",3,"disabled"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Agregar Nuevo equipo"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.bsModalRef.hide()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4),t.YNc(7,k,7,2,"form",5),t.qZA(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return n.bsModalRef.hide()}),t._uU(10,"Cerrar"),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("ngIf",n.addEquipmentForm))},dependencies:[c.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]})}function x(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"tr",4),t.NdJ("click",function(){const l=t.CHM(e).$implicit,q=t.oxw(2);return t.KtG(q.onRowClicked(l))}),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()}if(2&i){const e=o.$implicit;t.xp6(2),t.hij(" ",e.id," "),t.xp6(2),t.hij(" ",e.name," ")}}function I(i,o){if(1&i&&(t.TgZ(0,"table",2)(1,"thead")(2,"tr")(3,"th"),t._uU(4," Id "),t.qZA(),t.TgZ(5,"th"),t._uU(6," Nombre "),t.qZA()()(),t.TgZ(7,"tbody"),t.YNc(8,x,5,2,"tr",3),t.qZA()()),2&i){const e=t.oxw();t.xp6(8),t.Q6J("ngForOf",e.items)}}function F(i,o){1&i&&(t.TgZ(0,"p",5),t._uU(1," No se encontraron elementos\n"),t.qZA())}class p{constructor(){this.rowClickedEvent=new t.vpe}onRowClicked(o){this.rowClickedEvent.emit(o)}static#t=this.\u0275fac=function(e){return new(e||p)};static#e=this.\u0275cmp=t.Xpm({type:p,selectors:[["app-items-list"]],inputs:{items:"items",actions:"actions"},outputs:{rowClickedEvent:"rowClickedEvent"},decls:2,vars:2,consts:[["class","table table-hover",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"table","table-hover"],["role","button",3,"click",4,"ngFor","ngForOf"],["role","button",3,"click"],[1,"text-center"]],template:function(e,n){1&e&&(t.YNc(0,I,9,1,"table",0),t.YNc(1,F,2,0,"p",1)),2&e&&(t.Q6J("ngIf",n.items&&n.items.length),t.xp6(1),t.Q6J("ngIf",n.items&&!n.items.length))},dependencies:[c.sg,c.O5]})}function y(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"tr",4),t.NdJ("click",function(){const l=t.CHM(e).$implicit,q=t.oxw(2);return t.KtG(q.onRowClicked(l))}),t.TgZ(1,"td"),t._uU(2),t.qZA(),t._UZ(3,"td"),t.qZA()}if(2&i){const e=o.$implicit;t.xp6(2),t.hij(" ",e.workOrderId," ")}}function M(i,o){if(1&i&&(t.TgZ(0,"table",2)(1,"thead")(2,"tr")(3,"th"),t._uU(4," Id "),t.qZA(),t.TgZ(5,"th"),t._uU(6," Fecha de creaci\xf3n "),t.qZA(),t.TgZ(7,"th"),t._uU(8," Estado "),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,y,4,1,"tr",3),t.qZA()()),2&i){const e=t.oxw();t.xp6(10),t.Q6J("ngForOf",e.items)}}function w(i,o){1&i&&(t.TgZ(0,"p",5),t._uU(1," No se encontraron elementos\n"),t.qZA())}class b{onRowClicked(o){}static#t=this.\u0275fac=function(e){return new(e||b)};static#e=this.\u0275cmp=t.Xpm({type:b,selectors:[["app-work-orders-table"]],inputs:{items:"items"},decls:2,vars:2,consts:[["class","table table-hover",4,"ngIf"],["class","text-center mt-3",4,"ngIf"],[1,"table","table-hover"],["role","button",3,"click",4,"ngFor","ngForOf"],["role","button",3,"click"],[1,"text-center","mt-3"]],template:function(e,n){1&e&&(t.YNc(0,M,11,1,"table",0),t.YNc(1,w,2,0,"p",1)),2&e&&(t.Q6J("ngIf",n.items&&n.items.length),t.xp6(1),t.Q6J("ngIf",n.items&&!n.items.length))},dependencies:[c.sg,c.O5]})}class h{transform(o,e){if(!o)return new Array;switch(e){case"customer":return o.map(n=>({id:n.customerId,name:n.customerName}));case"branch":return o.map(n=>({id:n.branchId,name:n.branchName}));case"equipment":return o.map(n=>({id:n.equipmentId,name:n.equipmentName}))}return new Array}static#t=this.\u0275fac=function(e){return new(e||h)};static#e=this.\u0275pipe=t.Yjl({name:"toItemList",type:h,pure:!0})}function J(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"h4",3),t._uU(3),t.qZA(),t.TgZ(4,"div",4)(5,"h5",3),t._uU(6,"Equipos"),t.qZA(),t.TgZ(7,"div",5)(8,"button",6),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onOpenAddEquipmentModal())}),t._uU(9,"Agregar nuevo equipo"),t.qZA()(),t._UZ(10,"app-items-list",7),t.ALo(11,"toItemList"),t.qZA(),t.TgZ(12,"div",4)(13,"h5",3),t._uU(14,"\xd3rdenes de trabajo"),t.qZA(),t.TgZ(15,"div",5)(16,"button",6),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onOpenAddEquipmentModal())}),t._uU(17,"Agregar nueva OT"),t.qZA()(),t._UZ(18,"app-work-orders-table",7),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(3),t.Oqu(e.branch.branchName),t.xp6(7),t.Q6J("items",t.xi3(11,3,e.branch.equipment,"equipment")),t.xp6(8),t.Q6J("items",e.branch.workOrders)}}class f{constructor(o,e,n,r){this.route=o,this.httpService=e,this.modalService=n,this.router=r}ngOnInit(){this.getBranch()}getBranch(){const o=this.route.snapshot.paramMap.get("branchId");this.httpService.get(`Branches?branchId=${o}`).subscribe(e=>this.branch=e)}onOpenAddEquipmentModal(){this.modalRef=this.modalService.show(_,{initialState:{branchId:this.branch.branchId}})}static#t=this.\u0275fac=function(e){return new(e||f)(t.Y36(m.gz),t.Y36(u.O),t.Y36(d.tT),t.Y36(m.F0))};static#e=this.\u0275cmp=t.Xpm({type:f,selectors:[["app-branch-detail"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row","mt-3"],[1,"text-center"],[1,"col-lg-6","mt-3"],[1,"text-center","mt-3"],[1,"btn","btn-outline-primary",3,"click"],[3,"items"]],template:function(e,n){1&e&&t.YNc(0,J,19,6,"div",0),2&e&&t.Q6J("ngIf",n.branch)},dependencies:[c.O5,p,b,h]})}function U(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"form",8),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.addBranchForm.valid&&r.onSubmit())}),t.TgZ(1,"div",9)(2,"label",10),t._uU(3,"Nombre"),t.qZA(),t._UZ(4,"input",11),t.qZA(),t.TgZ(5,"button",12),t._uU(6,"Guardar"),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("formGroup",e.addBranchForm),t.xp6(5),t.Q6J("disabled",!e.addBranchForm.valid)}}class g{constructor(o,e,n){this.bsModalRef=o,this.fb=e,this.httpService=n}ngOnInit(){this.initForm()}initForm(){this.addBranchForm=this.fb.group({branchName:["",s.kI.required]})}onSubmit(){this.httpService.post("Branches",{branchName:this.addBranchForm.controls.branchName.value,customerId:this.customerId}).subscribe(e=>{this.bsModalRef.hide(),this.bsModalRef.onHide.emit(e)})}static#t=this.\u0275fac=function(e){return new(e||g)(t.Y36(d.UZ),t.Y36(s.qu),t.Y36(u.O))};static#e=this.\u0275cmp=t.Xpm({type:g,selectors:[["app-add-branch-modal"]],decls:11,vars:1,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","branchName",1,"form-label"],["type","text","id","branchName","formControlName","branchName",1,"form-control"],[1,"btn","btn-outline-primary",3,"disabled"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Agregar Nueva sucursal"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.bsModalRef.hide()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4),t.YNc(7,U,7,2,"form",5),t.qZA(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return n.bsModalRef.hide()}),t._uU(10,"Cerrar"),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("ngIf",n.addBranchForm))},dependencies:[c.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]})}function S(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"h4",3),t._uU(3),t.qZA(),t.TgZ(4,"div",4)(5,"button",5),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onOpenAddBranchModal())}),t._uU(6,"Agregar nueva sucursal"),t.qZA()(),t.TgZ(7,"div",6)(8,"app-items-list",7),t.NdJ("rowClickedEvent",function(r){t.CHM(e);const l=t.oxw();return t.KtG(l.goToBranch(r))}),t.ALo(9,"toItemList"),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(3),t.Oqu(e.customer.customerName),t.xp6(5),t.Q6J("items",t.xi3(9,2,e.customer.branches,"branch"))}}class C{constructor(o,e,n,r){this.route=o,this.httpService=e,this.modalService=n,this.router=r}ngOnInit(){this.getCustomer()}getCustomer(){const o=this.route.snapshot.paramMap.get("id");this.httpService.get(`Customers/${o}`).subscribe(e=>this.customer=e)}onOpenAddBranchModal(){this.modalRef=this.modalService.show(g,{initialState:{customerId:this.customer.customerId}})}goToBranch(o){this.router.navigateByUrl(`customers/${this.customer.customerId}/${o.id}`)}static#t=this.\u0275fac=function(e){return new(e||C)(t.Y36(m.gz),t.Y36(u.O),t.Y36(d.tT),t.Y36(m.F0))};static#e=this.\u0275cmp=t.Xpm({type:C,selectors:[["app-customer-detail"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row","mt-3"],[1,"text-center"],[1,"text-center","mt-3"],[1,"btn","btn-outline-primary",3,"click"],[1,"col","mt-3"],[3,"items","rowClickedEvent"]],template:function(e,n){1&e&&t.YNc(0,S,10,5,"div",0),2&e&&t.Q6J("ngIf",n.customer)},dependencies:[c.O5,p,h]})}function O(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"form",8),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.addCustomerForm.valid&&r.onSubmit())}),t.TgZ(1,"div",9)(2,"label",10),t._uU(3,"Nombre"),t.qZA(),t._UZ(4,"input",11),t.qZA(),t.TgZ(5,"button",12),t._uU(6,"Guardar"),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("formGroup",e.addCustomerForm),t.xp6(5),t.Q6J("disabled",!e.addCustomerForm.valid)}}class Z{constructor(o,e,n){this.bsModalRef=o,this.fb=e,this.httpService=n}ngOnInit(){this.initForm()}initForm(){this.addCustomerForm=this.fb.group({customerName:["",s.kI.required]})}onSubmit(){this.httpService.post("Customers",{customerName:this.addCustomerForm.controls.customerName.value}).subscribe(e=>{this.bsModalRef.hide(),this.bsModalRef.onHide.emit(e)})}static#t=this.\u0275fac=function(e){return new(e||Z)(t.Y36(d.UZ),t.Y36(s.qu),t.Y36(u.O))};static#e=this.\u0275cmp=t.Xpm({type:Z,selectors:[["app-add-customer-modal"]],decls:11,vars:1,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","customerName",1,"form-label"],["type","text","id","customerName","formControlName","customerName",1,"form-control"],[1,"btn","btn-outline-primary",3,"disabled"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Agregar Nuevo cliente"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.bsModalRef.hide()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4),t.YNc(7,O,7,2,"form",5),t.qZA(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return n.bsModalRef.hide()}),t._uU(10,"Cerrar"),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("ngIf",n.addCustomerForm))},dependencies:[c.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]})}class v{constructor(o,e,n){this.modalService=o,this.httpService=e,this.router=n}ngOnInit(){this.getCustomers()}getCustomers(){this.httpService.get("Customers").subscribe(o=>this.customers=o)}onOpenAddCustomerModal(){this.modalRef=this.modalService.show(Z)}goToBranch(o){this.router.navigateByUrl(`customers/${o.id}`)}static#t=this.\u0275fac=function(e){return new(e||v)(t.Y36(d.tT),t.Y36(u.O),t.Y36(m.F0))};static#e=this.\u0275cmp=t.Xpm({type:v,selectors:[["app-customers"]],decls:10,vars:4,consts:[[1,"container"],[1,"text-center","mt-3"],[1,"btn","btn-outline-primary",3,"click"],[1,"row","mt-3"],[1,"col"],[3,"items","rowClickedEvent"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Clientes"),t.qZA(),t.TgZ(3,"div",1)(4,"button",2),t.NdJ("click",function(){return n.onOpenAddCustomerModal()}),t._uU(5,"Agregar nuevo cliente"),t.qZA()(),t.TgZ(6,"div",3)(7,"div",4)(8,"app-items-list",5),t.NdJ("rowClickedEvent",function(l){return n.goToBranch(l)}),t.ALo(9,"toItemList"),t.qZA()()()()),2&e&&(t.xp6(8),t.Q6J("items",t.xi3(9,1,n.customers,"customer")))},dependencies:[p,h]})}const Y=[{path:"",component:v},{path:":id",component:C},{path:":customerId/:branchId",component:f}];class T{static#t=this.\u0275fac=function(e){return new(e||T)};static#e=this.\u0275mod=t.oAB({type:T});static#o=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(Y),m.Bz]})}var E=a(8748);class A{static#t=this.\u0275fac=function(e){return new(e||A)};static#e=this.\u0275mod=t.oAB({type:A});static#o=this.\u0275inj=t.cJS({imports:[c.ez,T,E.m]})}}}]);