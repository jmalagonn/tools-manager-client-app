"use strict";(self.webpackChunkToolsManagerClientApp=self.webpackChunkToolsManagerClientApp||[]).push([[6],{7323:(v,u,r)=>{r.d(u,{G:()=>d});class d{static#t=this.accountLogin="Account/login";static#e=this.addUserApi="Users/addUser";static#o=this.branchesApi="Branches";static#i=this.customersApi="Customers";static#n=this.equipmentApi="Equipment";static#s=this.equipmentParametersApi="Equipment/parameters";static#r=this.measurementUnitsApi="MeasurementUnits";static#c=this.userApi="Users";static#l=this.userEmployeeApi="Users/employee";static#a=this.userEmployeesApi="Users/employees";static#d=this.userRolesApi="UserRole";static#p=this.workItemApi="WorkItem";static#m=this.workOrderApi="WorkOrder";static#u=this.workOrderActivity=`${this.workOrderApi}/activity`;static#_=this.workOrderTypesApi=`${this.workOrderApi}/workOrderTypes`;static#h=this.workOrderTypeApi=`${this.workOrderApi}/workOrderType`;static#f=this.toolsApi="Tools";static#g=this.toolParametersApi="Tools/parameters";static#T=this.toolOutputsApi="ToolOutputs";static#b=this.workStateApi="WorkState"}},9127:(v,u,r)=>{r.d(u,{I:()=>p});var d=r(6895),h=r(1571);class p{static#t=this.\u0275fac=function(c){return new(c||p)};static#e=this.\u0275mod=h.oAB({type:p});static#o=this.\u0275inj=h.cJS({imports:[d.ez]})}},6006:(v,u,r)=>{r.r(u),r.d(u,{GeneralSettingsModule:()=>A});var d=r(6895),h=r(6619),p=r(9127),_=r(8869),t=r(1571),c=r(7323);class m{static#t=this.roleNameUpdated="El nombre del rol ha sido actualizado."}var g=r(5307),w=r(7185),f=r(2687),a=r(433),O=r(2216);function E(s,o){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"td")(2,"span"),t._uU(3),t.qZA()(),t.TgZ(4,"td",7)(5,"fa-icon",8),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.onClickEditButton(n))}),t.qZA()(),t.BQk()}if(2&s){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(3),t.Oqu(e.displayName),t.xp6(2),t.Q6J("icon",i.faEdit)}}function N(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"td")(1,"input",9),t.NdJ("ngModelChange",function(n){t.CHM(e);const l=t.oxw(3);return t.KtG(l.roleDisplayName=n)}),t.qZA()(),t.TgZ(2,"td",7)(3,"fa-icon",10),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.onClickSaveButton(n))}),t.qZA(),t.TgZ(4,"fa-icon",8),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.onClickCancelButton(n))}),t.qZA()()}if(2&s){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("value",e.displayName)("ngModel",i.roleDisplayName),t.uIk("id","role-"+e.id),t.xp6(2),t.Q6J("icon",i.faSave),t.xp6(1),t.Q6J("icon",i.faX)}}function U(s,o){if(1&s&&(t.TgZ(0,"tr")(1,"td",4),t._uU(2),t.qZA(),t.YNc(3,E,6,2,"ng-container",5),t.YNc(4,N,5,5,"ng-template",null,6,t.W1O),t.qZA()),2&s){const e=o.$implicit,i=t.MAs(5);t.xp6(2),t.Oqu(e.id),t.xp6(1),t.Q6J("ngIf",!e.isEditing)("ngIfElse",i)}}function I(s,o){if(1&s&&(t.TgZ(0,"table",1)(1,"thead")(2,"tr")(3,"th",2),t._uU(4,"Id"),t.qZA(),t.TgZ(5,"th",2),t._uU(6,"Nombre"),t.qZA(),t._UZ(7,"th",2),t.qZA()(),t.TgZ(8,"tbody"),t.YNc(9,U,6,3,"tr",3),t.qZA()()),2&s){const e=t.oxw();t.xp6(9),t.Q6J("ngForOf",e.editableUserRoles)}}class T{constructor(o){this.fb=o,this.faEdit=f.Xcf,this.faX=f.EOp,this.faSave=f.r6l,this.editableUserRoles=[],this.userRoleEditedEvent=new t.vpe}ngOnChanges(o){this.userRoles&&(this.editableUserRoles=this.userRoles.map(e=>({...e,isEditing:!1})))}onClickEditButton(o){this.roleDisplayName=o.displayName;const e=this.editableUserRoles.findIndex(i=>i.id==o.id);this.editableUserRoles[e].isEditing=!0}onClickSaveButton(o){const e=this.editableUserRoles.findIndex(i=>i.id==o.id);this.editableUserRoles[e].displayName=this.roleDisplayName,this.editableUserRoles[e].isEditing=!1,this.userRoleEditedEvent.emit(this.editableUserRoles[e])}onClickCancelButton(o){const e=this.editableUserRoles.findIndex(i=>i.id==o.id);this.editableUserRoles[e].isEditing=!1}static#t=this.\u0275fac=function(e){return new(e||T)(t.Y36(a.qu))};static#e=this.\u0275cmp=t.Xpm({type:T,selectors:[["app-user-roles-table"]],inputs:{userRoles:"userRoles"},outputs:{userRoleEditedEvent:"userRoleEditedEvent"},features:[t.TTD],decls:1,vars:1,consts:[["class","table",4,"ngIf"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[4,"ngIf","ngIfElse"],["isEditingRole",""],[1,"text-center"],["role","button",3,"icon","click"],["type","text",1,"form-control",3,"value","ngModel","ngModelChange"],["role","button",1,"me-2",3,"icon","click"]],template:function(e,i){1&e&&t.YNc(0,I,10,1,"table",0),2&e&&t.Q6J("ngIf",i.editableUserRoles.length)},dependencies:[d.sg,d.O5,O.BN,a.Fj,a.JJ,a.On],styles:[".form-control[_ngcontent-%COMP%]{padding-top:.2rem;padding-bottom:.2rem;height:1.3125rem;font-size:.8rem}fa-icon[_ngcontent-%COMP%]{color:#adb5bd}fa-icon[_ngcontent-%COMP%]:hover{color:#0d6efd}"]})}class b{constructor(o,e){this.httpService=o,this.toastr=e}ngOnInit(){this.getUserRoles()}getUserRoles(){this.httpService.get(c.G.userRolesApi).subscribe(o=>this.userRoles=o)}onUserRoleEdited(o){if(!this.userRoles)return;const e=this.userRoles.findIndex(i=>i.id==o.id);this.httpService.put(c.G.userRolesApi,o).subscribe(i=>{this.userRoles[e]=i,this.toastr.success(m.roleNameUpdated)})}static#t=this.\u0275fac=function(e){return new(e||b)(t.Y36(g.O),t.Y36(w._W))};static#e=this.\u0275cmp=t.Xpm({type:b,selectors:[["app-user-roles"]],decls:4,vars:1,consts:[[3,"userRoles","userRoleEditedEvent"]],template:function(e,i){1&e&&(t.TgZ(0,"h2"),t._uU(1,"Roles de usuario"),t.qZA(),t.TgZ(2,"div")(3,"app-user-roles-table",0),t.NdJ("userRoleEditedEvent",function(l){return i.onUserRoleEdited(l)}),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("userRoles",i.userRoles))},dependencies:[T]})}var Z=r(9453);class C{constructor(o){this.activeModal=o}static#t=this.\u0275fac=function(e){return new(e||C)(t.Y36(Z.Kz))};static#e=this.\u0275cmp=t.Xpm({type:C,selectors:[["app-delete-modal"]],decls:10,vars:0,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return i.activeModal.dismiss(!1)}),t.qZA()(),t.TgZ(2,"div",2)(3,"p"),t._uU(4,"\xbfEst\xe1 seguro que desea eliminar ese elemento?"),t.qZA()(),t.TgZ(5,"div",3)(6,"button",4),t.NdJ("click",function(){return i.activeModal.close(!1)}),t._uU(7,"Close"),t.qZA(),t.TgZ(8,"button",5),t.NdJ("click",function(){return i.activeModal.close(!0)}),t._uU(9,"Eliminar"),t.qZA()())}})}function R(s,o){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",8)(4,"fa-icon",9),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,l=t.oxw();return t.KtG(l.onClickEditButton(n))}),t.qZA(),t.TgZ(5,"fa-icon",10),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,l=t.oxw();return t.KtG(l.onClickTrashButton(n))}),t.qZA()(),t.BQk()}if(2&s){const e=t.oxw().$implicit,i=t.oxw();t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("icon",i.faEdit),t.xp6(1),t.Q6J("icon",i.faTrash)}}function M(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"td")(1,"input",11),t.NdJ("ngModelChange",function(n){t.CHM(e);const l=t.oxw(2);return t.KtG(l.workOrderTypeName=n)}),t.qZA()(),t.TgZ(2,"td",8)(3,"fa-icon",9),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,l=t.oxw();return t.KtG(l.onClickSaveButton(n))}),t.qZA(),t.TgZ(4,"fa-icon",10),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,l=t.oxw();return t.KtG(l.onClickCancelButton(n))}),t.qZA()()}if(2&s){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Q6J("value",e.name)("ngModel",i.workOrderTypeName),t.uIk("id","work-order-type-id-"+e.id),t.xp6(2),t.Q6J("icon",i.faSave),t.xp6(1),t.Q6J("icon",i.faX)}}function J(s,o){if(1&s&&(t.TgZ(0,"tr"),t.YNc(1,R,6,3,"ng-container",6),t.YNc(2,M,5,5,"ng-template",null,7,t.W1O),t.qZA()),2&s){const e=o.$implicit,i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!e.isEditing)("ngIfElse",i)}}function F(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onClickAddNewItem())}),t._uU(1,"A\xf1adir nuevo elemento"),t.qZA()}}function q(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"form",13),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onSubmit())}),t.TgZ(1,"div",14)(2,"div",15)(3,"label",16),t._uU(4,"Nombre"),t.qZA(),t._UZ(5,"input",17),t.qZA(),t.TgZ(6,"div",15)(7,"button",18),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.setIsAddingNewItem(!1))}),t._uU(8,"Cancelar"),t.qZA(),t.TgZ(9,"button",19),t._uU(10,"Guardar"),t.qZA()()()()}if(2&s){const e=t.oxw();t.Q6J("formGroup",e.addNewItemForm),t.xp6(9),t.Q6J("disabled",!e.addNewItemForm.valid)}}class k{constructor(o,e,i,n){this.httpService=o,this.fb=e,this.modalService=i,this.toastr=n,this.faEdit=f.Xcf,this.faTrash=f.$aW,this.faX=f.EOp,this.faSave=f.r6l,this.isAddingNewItem=!1}ngOnInit(){this.getWorkOrderTypes()}getWorkOrderTypes(){this.httpService.get(c.G.workOrderTypesApi).subscribe(o=>{this.workOrderTypes=[],o.map(e=>this.workOrderTypes.push({...e,isEditing:!1}))})}setIsAddingNewItem(o){this.isAddingNewItem=o}onClickAddNewItem(){this.initForm(),this.setIsAddingNewItem(!0)}initForm(){this.addNewItemForm=this.fb.group({name:["",a.kI.required]})}onSubmit(){this.addNewItemForm?.valid&&(this.setIsAddingNewItem(!1),this.httpService.post(c.G.workOrderTypeApi,{name:this.addNewItemForm.controls.name.value}).subscribe(()=>{this.getWorkOrderTypes()}))}onClickTrashButton(o){this.modalService.open(C).closed.subscribe(i=>i&&this.deleteElement(o))}onClickEditButton(o){this.workOrderTypeName=o.name,o.isEditing=!0}onClickSaveButton(o){o.isEditing=!1,this.httpService.put(`${c.G.workOrderTypeApi}`,{id:o.id,name:this.workOrderTypeName}).subscribe(()=>{this.toastr.success("Elemento actualizado."),this.getWorkOrderTypes()})}onClickCancelButton(o){o.isEditing=!1}deleteElement(o){this.httpService.delete(`${c.G.workOrderTypeApi}/${o.id}`).subscribe(()=>{this.toastr.info("Eliminaci\xf3n realizada con \xe9xito."),this.getWorkOrderTypes()})}static#t=this.\u0275fac=function(e){return new(e||k)(t.Y36(g.O),t.Y36(a.qu),t.Y36(Z.FF),t.Y36(w._W))};static#e=this.\u0275cmp=t.Xpm({type:k,selectors:[["app-work-order-types"]],decls:14,vars:3,consts:[[1,"table"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-12","d-flex","justify-content-center"],["class","btn btn-outline-primary",3,"click",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"text-center"],["role","button",1,"me-2",3,"icon","click"],["role","button",3,"icon","click"],["type","text",1,"form-control","form-control-row",3,"value","ngModel","ngModelChange"],[1,"btn","btn-outline-primary",3,"click"],[3,"formGroup","ngSubmit"],[1,"row","align-items-end"],[1,"col"],[1,"form-label"],["type","text","formControlName","name",1,"form-control"],["type","button",1,"btn","btn-outline-danger","me-2",3,"click"],["type","submit",1,"btn","btn-outline-primary",3,"disabled"]],template:function(e,i){1&e&&(t.TgZ(0,"h2"),t._uU(1,"Tipos de trabajo"),t.qZA(),t.TgZ(2,"table",0)(3,"thead")(4,"tr")(5,"th"),t._uU(6,"Nombre"),t.qZA(),t._UZ(7,"th"),t.qZA()(),t.TgZ(8,"tbody"),t.YNc(9,J,4,2,"tr",1),t.qZA()(),t.TgZ(10,"div",2)(11,"div",3),t.YNc(12,F,2,0,"button",4),t.YNc(13,q,11,2,"form",5),t.qZA()()),2&e&&(t.xp6(9),t.Q6J("ngForOf",i.workOrderTypes),t.xp6(3),t.Q6J("ngIf",!i.isAddingNewItem),t.xp6(1),t.Q6J("ngIf",i.isAddingNewItem&&i.addNewItemForm))},dependencies:[d.sg,d.O5,O.BN,a._Y,a.Fj,a.JJ,a.JL,a.On,a.sg,a.u],styles:[".form-control-row[_ngcontent-%COMP%]{padding-top:.2rem;padding-bottom:.2rem;height:1.3125rem;font-size:.8rem}fa-icon[_ngcontent-%COMP%]{color:#adb5bd}fa-icon[_ngcontent-%COMP%]:hover{color:#0d6efd}"]})}class y{static#t=this.\u0275fac=function(e){return new(e||y)};static#e=this.\u0275cmp=t.Xpm({type:y,selectors:[["app-general-settings"]],decls:7,vars:0,consts:[[1,"container"],[1,"text-center","mt-3"],[1,"row"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Configuraci\xf3n general"),t.qZA(),t.TgZ(3,"section")(4,"div",2),t._UZ(5,"app-user-roles")(6,"app-work-order-types"),t.qZA()()())},dependencies:[b,k]})}const S=[{path:"",component:y}];class x{static#t=this.\u0275fac=function(e){return new(e||x)};static#e=this.\u0275mod=t.oAB({type:x});static#o=this.\u0275inj=t.cJS({imports:[_.Bz.forChild(S),_.Bz]})}class A{static#t=this.\u0275fac=function(e){return new(e||A)};static#e=this.\u0275mod=t.oAB({type:A});static#o=this.\u0275inj=t.cJS({imports:[d.ez,x,h.m,p.I]})}},5307:(v,u,r)=>{r.d(u,{O:()=>_});var d=r(529);var p=r(1571);class _{constructor(c){this.httpClient=c,this.api_url="/api/"}get(c){return this.httpClient.get(this.api_url+c)}post(c,m){return this.httpClient.post(this.api_url+c,m)}postFormData(c,m){const g=new d.WM({"Content-Type":"multipart/form-data"});return this.httpClient.post(this.api_url+c,m,{headers:g})}put(c,m){return this.httpClient.put(this.api_url+c,m)}delete(c){return this.httpClient.delete(this.api_url+c)}static#t=this.\u0275fac=function(m){return new(m||_)(p.LFG(d.eN))};static#e=this.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}}}]);