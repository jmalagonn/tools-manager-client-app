"use strict";(self.webpackChunkToolsManagerClientApp=self.webpackChunkToolsManagerClientApp||[]).push([[783],{3783:(Fo,Nt,p)=>{p.r(Nt),p.d(Nt,{ToolsManagementModule:()=>H});var d=p(6895),x=p(8869),h=p(2771),t=p(1571),y=p(6858),jt=p(1481);function Bt(e,o){if(1&e&&t._UZ(0,"img",1),2&e){const n=t.oxw();t.Q6J("src",n.imgSrc,t.LSH)}}class w{constructor(o){this.sanitizer=o}ngOnChanges(){console.log(this.appFile),this.generateImageThumbnail()}generateImageThumbnail(){!this.compImage&&!this.appFile||(this.imgSrc=this.appFile?this.appFile.url:this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(this.compImage)))}static#t=this.\u0275fac=function(n){return new(n||w)(t.Y36(jt.H7))};static#e=this.\u0275cmp=t.Xpm({type:w,selectors:[["app-image-thumbnail"]],inputs:{compImage:"compImage",appFile:"appFile"},features:[t.TTD],decls:1,vars:1,consts:[[3,"src",4,"ngIf"],[3,"src"]],template:function(n,r){1&n&&t.YNc(0,Bt,1,1,"img",0),2&n&&t.Q6J("ngIf",r.imgSrc)},dependencies:[d.O5],styles:["img[_ngcontent-%COMP%]{height:9rem;object-fit:contain;border-radius:.5rem}"]})}var c=p(433);function Kt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"form",1),t.NdJ("ngSubmit",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.editToolForm.valid&&i.onSubmit())}),t.TgZ(1,"div",2)(2,"label",3),t._uU(3,"Nombre"),t.qZA(),t._UZ(4,"input",4),t.qZA(),t.TgZ(5,"div")(6,"button",5),t._uU(7,"Guardar"),t.qZA(),t.TgZ(8,"button",6),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.onCancel())}),t._uU(9,"Cancelar"),t.qZA()()()}if(2&e){const n=t.oxw();t.Q6J("formGroup",n.editToolForm),t.xp6(6),t.Q6J("disabled",!n.editToolForm.valid)}}class A{constructor(o){this.fb=o,this.updatedToolEvent=new t.vpe,this.cancelUpdateToolEvent=new t.vpe}ngOnInit(){this.initForm()}initForm(){!this.tool||(this.editToolForm=this.fb.group({toolId:[this.tool.toolId,c.kI.required],toolName:[this.tool.toolName,c.kI.required]}))}onSubmit(){this.updatedToolEvent.emit(this.editToolForm?.value)}onCancel(){this.cancelUpdateToolEvent.emit()}static#t=this.\u0275fac=function(n){return new(n||A)(t.Y36(c.qu))};static#e=this.\u0275cmp=t.Xpm({type:A,selectors:[["app-edit-tool-form"]],inputs:{tool:"tool"},outputs:{updatedToolEvent:"updatedToolEvent",cancelUpdateToolEvent:"cancelUpdateToolEvent"},decls:1,vars:1,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","toolName",1,"form-label","fw-bold"],["type","text","id","toolName","formControlName","toolName",1,"form-control"],["type","submit",1,"btn","btn-outline-primary",3,"disabled"],["type","button",1,"btn","btn-outline-dark","ms-3",3,"click"]],template:function(n,r){1&n&&t.YNc(0,Kt,10,2,"form",0),2&n&&t.Q6J("ngIf",r.editToolForm)},dependencies:[d.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u]})}var m=p(5861),_=p(2687),V=p(8246);function Wt(e,o){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),o&&(r.href=o),i.href=e,i.href}const Xt=(()=>{let e=0;return()=>(e+=1,`u${`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4)}${e}`)})();function b(e){const o=[];for(let n=0,r=e.length;n<r;n++)o.push(e[n]);return o}function C(e,o){const r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(o);return r?parseFloat(r.replace("px","")):0}function Pt(e,o={}){const n=o.width||function te(e){const o=C(e,"border-left-width"),n=C(e,"border-right-width");return e.clientWidth+o+n}(e),r=o.height||function ee(e){const o=C(e,"border-top-width"),n=C(e,"border-bottom-width");return e.clientHeight+o+n}(e);return{width:n,height:r}}function oe(){let e,o;try{o=process}catch{}const n=o&&o.env?o.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const g=16384;function ne(e){(e.width>g||e.height>g)&&(e.width>g&&e.height>g?e.width>e.height?(e.height*=g/e.width,e.width=g):(e.width*=g/e.height,e.height=g):e.width>g?(e.height*=g/e.width,e.width=g):(e.width*=g/e.height,e.height=g))}function re(e,o={}){return new Promise(e.toBlob?n=>{e.toBlob(n,o.type?o.type:"image/png",o.quality?o.quality:1)}:n=>{const r=window.atob(e.toDataURL(o.type?o.type:void 0,o.quality?o.quality:void 0).split(",")[1]),i=r.length,a=new Uint8Array(i);for(let l=0;l<i;l+=1)a[l]=r.charCodeAt(l);n(new Blob([a],{type:o.type?o.type:"image/png"}))})}function E(e){return new Promise((o,n)=>{const r=new Image;r.decode=()=>o(r),r.onload=()=>o(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}function ie(e){return z.apply(this,arguments)}function z(){return(z=(0,m.Z)(function*(e){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(e)).then(encodeURIComponent).then(o=>`data:image/svg+xml;charset=utf-8,${o}`)})).apply(this,arguments)}function ae(e,o,n){return j.apply(this,arguments)}function j(){return(j=(0,m.Z)(function*(e,o,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${o}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${o} ${n}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),i.appendChild(a),a.appendChild(e),ie(i)})).apply(this,arguments)}const f=(e,o)=>{if(e instanceof o)return!0;const n=Object.getPrototypeOf(e);return null!==n&&(n.constructor.name===o.name||f(n,o))};function qt(e,o,n){const r=window.getComputedStyle(e,n),i=r.getPropertyValue("content");if(""===i||"none"===i)return;const a=Xt();try{o.className=`${o.className} ${a}`}catch{return}const l=document.createElement("style");l.appendChild(function ce(e,o,n){const r=`.${e}:${o}`,i=n.cssText?function le(e){const o=e.getPropertyValue("content");return`${e.cssText} content: '${o.replace(/'|"/g,"")}';`}(n):function se(e){return b(e).map(o=>`${o}: ${e.getPropertyValue(o)}${e.getPropertyPriority(o)?" !important":""};`).join(" ")}(n);return document.createTextNode(`${r}{${i}}`)}(a,n,r)),o.appendChild(l)}const Ot="application/font-woff",Jt="image/jpeg",me={woff:Ot,woff2:Ot,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Jt,jpeg:Jt,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function B(e){const o=function pe(e){const o=/\.([^./]*?)$/g.exec(e);return o?o[1]:""}(e).toLowerCase();return me[o]||""}function de(e){return e.split(/,/)[1]}function K(e){return-1!==e.search(/^(data:)/)}function Lt(e,o){return`data:${o};base64,${e}`}function kt(e,o,n){return W.apply(this,arguments)}function W(){return(W=(0,m.Z)(function*(e,o,n){const r=yield fetch(e,o);if(404===r.status)throw new Error(`Resource "${r.url}" not found`);const i=yield r.blob();return new Promise((a,l)=>{const s=new FileReader;s.onerror=l,s.onloadend=()=>{try{a(n({res:r,result:s.result}))}catch(u){l(u)}},s.readAsDataURL(i)})})).apply(this,arguments)}const X={};function fe(e,o,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),o?`[${o}]${r}`:r}function tt(e,o,n){return et.apply(this,arguments)}function et(){return(et=(0,m.Z)(function*(e,o,n){const r=fe(e,o,n.includeQueryParams);if(null!=X[r])return X[r];let i;n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());try{i=Lt(yield kt(e,n.fetchRequestInit,({res:l,result:s})=>(o||(o=l.headers.get("Content-Type")||""),de(s))),o)}catch(a){i=n.imagePlaceholder||"";let l=`Failed to fetch resource: ${e}`;a&&(l="string"==typeof a?a:a.message),l&&console.warn(l)}return X[r]=i,i})).apply(this,arguments)}function _e(e){return ot.apply(this,arguments)}function ot(){return(ot=(0,m.Z)(function*(e){const o=e.toDataURL();return"data:,"===o?e.cloneNode(!1):E(o)})).apply(this,arguments)}function ge(e,o){return nt.apply(this,arguments)}function nt(){return(nt=(0,m.Z)(function*(e,o){if(e.currentSrc){const a=document.createElement("canvas"),l=a.getContext("2d");return a.width=e.clientWidth,a.height=e.clientHeight,l?.drawImage(e,0,0,a.width,a.height),E(a.toDataURL())}const n=e.poster,r=B(n);return E(yield tt(n,r,o))})).apply(this,arguments)}function he(e){return rt.apply(this,arguments)}function rt(){return(rt=(0,m.Z)(function*(e){var o;try{if(null!==(o=e?.contentDocument)&&void 0!==o&&o.body)return yield I(e.contentDocument.body,{},!0)}catch{}return e.cloneNode(!1)})).apply(this,arguments)}function Te(e,o){return it.apply(this,arguments)}function it(){return(it=(0,m.Z)(function*(e,o){return f(e,HTMLCanvasElement)?_e(e):f(e,HTMLVideoElement)?ge(e,o):f(e,HTMLIFrameElement)?he(e):e.cloneNode(!1)})).apply(this,arguments)}const be=e=>null!=e.tagName&&"SLOT"===e.tagName.toUpperCase();function ve(e,o,n){return at.apply(this,arguments)}function at(){return(at=(0,m.Z)(function*(e,o,n){var r,i;let a=[];return a=be(e)&&e.assignedNodes?b(e.assignedNodes()):f(e,HTMLIFrameElement)&&(null===(r=e.contentDocument)||void 0===r?void 0:r.body)?b(e.contentDocument.body.childNodes):b((null!==(i=e.shadowRoot)&&void 0!==i?i:e).childNodes),0===a.length||f(e,HTMLVideoElement)||(yield a.reduce((l,s)=>l.then(()=>I(s,n)).then(u=>{u&&o.appendChild(u)}),Promise.resolve())),o})).apply(this,arguments)}function we(e,o){return f(o,Element)&&(function xe(e,o){const n=o.style;if(!n)return;const r=window.getComputedStyle(e);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):b(r).forEach(i=>{let a=r.getPropertyValue(i);"font-size"===i&&a.endsWith("px")&&(a=Math.floor(parseFloat(a.substring(0,a.length-2)))-.1+"px"),f(e,HTMLIFrameElement)&&"display"===i&&"inline"===a&&(a="block"),"d"===i&&o.getAttribute("d")&&(a=`path(${o.getAttribute("d")})`),n.setProperty(i,a,r.getPropertyPriority(i))})}(e,o),function ue(e,o){qt(e,o,":before"),qt(e,o,":after")}(e,o),function ye(e,o){f(e,HTMLTextAreaElement)&&(o.innerHTML=e.value),f(e,HTMLInputElement)&&o.setAttribute("value",e.value)}(e,o),function Ze(e,o){if(f(e,HTMLSelectElement)){const r=Array.from(o.children).find(i=>e.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}(e,o)),o}function Ae(e,o){return lt.apply(this,arguments)}function lt(){return(lt=(0,m.Z)(function*(e,o){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===n.length)return e;const r={};for(let a=0;a<n.length;a++){const s=n[a].getAttribute("xlink:href");if(s){const u=e.querySelector(s),T=document.querySelector(s);!u&&T&&!r[s]&&(r[s]=yield I(T,o,!0))}}const i=Object.values(r);if(i.length){const a="http://www.w3.org/1999/xhtml",l=document.createElementNS(a,"svg");l.setAttribute("xmlns",a),l.style.position="absolute",l.style.width="0",l.style.height="0",l.style.overflow="hidden",l.style.display="none";const s=document.createElementNS(a,"defs");l.appendChild(s);for(let u=0;u<i.length;u++)s.appendChild(i[u]);e.appendChild(l)}return e})).apply(this,arguments)}function I(e,o,n){return st.apply(this,arguments)}function st(){return(st=(0,m.Z)(function*(e,o,n){return n||!o.filter||o.filter(e)?Promise.resolve(e).then(r=>Te(r,o)).then(r=>ve(e,r,o)).then(r=>we(e,r)).then(r=>Ae(r,o)):null})).apply(this,arguments)}const Rt=/url\((['"]?)([^'"]+?)\1\)/g,Ce=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Ee=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Ie(e){const o=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${o})(['"]?\\))`,"g")}function Fe(e){const o=[];return e.replace(Rt,(n,r,i)=>(o.push(i),n)),o.filter(n=>!K(n))}function Se(e,o,n,r,i){return ct.apply(this,arguments)}function ct(){return(ct=(0,m.Z)(function*(e,o,n,r,i){try{const a=n?Wt(o,n):o,l=B(o);let s;return s=i?Lt(yield i(a),l):yield tt(a,l,r),e.replace(Ie(o),`$1${s}$3`)}catch{}return e})).apply(this,arguments)}function Ue(e,{preferredFontFormat:o}){return o?e.replace(Ee,n=>{for(;;){const[r,,i]=Ce.exec(n)||[];if(!i)return"";if(i===o)return`src: ${r};`}}):e}function Qt(e){return-1!==e.search(Rt)}function Mt(e,o,n){return ut.apply(this,arguments)}function ut(){return(ut=(0,m.Z)(function*(e,o,n){if(!Qt(e))return e;const r=Ue(e,n);return Fe(r).reduce((a,l)=>a.then(s=>Se(s,l,o,n)),Promise.resolve(r))})).apply(this,arguments)}function F(e,o,n){return mt.apply(this,arguments)}function mt(){return(mt=(0,m.Z)(function*(e,o,n){var r;const i=null===(r=o.style)||void 0===r?void 0:r.getPropertyValue(e);if(i){const a=yield Mt(i,null,n);return o.style.setProperty(e,a,o.style.getPropertyPriority(e)),!0}return!1})).apply(this,arguments)}function Ne(e,o){return pt.apply(this,arguments)}function pt(){return(pt=(0,m.Z)(function*(e,o){(yield F("background",e,o))||(yield F("background-image",e,o)),(yield F("mask",e,o))||(yield F("mask-image",e,o))})).apply(this,arguments)}function Pe(e,o){return dt.apply(this,arguments)}function dt(){return(dt=(0,m.Z)(function*(e,o){const n=f(e,HTMLImageElement);if((!n||K(e.src))&&(!f(e,SVGImageElement)||K(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,i=yield tt(r,B(r),o);yield new Promise((a,l)=>{e.onload=a,e.onerror=l;const s=e;s.decode&&(s.decode=a),"lazy"===s.loading&&(s.loading="eager"),n?(e.srcset="",e.src=i):e.href.baseVal=i})})).apply(this,arguments)}function qe(e,o){return ft.apply(this,arguments)}function ft(){return(ft=(0,m.Z)(function*(e,o){const r=b(e.childNodes).map(i=>Gt(i,o));yield Promise.all(r).then(()=>e)})).apply(this,arguments)}function Gt(e,o){return _t.apply(this,arguments)}function _t(){return(_t=(0,m.Z)(function*(e,o){f(e,Element)&&(yield Ne(e,o),yield Pe(e,o),yield qe(e,o))})).apply(this,arguments)}function Oe(e,o){const{style:n}=e;o.backgroundColor&&(n.backgroundColor=o.backgroundColor),o.width&&(n.width=`${o.width}px`),o.height&&(n.height=`${o.height}px`);const r=o.style;return null!=r&&Object.keys(r).forEach(i=>{n[i]=r[i]}),e}const Yt={};function $t(e){return gt.apply(this,arguments)}function gt(){return(gt=(0,m.Z)(function*(e){let o=Yt[e];return null!=o||(o={url:e,cssText:yield(yield fetch(e)).text()},Yt[e]=o),o})).apply(this,arguments)}function Dt(e,o){return ht.apply(this,arguments)}function ht(){return ht=(0,m.Z)(function*(e,o){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(n.match(/url\([^)]+\)/g)||[]).map(function(){var l=(0,m.Z)(function*(s){let u=s.replace(r,"$1");return u.startsWith("https://")||(u=new URL(u,e.url).href),kt(u,o.fetchRequestInit,({result:T})=>(n=n.replace(s,`url(${T})`),[s,T]))});return function(s){return l.apply(this,arguments)}}());return Promise.all(a).then(()=>n)}),ht.apply(this,arguments)}function Ht(e){if(null==e)return[];const o=[];let r=e.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(null===u)break;o.push(u[0])}r=r.replace(i,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let u=a.exec(r);if(null===u){if(u=s.exec(r),null===u)break;a.lastIndex=s.lastIndex}else s.lastIndex=a.lastIndex;o.push(u[0])}return o}function Je(e,o){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,m.Z)(function*(e,o){const n=[],r=[];return e.forEach(i=>{if("cssRules"in i)try{b(i.cssRules||[]).forEach((a,l)=>{if(a.type===CSSRule.IMPORT_RULE){let s=l+1;const T=$t(a.href).then(v=>Dt(v,o)).then(v=>Ht(v).forEach(Ut=>{try{i.insertRule(Ut,Ut.startsWith("@import")?s+=1:i.cssRules.length)}catch(Io){console.error("Error inserting rule from remote css",{rule:Ut,error:Io})}})).catch(v=>{console.error("Error loading remote css",v.toString())});r.push(T)}})}catch(a){const l=e.find(s=>null==s.href)||document.styleSheets[0];null!=i.href&&r.push($t(i.href).then(s=>Dt(s,o)).then(s=>Ht(s).forEach(u=>{l.insertRule(u,i.cssRules.length)})).catch(s=>{console.error("Error loading remote stylesheet",s)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(e.forEach(i=>{if("cssRules"in i)try{b(i.cssRules||[]).forEach(a=>{n.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${i.href}`,a)}}),n))})).apply(this,arguments)}function Le(e){return e.filter(o=>o.type===CSSRule.FONT_FACE_RULE).filter(o=>Qt(o.style.getPropertyValue("src")))}function ke(e,o){return bt.apply(this,arguments)}function bt(){return(bt=(0,m.Z)(function*(e,o){if(null==e.ownerDocument)throw new Error("Provided element is not within a Document");const n=b(e.ownerDocument.styleSheets);return Le(yield Je(n,o))})).apply(this,arguments)}function Re(e,o){return vt.apply(this,arguments)}function vt(){return(vt=(0,m.Z)(function*(e,o){const n=yield ke(e,o);return(yield Promise.all(n.map(i=>Mt(i.cssText,i.parentStyleSheet?i.parentStyleSheet.href:null,o)))).join("\n")})).apply(this,arguments)}function Qe(e,o){return xt.apply(this,arguments)}function xt(){return(xt=(0,m.Z)(function*(e,o){const n=null!=o.fontEmbedCSS?o.fontEmbedCSS:o.skipFonts?null:yield Re(e,o);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}})).apply(this,arguments)}function Me(e){return yt.apply(this,arguments)}function yt(){return(yt=(0,m.Z)(function*(e,o={}){const{width:n,height:r}=Pt(e,o),i=yield I(e,o,!0);return yield Qe(i,o),yield Gt(i,o),Oe(i,o),yield ae(i,n,r)})).apply(this,arguments)}function S(e){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,m.Z)(function*(e,o={}){const{width:n,height:r}=Pt(e,o),i=yield Me(e,o),a=yield E(i),l=document.createElement("canvas"),s=l.getContext("2d"),u=o.pixelRatio||oe(),T=o.canvasWidth||n,v=o.canvasHeight||r;return l.width=T*u,l.height=v*u,o.skipAutoScale||ne(l),l.style.width=`${T}`,l.style.height=`${v}`,o.backgroundColor&&(s.fillStyle=o.backgroundColor,s.fillRect(0,0,l.width,l.height)),s.drawImage(a,0,0,l.width,l.height),l})).apply(this,arguments)}function Et(){return(Et=(0,m.Z)(function*(e,o={}){const n=yield S(e,o);return yield re(n)})).apply(this,arguments)}var Ye=p(7185),Z=p(2216),Ft=p(7129);class U{constructor(o){this.toastrService=o,this.qrCodeElementType=V.TT.IMG,this.qrCodeErrorCorrectionLevel=V.Jk.HIGH,this.faImage=_.VmB,this.faSave=_.r6l}copyOrSaveQRInfo(o=!0){var n=this;return(0,m.Z)(function*(){const r=document.getElementById("tool-qr-info"),i=r.firstChild;i.innerHTML=n.tool.toolName;const a=yield function Ge(e){return Et.apply(this,arguments)}(r,{backgroundColor:"white"});o?yield navigator.clipboard.write([new ClipboardItem({"image/png":a})]):n.saveQrInfo(a),i.innerHTML="C\xf3digo QR",n.toastrService.success("Imagen copiada al portapapeles")})()}saveQrInfo(o){var n=URL.createObjectURL(o),r=document.createElement("a");r.href=n,r.download=`${this.tool.toolName}.png`,r.click(),r.remove()}static#t=this.\u0275fac=function(n){return new(n||U)(t.Y36(Ye._W))};static#e=this.\u0275cmp=t.Xpm({type:U,selectors:[["app-qr-info"]],inputs:{tool:"tool"},decls:15,vars:8,consts:[["id","tool-qr-info"],[1,"text-center","tool-qr-info--name"],[1,"qr-card"],[1,"text-center",3,"elementType","value","errorCorrectionLevel"],[1,"text-center"],[1,"d-flex","justify-content-center"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[3,"icon"],[1,"btn","btn-sm","btn-outline-primary","ms-2",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"C\xf3digo QR"),t.qZA(),t.TgZ(3,"div",2),t._UZ(4,"ngx-qrcode",3),t.TgZ(5,"p",4),t._uU(6),t.ALo(7,"lastCharacters"),t.qZA()()(),t.TgZ(8,"div",5)(9,"button",6),t.NdJ("click",function(){return r.copyOrSaveQRInfo()}),t._uU(10,"Copiar "),t._UZ(11,"fa-icon",7),t.qZA(),t.TgZ(12,"button",8),t.NdJ("click",function(){return r.copyOrSaveQRInfo(!1)}),t._uU(13,"Guardar "),t._UZ(14,"fa-icon",7),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("elementType",r.qrCodeElementType)("value",r.tool.toolGuid)("errorCorrectionLevel",r.qrCodeErrorCorrectionLevel),t.xp6(2),t.Oqu(t.lcZ(7,6,r.tool.toolGuid)),t.xp6(5),t.Q6J("icon",r.faImage),t.xp6(3),t.Q6J("icon",r.faSave))},dependencies:[Z.BN,V.zF,Ft.$]})}function $e(e,o){if(1&e&&(t.TgZ(0,"div",10)(1,"p")(2,"b"),t._uU(3),t.qZA(),t._uU(4),t.qZA()()),2&e){const n=o.$implicit;t.xp6(3),t.hij("",n.name,":"),t.xp6(1),t.hij(" ",n.measurementUnitSymbol?n.parameterValue+" | "+n.measurementUnitSymbol:n.parameterValue,"")}}function De(e,o){1&e&&t._UZ(0,"app-image-thumbnail",17),2&e&&t.Q6J("appFile",o.$implicit)}function He(e,o){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",3)(2,"div",10)(3,"p")(4,"b"),t._uU(5,"Nombre:"),t.qZA(),t._uU(6),t.qZA()(),t.TgZ(7,"div",10)(8,"p")(9,"b"),t._uU(10,"Estado:"),t.qZA(),t._uU(11),t.qZA()(),t.YNc(12,$e,5,2,"div",11),t.qZA(),t.TgZ(13,"div",12)(14,"h2",7),t._uU(15,"Im\xe1genes"),t.qZA(),t.TgZ(16,"div",13),t.YNc(17,De,1,1,"app-image-thumbnail",14),t.qZA()(),t.TgZ(18,"div",15)(19,"button",16),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.setUpdatingTool(!0))}),t._uU(20,"Editar herramienta"),t.qZA()(),t.BQk()}if(2&e){const n=t.oxw(2);t.xp6(6),t.hij(" ",n.tool.toolName,""),t.xp6(5),t.hij(" ",n.tool.toolState.toolStateName,""),t.xp6(1),t.Q6J("ngForOf",n.tool.toolParameters),t.xp6(5),t.Q6J("ngForOf",n.tool.files)}}function Ve(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"app-edit-tool-form",18),t.NdJ("cancelUpdateToolEvent",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.setUpdatingTool(!1))})("updatedToolEvent",function(i){t.CHM(n);const a=t.oxw(2);return t.KtG(a.onToolUpdated(i))}),t.qZA()}if(2&e){const n=t.oxw(2);t.Q6J("tool",n.tool)}}function ze(e,o){if(1&e&&(t.TgZ(0,"div",1)(1,"h1",2),t._uU(2),t.qZA(),t.TgZ(3,"div",3)(4,"div",4),t._UZ(5,"app-qr-info",5),t.qZA(),t.TgZ(6,"div",6)(7,"h2",7),t._uU(8,"Informaci\xf3n general"),t.qZA(),t.YNc(9,He,21,4,"ng-container",8),t.YNc(10,Ve,1,1,"app-edit-tool-form",9),t.qZA()()()),2&e){const n=t.oxw();t.xp6(2),t.Oqu(n.tool.toolName),t.xp6(3),t.Q6J("tool",n.tool),t.xp6(4),t.Q6J("ngIf",!n.updatingTool),t.xp6(1),t.Q6J("ngIf",n.updatingTool)}}class N{constructor(o,n){this.route=o,this.httpService=n,this.updatingTool=!1}ngOnInit(){this.getTool()}getTool(){const o=this.route.snapshot.paramMap.get("id");this.httpService.get(`${h.G8.toolsApi}/${o}`).subscribe(n=>this.tool=n)}setUpdatingTool(o){this.updatingTool=o}onToolUpdated(o){this.httpService.put(h.G8.toolsApi,o).subscribe(n=>{this.tool=n,this.updatingTool=!1})}static#t=this.\u0275fac=function(n){return new(n||N)(t.Y36(x.gz),t.Y36(y.O))};static#e=this.\u0275cmp=t.Xpm({type:N,selectors:[["app-tool-detail"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"text-center","mt-3"],[1,"row","mt-3"],[1,"col-sm-4"],[3,"tool"],[1,"col-sm-8"],[1,"text-center"],[4,"ngIf"],[3,"tool","cancelUpdateToolEvent","updatedToolEvent",4,"ngIf"],[1,"col-sm-6"],["class","col-sm-6",4,"ngFor","ngForOf"],[1,"row-mt-3"],[1,"d-flex","gap-2"],[3,"appFile",4,"ngFor","ngForOf"],[1,"mt-3"],["type","button",1,"btn","btn-outline-primary",3,"click"],[3,"appFile"],[3,"tool","cancelUpdateToolEvent","updatedToolEvent"]],template:function(n,r){1&n&&t.YNc(0,ze,11,4,"div",0),2&n&&t.Q6J("ngIf",r.tool)},dependencies:[d.sg,d.O5,w,A,U]})}var P=p(9453);function je(e,o){if(1&e&&(t.TgZ(0,"form",9)(1,"div",10)(2,"label",11),t._uU(3,"Nombre"),t.qZA(),t._UZ(4,"input",12),t.qZA()()),2&e){const n=t.oxw();t.Q6J("formGroup",n.addToolForm)}}class q{constructor(o,n,r){this.activeModal=o,this.fb=n,this.httpService=r,this.toolAddedEvent=new t.vpe}ngOnInit(){this.initForm()}initForm(){this.addToolForm=this.fb.group({toolName:["",c.kI.required]})}onSubmit(){this.httpService.post("Tools",{toolName:this.addToolForm?.controls.toolName.value}).subscribe(()=>this.activeModal.close(!0))}static#t=this.\u0275fac=function(n){return new(n||q)(t.Y36(P.Kz),t.Y36(c.qu),t.Y36(y.O))};static#e=this.\u0275cmp=t.Xpm({type:q,selectors:[["app-add-tool-modal"]],outputs:{toolAddedEvent:"toolAddedEvent"},decls:13,vars:2,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[3,"formGroup",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"btn","btn-outline-primary",3,"disabled","click"],[3,"formGroup"],[1,"mb-3"],["for","toolName",1,"form-label"],["type","text","id","toolName","formControlName","toolName",1,"form-control"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Agregar Nueva herramienta"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return r.activeModal.close(!1)}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4),t.YNc(7,je,5,1,"form",5),t.qZA(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return r.activeModal.close(!1)}),t._uU(10,"Cancelar"),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){return r.addToolForm.valid&&r.onSubmit()}),t._uU(12,"Guardar"),t.qZA()()),2&n&&(t.xp6(7),t.Q6J("ngIf",r.addToolForm),t.xp6(4),t.Q6J("disabled",!r.addToolForm.valid))},dependencies:[d.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u]})}var Vt=p(1875);function Be(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"No hay herramientas seleccionadas"),t.qZA())}function Ke(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"lastCharacters"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._UZ(7,"fa-icon",4),t.TgZ(8,"fa-icon",5),t.NdJ("click",function(){const a=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.onDeleteTool(a))}),t.qZA()()()}if(2&e){const n=o.$implicit,r=t.oxw(2);t.xp6(2),t.Oqu(t.xi3(3,4,n.toolGuid,6)),t.xp6(3),t.Oqu(n.toolName),t.xp6(2),t.Q6J("icon",r.faCircleInfo),t.xp6(1),t.Q6J("icon",r.faTrash)}}function We(e,o){if(1&e&&(t.TgZ(0,"table",2)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Id"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Nombre"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Acciones"),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,Ke,9,7,"tr",3),t.qZA()()),2&e){const n=t.oxw();t.xp6(10),t.Q6J("ngForOf",n.tools)}}class O{constructor(){this.faTrash=_.$aW,this.faCircleInfo=_.DBf,this.deleteToolEvent=new t.vpe}onDeleteTool(o){this.deleteToolEvent.emit(o)}static#t=this.\u0275fac=function(n){return new(n||O)};static#e=this.\u0275cmp=t.Xpm({type:O,selectors:[["app-selected-tools-list"]],inputs:{tools:"tools"},outputs:{deleteToolEvent:"deleteToolEvent"},decls:2,vars:2,consts:[[4,"ngIf"],["class","table",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["role","button",1,"me-2",3,"icon"],["role","button",1,"text-danger",3,"icon","click"]],template:function(n,r){1&n&&(t.YNc(0,Be,2,0,"p",0),t.YNc(1,We,11,1,"table",1)),2&n&&(t.Q6J("ngIf",!r.tools||r.tools&&!r.tools.length),t.xp6(1),t.Q6J("ngIf",r.tools&&r.tools.length))},dependencies:[d.sg,d.O5,Z.BN,Ft.$]})}function Xe(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"No hay herramientas disponibles"),t.qZA())}function to(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"lastCharacters"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._UZ(7,"fa-icon",4),t.TgZ(8,"fa-icon",5),t.NdJ("click",function(){const a=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.onSelectTool(a))}),t.qZA()()()}if(2&e){const n=o.$implicit,r=t.oxw(2);t.xp6(2),t.Oqu(t.xi3(3,4,n.toolGuid,6)),t.xp6(3),t.Oqu(n.toolName),t.xp6(2),t.Q6J("icon",r.faCircleInfo),t.xp6(1),t.Q6J("icon",r.faPlus)}}function eo(e,o){if(1&e&&(t.TgZ(0,"table",2)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Id"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Nombre"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Acciones"),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,to,9,7,"tr",3),t.qZA()()),2&e){const n=t.oxw();t.xp6(10),t.Q6J("ngForOf",n.tools)}}class J{constructor(){this.faPlus=_.r8p,this.faCircleInfo=_.DBf,this.selectToolEvent=new t.vpe}onSelectTool(o){this.selectToolEvent.emit(o)}static#t=this.\u0275fac=function(n){return new(n||J)};static#e=this.\u0275cmp=t.Xpm({type:J,selectors:[["app-available-tools-list"]],inputs:{tools:"tools"},outputs:{selectToolEvent:"selectToolEvent"},decls:2,vars:2,consts:[[4,"ngIf"],["class","table",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["role","button",1,"me-2",3,"icon"],["role","button",1,"text-primary",3,"icon","click"]],template:function(n,r){1&n&&(t.YNc(0,Xe,2,0,"p",0),t.YNc(1,eo,11,1,"table",1)),2&n&&(t.Q6J("ngIf",r.tools&&!r.tools.length),t.xp6(1),t.Q6J("ngIf",r.tools&&r.tools.length))},dependencies:[d.sg,d.O5,Z.BN,Ft.$]})}var zt=p(7281);function oo(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",15)(1,"div",12)(2,"label",16),t._uU(3,"Responsable"),t.qZA(),t.TgZ(4,"app-dropdown",17),t.NdJ("onSelectOptionEvent",function(i){t.CHM(n);const a=t.oxw(2);return t.KtG(a.onSelectResponsible(i))}),t.ALo(5,"toDropdownItem"),t.qZA()()()}if(2&e){const n=t.oxw(2);t.xp6(4),t.Q6J("options",t.xi3(5,1,n.employees,"user"))}}function no(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"form",9),t.YNc(1,oo,6,4,"div",10),t.TgZ(2,"div",11)(3,"div",12)(4,"h5"),t._uU(5,"Herramientas seleccionadas"),t.qZA(),t.TgZ(6,"app-selected-tools-list",13),t.NdJ("deleteToolEvent",function(i){t.CHM(n);const a=t.oxw();return t.KtG(a.onDeleteTool(i))}),t.qZA()()(),t.TgZ(7,"div",11)(8,"div",12)(9,"h5"),t._uU(10,"Listado de herramientas"),t.qZA(),t.TgZ(11,"app-available-tools-list",14),t.NdJ("selectToolEvent",function(i){t.CHM(n);const a=t.oxw();return t.KtG(a.onSelectTool(i))}),t.qZA()()()()}if(2&e){const n=t.oxw();t.Q6J("formGroup",n.registerOutputForm),t.xp6(1),t.Q6J("ngIf",n.employees),t.xp6(5),t.Q6J("tools",n.selectedTools),t.xp6(5),t.Q6J("tools",n.availableTools)}}class L{constructor(o,n,r){this.activeModal=o,this.httpService=n,this.fb=r,this.availableTools=[],this.selectedTools=[]}ngOnInit(){this.initForm(),this.getEmployees(),this.getTools()}getEmployees(){this.httpService.get("Users/employees").subscribe(o=>this.employees=o)}getTools(){this.httpService.get("Tools/available-tools").subscribe(o=>this.availableTools=o)}onSelectTool(o){this.availableTools=this.availableTools?.filter(n=>n.toolId!=o.toolId),this.selectedTools?.push(o),this.registerOutputForm.controls.tools.patchValue(this.selectedTools)}onDeleteTool(o){this.selectedTools=this.selectedTools.filter(n=>n.toolId!=o.toolId),this.availableTools.push(o),this.registerOutputForm.controls.tools.patchValue(this.selectedTools)}initForm(){this.registerOutputForm=this.fb.group({responsible:[null,c.kI.required],tools:[null,c.kI.required]})}registerOutput(){this.httpService.post(h.G8.toolOutputsApi,this.registerOutputForm?.value).subscribe(()=>this.activeModal.close(!0))}onSelectResponsible(o){this.responsible=this.employees.find(n=>n.userId==o.id),this.registerOutputForm.controls.responsible.setValue({...this.responsible})}static#t=this.\u0275fac=function(n){return new(n||L)(t.Y36(P.Kz),t.Y36(y.O),t.Y36(c.qu))};static#e=this.\u0275cmp=t.Xpm({type:L,selectors:[["app-add-tools-output-modal"]],decls:13,vars:2,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[3,"formGroup",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[1,"btn","btn-outline-primary","ms-2",3,"disabled","click"],[3,"formGroup"],["class","row",4,"ngIf"],[1,"row","mt-3"],[1,"col"],[3,"tools","deleteToolEvent"],[3,"tools","selectToolEvent"],[1,"row"],["for","responsible",1,"form-label"],[1,"d-block",3,"options","onSelectOptionEvent"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Registrar nueva salida"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return r.activeModal.close()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4),t.YNc(7,no,12,4,"form",5),t.qZA(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return r.activeModal.close()}),t._uU(10,"Cerrar"),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){return r.registerOutput()}),t._uU(12,"Guardar"),t.qZA()()),2&n&&(t.xp6(7),t.Q6J("ngIf",r.registerOutputForm),t.xp6(4),t.Q6J("disabled",!r.registerOutputForm.valid))},dependencies:[d.O5,c._Y,c.JL,c.sg,Vt.J,O,J,zt.s]})}function ro(e,o){1&e&&(t.TgZ(0,"p",5),t._uU(1,"No se han registrado usuarios a\xfan."),t.qZA())}const io=function(e){return[e]};function ao(e,o){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"a",8),t._UZ(7,"fa-icon",9),t.qZA()()()),2&e){const n=o.$implicit,r=t.oxw(3);t.xp6(2),t.hij(" ",n.toolName," "),t.xp6(2),t.hij(" ",n.toolState.toolStateName," "),t.xp6(2),t.Q6J("routerLink",t.VKq(4,io,n.toolId)),t.xp6(1),t.Q6J("icon",r.faCircleInfo)}}function lo(e,o){if(1&e&&(t.TgZ(0,"table",6)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Nombre"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Estado"),t.qZA(),t._UZ(7,"th"),t.qZA()(),t.TgZ(8,"tbody"),t.YNc(9,ao,8,6,"tr",7),t.qZA()()),2&e){const n=t.oxw(2);t.xp6(9),t.Q6J("ngForOf",n.tools)}}function so(e,o){if(1&e&&(t.TgZ(0,"div",1)(1,"div",2),t.YNc(2,ro,2,0,"p",3),t.YNc(3,lo,10,1,"table",4),t.qZA()()),2&e){const n=t.oxw();t.xp6(2),t.Q6J("ngIf",!n.tools.length),t.xp6(1),t.Q6J("ngIf",n.tools.length)}}class k{constructor(){this.faPen=_.IwR,this.faTrash=_.$aW,this.faCircleInfo=_.DBf}static#t=this.\u0275fac=function(n){return new(n||k)};static#e=this.\u0275cmp=t.Xpm({type:k,selectors:[["app-tools-list"]],inputs:{tools:"tools"},decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col"],["class","text-center",4,"ngIf"],["class","table",4,"ngIf"],[1,"text-center"],[1,"table"],[4,"ngFor","ngForOf"],[3,"routerLink"],["role","button",1,"me-2","text-primary",3,"icon"]],template:function(n,r){1&n&&t.YNc(0,so,4,2,"div",0),2&n&&t.Q6J("ngIf",r.tools)},dependencies:[d.sg,d.O5,x.rH,Z.BN]})}class R{transform(o,...n){return 1==o.toolOutputStateId?"Abierto":"Cerrado"}static#t=this.\u0275fac=function(n){return new(n||R)};static#e=this.\u0275pipe=t.Yjl({name:"outputToolState",type:R,pure:!0})}function co(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"No hay salidas de herramienta registradas. "),t.qZA())}function uo(e,o){if(1&e&&(t.TgZ(0,"tr")(1,"td")(2,"a",6),t._uU(3),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"outputToolState"),t.qZA()()),2&e){const n=o.$implicit,r=t.oxw(2);t.xp6(2),t.Q6J("routerLink","/"+r.routeConstants.toolOutput+"/"+n.toolOutputId),t.xp6(1),t.hij(" ",n.toolOutputId," "),t.xp6(2),t.Oqu(t.xi3(6,5,n.outputDateTime,"dd/MM/YYYY")),t.xp6(3),t.Oqu(n.responsible.name),t.xp6(2),t.hij(" ",t.lcZ(11,8,n.toolOutputState)," ")}}function mo(e,o){if(1&e&&(t.TgZ(0,"table",4)(1,"thead")(2,"tr")(3,"th"),t._uU(4," Id "),t.qZA(),t.TgZ(5,"th"),t._uU(6," Fecha de salida "),t.qZA(),t.TgZ(7,"th"),t._uU(8," Responsable "),t.qZA(),t.TgZ(9,"th"),t._uU(10," Estado "),t.qZA()()(),t.TgZ(11,"tbody"),t.YNc(12,uo,12,10,"tr",5),t.qZA()()),2&e){const n=t.oxw();t.xp6(12),t.Q6J("ngForOf",n.toolOutputs)}}class Q{constructor(){this.routeConstants=h.p7}static#t=this.\u0275fac=function(n){return new(n||Q)};static#e=this.\u0275cmp=t.Xpm({type:Q,selectors:[["app-tool-outputs-list"]],inputs:{toolOutputs:"toolOutputs"},decls:5,vars:2,consts:[[1,"row","mt-3"],[1,"col"],[4,"ngIf","ngIfElse"],["noToolsOutput",""],[1,"table","mt-4"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(n,r){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,co,2,0,"p",2),t.YNc(3,mo,13,1,"ng-template",null,3,t.W1O),t.qZA()()),2&n){const i=t.MAs(4);t.xp6(2),t.Q6J("ngIf",!r.toolOutputs||!r.toolOutputs.length)("ngIfElse",i)}},dependencies:[d.sg,d.O5,x.rH,d.uU,R]})}class M{constructor(o,n){this.modalService=o,this.httpService=n,this.routeConstants=h.p7}ngOnInit(){this.getToolsList(),this.getToolOutputs()}onOpenAddToolModal(){this.modalRef=this.modalService.open(q),this.modalRef.closed.subscribe(o=>{o&&this.getToolsList()})}getToolsList(){this.httpService.get("Tools").subscribe(o=>this.tools=o)}getToolOutputs(){this.httpService.get(h.G8.toolOutputsApi).subscribe(o=>this.toolOutputs=o)}openAddToolOutputModal(){this.modalRef=this.modalService.open(L,{size:"lg",scrollable:!0}),this.modalRef.closed.subscribe(()=>this.getToolOutputs())}static#t=this.\u0275fac=function(n){return new(n||M)(t.Y36(P.FF),t.Y36(y.O))};static#e=this.\u0275cmp=t.Xpm({type:M,selectors:[["app-tools-management"]],decls:17,vars:3,consts:[[1,"container"],[1,"text-center","mt-3"],[3,"tools"],[1,"text-center"],[1,"btn","btn-outline-primary",3,"routerLink"],[1,"mt-5"],[3,"toolOutputs"],[1,"btn","btn-outline-primary",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Administraci\xf3n de equipos y herramienta"),t.qZA(),t.TgZ(3,"section")(4,"h2",1),t._uU(5,"Inventario"),t.qZA(),t._UZ(6,"app-tools-list",2),t.TgZ(7,"div",3)(8,"a",4),t._uU(9,"Agregar nuevo elemento"),t.qZA()()(),t.TgZ(10,"section",5)(11,"h2",3),t._uU(12,"Salidas de herramienta"),t.qZA(),t._UZ(13,"app-tool-outputs-list",6),t.TgZ(14,"div",3)(15,"button",7),t.NdJ("click",function(){return r.openAddToolOutputModal()}),t._uU(16,"Agregar nueva elemento"),t.qZA()()()()),2&n&&(t.xp6(6),t.Q6J("tools",r.tools),t.xp6(2),t.Q6J("routerLink",r.routeConstants.addToolPath),t.xp6(5),t.Q6J("toolOutputs",r.toolOutputs))},dependencies:[x.rH,k,Q]})}var po=p(3366);function fo(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",14)(1,"app-dropdown",15),t.NdJ("onSelectOptionEvent",function(i){t.CHM(n);const a=t.oxw();return t.KtG(a.onSelectOption(i))}),t.ALo(2,"toDropdownItem"),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("options",t.xi3(2,2,n.measurementUnits,"measurementUnits"))("label","Unidad de medida")}}class G{constructor(o,n){this.fb=o,this.httpService=n,this.faCheck=_.LEp,this.faX=_.EOp,this.cancelEvent=new t.vpe,this.addNewParameterEvent=new t.vpe}ngOnInit(){this.getMeasurementUnits(),this.initForm()}initForm(){this.addParameterForm=this.fb.group({parameterName:[null,c.kI.required],measurementUnitId:[null,c.kI.required],measurementUnitSymbol:[null,c.kI.required],parameterValue:[null,c.kI.required]})}getMeasurementUnits(){this.httpService.get(h.G8.measurementUnitsApi).subscribe(o=>this.measurementUnits=o)}onSelectOption(o){const n=this.measurementUnits.find(r=>r.measurementUnitId==o.id);this.addParameterForm.patchValue({measurementUnitId:n.measurementUnitId,measurementUnitSymbol:n.symbol})}addNewParameter(){!this.addParameterForm.valid||this.addNewParameterEvent.emit({name:this.addParameterForm.controls.parameterName.value,measurementUnitId:this.addParameterForm.controls.measurementUnitId.value,measurementUnitSymbol:this.addParameterForm.controls.measurementUnitSymbol.value,parameterValue:this.addParameterForm.controls.parameterValue.value})}static#t=this.\u0275fac=function(n){return new(n||G)(t.Y36(c.qu),t.Y36(y.O))};static#e=this.\u0275cmp=t.Xpm({type:G,selectors:[["app-add-new-parameter"]],outputs:{cancelEvent:"cancelEvent",addNewParameterEvent:"addNewParameterEvent"},decls:18,vars:5,consts:[[3,"formGroup"],[1,"row"],[1,"text-center"],[1,"col-lg-3","col-md-5"],["for","parameterName",1,"form-label"],["type","text","id","parameterName","formControlName","parameterName",1,"form-control"],["class","col-md-3",4,"ngIf"],[1,"col-lg-3","col-md-2"],["for","parameterValue",1,"form-label"],["type","text","id","parameterValue","formControlName","parameterValue",1,"form-control"],[1,"col-lg-3","col-md-2","action-buttons"],["type","button",1,"btn","btn-outline-success","me-2",3,"disabled","click"],[3,"icon"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"col-md-3"],[3,"options","label","onSelectOptionEvent"]],template:function(n,r){1&n&&(t.TgZ(0,"form",0)(1,"div",1)(2,"h2",2),t._uU(3,"Nuevo par\xe1metero"),t.qZA(),t.TgZ(4,"div",3)(5,"label",4),t._uU(6,"Nombre del par\xe1metro"),t.qZA(),t._UZ(7,"input",5),t.qZA(),t.YNc(8,fo,3,5,"div",6),t.TgZ(9,"div",7)(10,"label",8),t._uU(11,"Valor"),t.qZA(),t._UZ(12,"input",9),t.qZA(),t.TgZ(13,"div",10)(14,"button",11),t.NdJ("click",function(){return r.addNewParameter()}),t._UZ(15,"fa-icon",12),t.qZA(),t.TgZ(16,"button",13),t.NdJ("click",function(){return r.cancelEvent.emit()}),t._UZ(17,"fa-icon",12),t.qZA()()()()),2&n&&(t.Q6J("formGroup",r.addParameterForm),t.xp6(8),t.Q6J("ngIf",r.measurementUnits),t.xp6(6),t.Q6J("disabled",!r.addParameterForm.valid),t.xp6(1),t.Q6J("icon",r.faCheck),t.xp6(2),t.Q6J("icon",r.faX))},dependencies:[d.O5,Z.BN,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,Vt.J,zt.s],styles:[".action-buttons[_ngcontent-%COMP%]{padding-top:2rem}"]})}function _o(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"form",1)(1,"div",2)(2,"h2",3),t._uU(3,"Configurar par\xe1metero"),t.qZA(),t.TgZ(4,"div",4)(5,"label",5),t._uU(6,"Nombre del par\xe1metro"),t.qZA(),t._UZ(7,"input",6),t.qZA(),t.TgZ(8,"div",7)(9,"label",5),t._uU(10,"Unidad de medida"),t.qZA(),t._UZ(11,"input",6),t.qZA(),t.TgZ(12,"div",8)(13,"label",9),t._uU(14,"Valor"),t.qZA(),t._UZ(15,"input",10),t.qZA(),t.TgZ(16,"div",11)(17,"button",12),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.setParameterValue())}),t._UZ(18,"fa-icon",13),t.qZA(),t.TgZ(19,"button",14),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.cancelEvent.emit())}),t._UZ(20,"fa-icon",13),t.qZA()()()()}if(2&e){const n=t.oxw();t.Q6J("formGroup",n.setParameterForm),t.xp6(7),t.Q6J("value",n.toolParameter.name),t.xp6(4),t.Q6J("value",n.toolParameter.measurementUnitSymbol),t.xp6(6),t.Q6J("disabled",!n.setParameterForm.valid),t.xp6(1),t.Q6J("icon",n.faCheck),t.xp6(2),t.Q6J("icon",n.faX)}}class Y{constructor(o){this.fb=o,this.faCheck=_.LEp,this.faX=_.EOp,this.cancelEvent=new t.vpe,this.setParameterEvent=new t.vpe}ngOnInit(){this.initForm()}initForm(){this.setParameterForm=this.fb.group({parameterValue:[null,c.kI.required]})}setParameterValue(){!this.setParameterForm.valid||this.setParameterEvent.emit({id:this.toolParameter.id,measurementUnitId:this.toolParameter.measurementUnitId,measurementUnitSymbol:this.toolParameter.measurementUnitSymbol,name:this.toolParameter.name,parameterValue:this.setParameterForm.controls.parameterValue.value})}static#t=this.\u0275fac=function(n){return new(n||Y)(t.Y36(c.qu))};static#e=this.\u0275cmp=t.Xpm({type:Y,selectors:[["app-set-parameter"]],inputs:{toolParameter:"toolParameter"},outputs:{cancelEvent:"cancelEvent",setParameterEvent:"setParameterEvent"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"text-center"],[1,"col-lg-3","col-md-5"],[1,"form-label"],["type","text","disabled","",1,"form-control",3,"value"],[1,"col-md-3"],[1,"col-lg-3","col-md-2"],["for","parameterValue",1,"form-label"],["type","text","id","parameterValue","formControlName","parameterValue",1,"form-control"],[1,"col-lg-3","col-md-2","action-buttons"],["type","button",1,"btn","btn-outline-success","me-2",3,"disabled","click"],[3,"icon"],["type","button",1,"btn","btn-outline-danger",3,"click"]],template:function(n,r){1&n&&t.YNc(0,_o,21,6,"form",0),2&n&&t.Q6J("ngIf",r.toolParameter)},dependencies:[d.O5,Z.BN,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u],styles:[".action-buttons[_ngcontent-%COMP%]{padding-top:2rem}"]})}var St=p(1894),go=p(5090);function ho(e,o){if(1&e&&(t.TgZ(0,"div",15)(1,"label",16),t._uU(2),t.qZA(),t._UZ(3,"input",17),t.qZA()),2&e){const n=o.$implicit;t.xp6(2),t.Oqu(n.name),t.xp6(1),t.Q6J("value",n.parameterValue+" | "+n.measurementUnitSymbol)}}function To(e,o){if(1&e&&(t.TgZ(0,"div",12)(1,"h2",13),t._uU(2,"Par\xe1metros a\xf1adidos"),t.qZA(),t.YNc(3,ho,4,2,"div",14),t.qZA()),2&e){const n=t.oxw();t.xp6(3),t.Q6J("ngForOf",n.tool.toolParameters)}}function bo(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",1)(1,"button",18),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.initAdditionalInformation())}),t._uU(2,"Agregar informaci\xf3n adicional"),t.qZA(),t.TgZ(3,"button",19),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.addNewTool())}),t._uU(4,"Guardar"),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(3),t.Q6J("disabled",!n.addNewToolForm.valid)}}function vo(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",12)(1,"div",23)(2,"app-dropdown-input",24),t.NdJ("selectItemEvent",function(i){t.CHM(n);const a=t.oxw(2);return t.KtG(a.setExistingParameter(i))})("addNewItemEvent",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.setIsAddingNewParameter(!0))}),t.ALo(3,"toItemList"),t.qZA(),t.TgZ(4,"div")(5,"button",25),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.setIsAddingAdditionalInfo(!1))}),t._uU(6,"Cancelar"),t.qZA()()()()}if(2&e){const n=t.oxw(2);t.xp6(2),t.Q6J("buttonText","Seleccionar nuevo par\xe1metro")("options",t.xi3(3,3,n.toolParameters,"toolParameter"))("showAddNewItemButton",!0)}}function xo(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"app-set-parameter",26),t.NdJ("cancelEvent",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.setIsAddingExistingParameter(!1))})("setParameterEvent",function(i){t.CHM(n);const a=t.oxw(2);return t.KtG(a.onAddParameter(i))}),t.qZA()}if(2&e){const n=t.oxw(2);t.Q6J("toolParameter",n.tempParameter)}}function yo(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"app-add-new-parameter",27),t.NdJ("cancelEvent",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.setIsAddingNewParameter(!1))})("addNewParameterEvent",function(i){t.CHM(n);const a=t.oxw(2);return t.KtG(a.onAddParameter(i))}),t.qZA()}}function Zo(e,o){if(1&e&&(t.YNc(0,vo,7,6,"div",7),t.TgZ(1,"div",12)(2,"div",20),t.YNc(3,xo,1,1,"app-set-parameter",21),t.YNc(4,yo,1,0,"app-add-new-parameter",22),t.qZA()()),2&e){const n=t.oxw();t.Q6J("ngIf",!n.isAddingExistingParameter&&!n.isAddingNewParameter),t.xp6(3),t.Q6J("ngIf",n.isAddingExistingParameter),t.xp6(1),t.Q6J("ngIf",n.isAddingNewParameter)}}function wo(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"ngx-dropzone-image-preview",30),t.NdJ("removed",function(){const a=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.onRemoveFile(a))}),t.qZA()}2&e&&t.Q6J("file",o.$implicit)("removable",!0)}function Ao(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"ngx-dropzone",28),t.NdJ("change",function(i){t.CHM(n);const a=t.oxw();return t.KtG(a.onSelectFile(i))}),t.TgZ(1,"ngx-dropzone-label"),t._uU(2,"Haga click o arrastre hasta aqu\xed para a\xf1adir archivos"),t.qZA(),t.YNc(3,wo,1,2,"ngx-dropzone-image-preview",29),t.qZA()}if(2&e){const n=t.oxw();t.Q6J("accept","image/*"),t.xp6(3),t.Q6J("ngForOf",n.addNewToolForm.controls.files.value)}}class ${constructor(o,n,r,i){this.fb=o,this.httpService=n,this.router=r,this.modalService=i,this.isAddingAdditionalInfo=!1,this.isAddingExistingParameter=!1,this.isAddingNewParameter=!1}ngOnInit(){this.initForm(),this.getToolParameters()}getToolParameters(){this.httpService.get(h.G8.toolParametersApi).subscribe(o=>this.toolParameters=o)}initForm(){this.addNewToolForm=this.fb.group({toolName:[null,c.kI.required],files:[new Array]})}onAddParameter(o){this.addToolParameter(o),this.setIsAddingAdditionalInfo(!1)}addToolParameter(o){const n={id:o.id||void 0,name:o.name,measurementUnitId:o.measurementUnitId,measurementUnitSymbol:o.measurementUnitSymbol,parameterValue:o.parameterValue};this.tool&&this.tool.toolParameters?this.tool.toolParameters.push(n):this.tool={...this.tool,toolParameters:[n]}}addNewTool(){if(!this.addNewToolForm.valid)return;const o=this.addNewToolForm.controls.files.value,n=new FormData;n.append("name",this.addNewToolForm.controls.toolName.value),n.append("toolParameters",JSON.stringify(this.tool.toolParameters)),o.map(r=>n.append("files",r)),this.httpService.post(h.G8.toolsApi,n).subscribe(()=>this.router.navigateByUrl(`/${h.p7.toolsPath}`))}initAdditionalInformation(){this.setIsAddingAdditionalInfo(!0),this.setIsAddingExistingParameter(!1),this.setIsAddingNewParameter(!1)}setIsAddingAdditionalInfo(o){this.isAddingAdditionalInfo=o}setIsAddingExistingParameter(o){this.isAddingExistingParameter=o}setIsAddingNewParameter(o){this.isAddingNewParameter=o}setExistingParameter(o){this.tempParameter=this.toolParameters.find(n=>n.id==o.id),this.setIsAddingExistingParameter(!0)}onSelectFile(o){const n=this.addNewToolForm.controls.files.value;n.push(...o.addedFiles),this.addNewToolForm.patchValue({files:n})}onRemoveFile(o){if(!this.addNewToolForm.controls.files.value)return;const r=this.addNewToolForm.controls.files.value.filter(i=>i.name!=o.name);this.addNewToolForm.patchValue({files:r})}static#t=this.\u0275fac=function(n){return new(n||$)(t.Y36(c.qu),t.Y36(y.O),t.Y36(x.F0),t.Y36(P.FF))};static#e=this.\u0275cmp=t.Xpm({type:$,selectors:[["app-add-new-tool"]],decls:17,vars:5,consts:[[1,"container"],[1,"text-center","mt-3"],[3,"formGroup"],[1,"row","justify-content-center"],[1,"col-lg-4","col-sm-6"],["for","toolName",1,"form-label"],["type","text","id","toolName","formControlName","toolName",1,"form-control"],["class","row mt-3",4,"ngIf"],["class","text-center mt-3",4,"ngIf","ngIfElse"],["addingAdditionalInfo",""],[1,"row"],[3,"accept","change",4,"ngIf"],[1,"row","mt-3"],[1,"text-center"],["class","col-lg-3 col-md-4 col-sm-6",4,"ngFor","ngForOf"],[1,"col-lg-3","col-md-4","col-sm-6"],[1,"form-label"],["type","text","disabled","",1,"form-control",3,"value"],[1,"btn","btn-outline-primary","ms-2",3,"click"],[1,"btn","btn-outline-primary","ms-2",3,"disabled","click"],[1,"col"],[3,"toolParameter","cancelEvent","setParameterEvent",4,"ngIf"],[3,"cancelEvent","addNewParameterEvent",4,"ngIf"],[1,"col","d-flex","justify-content-center"],[3,"buttonText","options","showAddNewItemButton","selectItemEvent","addNewItemEvent"],[1,"btn","btn-outline-danger","ms-2",3,"click"],[3,"toolParameter","cancelEvent","setParameterEvent"],[3,"cancelEvent","addNewParameterEvent"],[3,"accept","change"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngFor","ngForOf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed"]],template:function(n,r){if(1&n&&(t.TgZ(0,"section",0)(1,"h1",1),t._uU(2,"Agregar nuevo equipo o herramienta"),t.qZA(),t.TgZ(3,"form",2)(4,"div",3)(5,"div",4)(6,"label",5),t._uU(7,"Nombre"),t.qZA(),t._UZ(8,"input",6),t.qZA()(),t.YNc(9,To,4,1,"div",7),t.YNc(10,bo,5,1,"div",8),t.YNc(11,Zo,5,3,"ng-template",null,9,t.W1O),t.TgZ(13,"div",10)(14,"h2",1),t._uU(15,"A\xf1adir im\xe1genes"),t.qZA(),t.YNc(16,Ao,4,2,"ngx-dropzone",11),t.qZA()()()),2&n){const i=t.MAs(12);t.xp6(3),t.Q6J("formGroup",r.addNewToolForm),t.xp6(6),t.Q6J("ngIf",r.tool&&r.tool.toolParameters&&r.tool.toolParameters.length),t.xp6(1),t.Q6J("ngIf",!r.isAddingAdditionalInfo)("ngIfElse",i),t.xp6(6),t.Q6J("ngIf",r.addNewToolForm)}},dependencies:[d.sg,d.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,po.i,G,Y,St._f,St.NP,St.sv,go.R]})}const Co=[{path:"",component:M},{path:"add-tool",component:$},{path:":id",component:N}];class D{static#t=this.\u0275fac=function(n){return new(n||D)};static#e=this.\u0275mod=t.oAB({type:D});static#o=this.\u0275inj=t.cJS({imports:[x.Bz.forChild(Co),x.Bz]})}var Eo=p(6619);class H{static#t=this.\u0275fac=function(n){return new(n||H)};static#e=this.\u0275mod=t.oAB({type:H});static#o=this.\u0275inj=t.cJS({imports:[d.ez,D,Eo.m]})}}}]);