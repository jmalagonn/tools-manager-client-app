"use strict";(self.webpackChunkToolsManagerClientApp=self.webpackChunkToolsManagerClientApp||[]).push([[840],{7323:(T,f,m)=>{m.d(f,{G:()=>a});class a{static#t=this.accountLogin="Account/login";static#e=this.addUserApi="Users/addUser";static#n=this.branchesApi="Branches";static#o=this.customersApi="Customers";static#i=this.equipmentApi="Equipment";static#r=this.equipmentParametersApi="Equipment/parameters";static#a=this.measurementUnitsApi="MeasurementUnits";static#s=this.userApi="Users";static#c=this.userEmployeeApi="Users/employee";static#m=this.userEmployeesApi="Users/employees";static#l=this.userRolesApi="UserRole";static#p=this.workItemApi="WorkItem";static#d=this.workOrderApi="WorkOrder";static#_=this.workOrderActivity=`${this.workOrderApi}/activity`;static#u=this.workOrderTypesApi=`${this.workOrderApi}/workOrderTypes`;static#g=this.workOrderTypeApi=`${this.workOrderApi}/workOrderType`;static#f=this.workOrderFilesApi=`${this.workOrderApi}/workOrderFiles`;static#h=this.toolsApi="Tools";static#T=this.toolParametersApi="Tools/parameters";static#b=this.toolOutputsApi="ToolOutputs";static#C=this.workStateApi="WorkState"}},9127:(T,f,m)=>{m.d(f,{I:()=>_});var a=m(6895),u=m(1571);class _{static#t=this.\u0275fac=function(r){return new(r||_)};static#e=this.\u0275mod=u.oAB({type:_});static#n=this.\u0275inj=u.cJS({imports:[a.ez]})}},840:(T,f,m)=>{m.r(f),m.d(f,{GeneralSettingsModule:()=>E});var a=m(6895),u=m(6619),_=m(9127),h=m(8869),t=m(1571),r=m(433),p=m(2687),d=m(7323),g=m(9453);class c{constructor(n){this.activeModal=n}static#t=this.\u0275fac=function(e){return new(e||c)(t.Y36(g.Kz))};static#e=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-delete-modal"]],decls:10,vars:0,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return o.activeModal.dismiss(!1)}),t.qZA()(),t.TgZ(2,"div",2)(3,"p"),t._uU(4,"\xbfEst\xe1 seguro que desea eliminar ese elemento?"),t.qZA()(),t.TgZ(5,"div",3)(6,"button",4),t.NdJ("click",function(){return o.activeModal.close(!1)}),t._uU(7,"Close"),t.qZA(),t.TgZ(8,"button",5),t.NdJ("click",function(){return o.activeModal.close(!0)}),t._uU(9,"Eliminar"),t.qZA()())}})}var b=m(5307),C=m(7185),w=m(2216);function J(s,n){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",0)(4,"fa-icon",9),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.onClickEditButton(i))}),t.qZA(),t.TgZ(5,"fa-icon",10),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.onClickTrashButton(i))}),t.qZA()(),t.BQk()}if(2&s){const e=t.oxw().$implicit,o=t.oxw();t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("icon",o.faEdit),t.xp6(1),t.Q6J("icon",o.faTrash)}}function S(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"td")(1,"input",11),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw(2);return t.KtG(l.workOrderTypeName=i)}),t.qZA()(),t.TgZ(2,"td",0)(3,"fa-icon",9),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.onClickSaveButton(i))}),t.qZA(),t.TgZ(4,"fa-icon",10),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.onClickCancelButton(i))}),t.qZA()()}if(2&s){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Q6J("value",e.name)("ngModel",o.workOrderTypeName),t.uIk("id","work-order-type-id-"+e.id),t.xp6(2),t.Q6J("icon",o.faSave),t.xp6(1),t.Q6J("icon",o.faX)}}function F(s,n){if(1&s&&(t.TgZ(0,"tr"),t.YNc(1,J,6,3,"ng-container",7),t.YNc(2,S,5,5,"ng-template",null,8,t.W1O),t.qZA()),2&s){const e=n.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!e.isEditing)("ngIfElse",o)}}function P(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onClickAddNewItem())}),t._uU(1,"A\xf1adir nuevo elemento"),t.qZA()}}function q(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"form",13),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSubmit())}),t.TgZ(1,"div",14)(2,"div",15)(3,"label",16),t._uU(4,"Nombre"),t.qZA(),t._UZ(5,"input",17),t.qZA(),t.TgZ(6,"div",15)(7,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.setIsAddingNewItem(!1))}),t._uU(8,"Cancelar"),t.qZA(),t.TgZ(9,"button",19),t._uU(10,"Guardar"),t.qZA()()()()}if(2&s){const e=t.oxw();t.Q6J("formGroup",e.addNewItemForm),t.xp6(9),t.Q6J("disabled",!e.addNewItemForm.valid)}}class Z{constructor(n,e,o,i){this.httpService=n,this.fb=e,this.modalService=o,this.toastr=i,this.faEdit=p.Xcf,this.faTrash=p.$aW,this.faX=p.EOp,this.faSave=p.r6l,this.isAddingNewItem=!1}ngOnInit(){this.getWorkOrderTypes()}getWorkOrderTypes(){this.httpService.get(d.G.workOrderTypesApi).subscribe(n=>{this.workOrderTypes=[],n.map(e=>this.workOrderTypes.push({...e,isEditing:!1}))})}setIsAddingNewItem(n){this.isAddingNewItem=n}onClickAddNewItem(){this.initForm(),this.setIsAddingNewItem(!0)}initForm(){this.addNewItemForm=this.fb.group({name:["",r.kI.required]})}onSubmit(){this.addNewItemForm?.valid&&(this.setIsAddingNewItem(!1),this.httpService.post(d.G.workOrderTypeApi,{name:this.addNewItemForm.controls.name.value}).subscribe(()=>{this.getWorkOrderTypes()}))}onClickTrashButton(n){this.modalService.open(c).closed.subscribe(o=>o&&this.deleteElement(n))}onClickEditButton(n){this.workOrderTypeName=n.name,n.isEditing=!0}onClickSaveButton(n){n.isEditing=!1,this.httpService.put(`${d.G.workOrderTypeApi}`,{id:n.id,name:this.workOrderTypeName}).subscribe(()=>{this.toastr.success("Elemento actualizado."),this.getWorkOrderTypes()})}onClickCancelButton(n){n.isEditing=!1}deleteElement(n){this.httpService.delete(`${d.G.workOrderTypeApi}/${n.id}`).subscribe(()=>{this.toastr.info("Eliminaci\xf3n realizada con \xe9xito."),this.getWorkOrderTypes()})}static#t=this.\u0275fac=function(e){return new(e||Z)(t.Y36(b.O),t.Y36(r.qu),t.Y36(g.FF),t.Y36(C._W))};static#e=this.\u0275cmp=t.Xpm({type:Z,selectors:[["app-work-order-types"]],decls:14,vars:3,consts:[[1,"text-center"],[1,"table"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-12","d-flex","justify-content-center"],["class","btn btn-outline-primary",3,"click",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseBlock",""],["role","button",1,"me-2",3,"icon","click"],["role","button",3,"icon","click"],["type","text",1,"form-control","form-control-row",3,"value","ngModel","ngModelChange"],[1,"btn","btn-outline-primary",3,"click"],[3,"formGroup","ngSubmit"],[1,"row","align-items-end"],[1,"col"],[1,"form-label"],["type","text","formControlName","name",1,"form-control"],["type","button",1,"btn","btn-outline-danger","me-2",3,"click"],["type","submit",1,"btn","btn-outline-primary",3,"disabled"]],template:function(e,o){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Tipos de trabajo"),t.qZA(),t.TgZ(2,"table",1)(3,"thead")(4,"tr")(5,"th"),t._uU(6,"Nombre"),t.qZA(),t._UZ(7,"th"),t.qZA()(),t.TgZ(8,"tbody"),t.YNc(9,F,4,2,"tr",2),t.qZA()(),t.TgZ(10,"div",3)(11,"div",4),t.YNc(12,P,2,0,"button",5),t.YNc(13,q,11,2,"form",6),t.qZA()()),2&e&&(t.xp6(9),t.Q6J("ngForOf",o.workOrderTypes),t.xp6(3),t.Q6J("ngIf",!o.isAddingNewItem),t.xp6(1),t.Q6J("ngIf",o.isAddingNewItem&&o.addNewItemForm))},dependencies:[a.sg,a.O5,w.BN,r._Y,r.Fj,r.JJ,r.JL,r.On,r.sg,r.u],styles:[".form-control-row[_ngcontent-%COMP%]{padding-top:.2rem;padding-bottom:.2rem;height:1.3125rem;font-size:.8rem}fa-icon[_ngcontent-%COMP%]{color:#adb5bd}fa-icon[_ngcontent-%COMP%]:hover{color:#0d6efd}"]})}function G(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onClickAddNewItem())}),t._uU(1," A\xf1adir nuevo elemento\n"),t.qZA()}}function D(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"form",3),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSubmit())}),t.TgZ(1,"div",4)(2,"div",5)(3,"label",6),t._uU(4,"Nombre"),t.qZA(),t._UZ(5,"input",7),t.qZA(),t.TgZ(6,"div",5)(7,"label",6),t._uU(8,"Symbolo"),t.qZA(),t._UZ(9,"input",8),t.qZA(),t.TgZ(10,"div",5)(11,"label",6),t._uU(12,"Magnitud"),t.qZA(),t._UZ(13,"input",9),t.qZA(),t.TgZ(14,"div",5)(15,"button",10),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.setIsAddingNewItem(!1))}),t._uU(16,"Cancelar"),t.qZA(),t.TgZ(17,"button",11),t._uU(18,"Guardar"),t.qZA()()()()}if(2&s){const e=t.oxw();t.Q6J("formGroup",e.addNewItemForm),t.xp6(17),t.Q6J("disabled",!e.addNewItemForm.valid)}}class A{constructor(n){this.fb=n,this.isAddingNewItem=!1,this.itemCreatedEvent=new t.vpe}onClickAddNewItem(){this.initForm(),this.setIsAddingNewItem(!0)}initForm(){this.addNewItemForm=this.fb.group({displayName:[null,r.kI.required],symbol:[null,r.kI.required],magnitude:[null]})}onSubmit(){!this.addNewItemForm?.valid||this.itemCreatedEvent.emit()}setIsAddingNewItem(n){this.isAddingNewItem=n}static#t=this.\u0275fac=function(e){return new(e||A)(t.Y36(r.qu))};static#e=this.\u0275cmp=t.Xpm({type:A,selectors:[["app-add-measurement-unit"]],outputs:{itemCreatedEvent:"itemCreatedEvent"},decls:2,vars:2,consts:[["class","btn btn-outline-primary",3,"click",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"btn","btn-outline-primary",3,"click"],[3,"formGroup","ngSubmit"],[1,"row","align-items-end"],[1,"col-lg-3","col-md-6"],[1,"form-label"],["type","text","formControlName","displayName",1,"form-control"],["type","text","formControlName","symbol",1,"form-control"],["type","text","formControlName","magnitude",1,"form-control"],["type","button",1,"btn","btn-outline-danger","me-2",3,"click"],["type","submit",1,"btn","btn-outline-primary",3,"disabled"]],template:function(e,o){1&e&&(t.YNc(0,G,2,0,"button",0),t.YNc(1,D,19,2,"form",1)),2&e&&(t.Q6J("ngIf",!o.isAddingNewItem),t.xp6(1),t.Q6J("ngIf",o.isAddingNewItem&&o.addNewItemForm))},dependencies:[a.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]})}function B(s,n){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"titlecase"),t.qZA(),t.TgZ(8,"td",0)(9,"fa-icon",7),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.onClickEditButton(i))}),t.qZA(),t.TgZ(10,"fa-icon",8),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.onClickTrashButton(i))}),t.qZA()(),t.BQk()}if(2&s){const e=t.oxw().$implicit,o=t.oxw();t.xp6(2),t.Oqu(e.displayName),t.xp6(2),t.Oqu(e.symbol),t.xp6(2),t.Oqu(t.lcZ(7,5,e.magnitude)),t.xp6(3),t.Q6J("icon",o.faEdit),t.xp6(1),t.Q6J("icon",o.faTrash)}}function Q(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"td")(1,"input",9),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw(2);return t.KtG(l.newData.name=i)}),t.qZA()(),t.TgZ(2,"td")(3,"input",10),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw(2);return t.KtG(l.newData.symbol=i)}),t.qZA()(),t.TgZ(4,"td")(5,"input",10),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw(2);return t.KtG(l.newData.magnitude=i)}),t.qZA()(),t.TgZ(6,"td",0)(7,"fa-icon",7),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.onClickSaveButton(i))}),t.qZA(),t.TgZ(8,"fa-icon",8),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.onClickCancelButton(i))}),t.qZA()()}if(2&s){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Q6J("value",e.measurementUnitName)("ngModel",o.newData.name),t.uIk("id","unit-id-"+e.measurementUnitId),t.xp6(2),t.Q6J("ngModel",o.newData.symbol),t.xp6(2),t.Q6J("ngModel",o.newData.magnitude),t.xp6(2),t.Q6J("icon",o.faSave),t.xp6(1),t.Q6J("icon",o.faX)}}function Y(s,n){if(1&s&&(t.TgZ(0,"tr"),t.YNc(1,B,11,7,"ng-container",5),t.YNc(2,Q,9,7,"ng-template",null,6,t.W1O),t.qZA()),2&s){const e=n.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!e.isEditing)("ngIfElse",o)}}class v{constructor(n,e,o){this.httpService=n,this.modalService=e,this.toastr=o,this.measurementUnits=[],this.faEdit=p.Xcf,this.faTrash=p.$aW,this.faSave=p.r6l,this.faX=p.EOp,this.newData={name:"",symbol:"",magnitude:""}}ngOnInit(){this.getMeasurementUnits()}getMeasurementUnits(){this.httpService.get(d.G.measurementUnitsApi).subscribe(n=>{n.map(e=>this.measurementUnits.push({...e,isEditing:!1}))})}onClickEditButton(n){this.newData.name=n.displayName,this.newData.symbol=n.symbol,this.newData.magnitude=n.magnitude,n.isEditing=!0}onClickTrashButton(n){this.modalService.open(c).closed.subscribe(o=>o&&this.deleteElement(n))}onClickSaveButton(n){}onClickCancelButton(n){n.isEditing=!1}deleteElement(n){this.httpService.delete(`${d.G.measurementUnitsApi}/${n.measurementUnitId}`).subscribe(()=>{this.toastr.info("Eliminaci\xf3n realizada con \xe9xito."),this.getMeasurementUnits()})}static#t=this.\u0275fac=function(e){return new(e||v)(t.Y36(b.O),t.Y36(g.FF),t.Y36(C._W))};static#e=this.\u0275cmp=t.Xpm({type:v,selectors:[["app-measurement-units"]],decls:17,vars:1,consts:[[1,"text-center"],[1,"table"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-12","d-flex","justify-content-center"],[4,"ngIf","ngIfElse"],["elseBlock",""],["role","button",1,"me-2",3,"icon","click"],["role","button",3,"icon","click"],["type","text",1,"form-control","form-control-row",3,"value","ngModel","ngModelChange"],["type","text",1,"form-control","form-control-row",3,"ngModel","ngModelChange"]],template:function(e,o){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Unidades de medida"),t.qZA(),t.TgZ(2,"table",1)(3,"thead")(4,"tr")(5,"th"),t._uU(6,"Nombre"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"S\xedmbolo"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Magnitud"),t.qZA(),t._UZ(11,"th"),t.qZA()(),t.TgZ(12,"tbody"),t.YNc(13,Y,4,2,"tr",2),t.qZA()(),t.TgZ(14,"div",3)(15,"div",4),t._UZ(16,"app-add-measurement-unit"),t.qZA()()),2&e&&(t.xp6(13),t.Q6J("ngForOf",o.measurementUnits))},dependencies:[a.sg,a.O5,w.BN,r.Fj,r.JJ,r.On,A,a.rS],styles:[".form-control-row[_ngcontent-%COMP%]{padding-top:.2rem;padding-bottom:.2rem;height:1.3125rem;font-size:.8rem}fa-icon[_ngcontent-%COMP%]{color:#adb5bd}fa-icon[_ngcontent-%COMP%]:hover{color:#0d6efd}"]})}var M=m(1875),N=m(7281);function W(s,n){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",5)(6,"fa-icon",6),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.onClickEditButton(i))}),t.qZA(),t.TgZ(7,"fa-icon",7),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.onClickTrashButton(i))}),t.qZA()(),t.BQk()}if(2&s){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.measurementUnitSymbol),t.xp6(2),t.Q6J("icon",o.faEdit),t.xp6(1),t.Q6J("icon",o.faTrash)}}function $(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"app-dropdown",10),t.NdJ("onSelectOptionEvent",function(i){t.CHM(e);const l=t.oxw(4);return t.KtG(l.onSelectNewMeasurementUnit(i))}),t.ALo(1,"toDropdownItem"),t.qZA()}if(2&s){const e=t.oxw(4);t.Q6J("options",t.xi3(1,2,e.measurementUnits,"measurementUnits"))("selectedOptionId",e.newData.measurementUnitId)}}function K(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"td")(1,"input",8),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw(3);return t.KtG(l.newData.name=i)}),t.qZA()(),t.TgZ(2,"td"),t.YNc(3,$,2,5,"app-dropdown",9),t.qZA(),t.TgZ(4,"td",5)(5,"fa-icon",6),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.onClickSaveButton(i))}),t.qZA(),t.TgZ(6,"fa-icon",7),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.onClickCancelButton(i))}),t.qZA()()}if(2&s){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("value",e.name)("ngModel",o.newData.name),t.uIk("id","parameter-id-"+e.id),t.xp6(2),t.Q6J("ngIf",o.measurementUnits),t.xp6(2),t.Q6J("icon",o.faSave),t.xp6(1),t.Q6J("icon",o.faX)}}function H(s,n){if(1&s&&(t.TgZ(0,"tr"),t.YNc(1,W,8,4,"ng-container",3),t.YNc(2,K,7,6,"ng-template",null,4,t.W1O),t.qZA()),2&s){const e=n.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!e.isEditing)("ngIfElse",o)}}function j(s,n){if(1&s&&(t.TgZ(0,"table",1)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Nombre"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Unidad de medida"),t.qZA(),t._UZ(7,"th"),t.qZA()(),t.TgZ(8,"tbody"),t.YNc(9,H,4,2,"tr",2),t.qZA()()),2&s){const e=t.oxw();t.xp6(9),t.Q6J("ngForOf",e.editableParameters)}}class k{constructor(n,e){this.httpService=n,this.toasrtServie=e,this.editableParameters=[],this.faEdit=p.Xcf,this.faTrash=p.$aW,this.faSave=p.r6l,this.faX=p.EOp,this.newData={name:"",id:-1,symbol:"",measurementUnitId:-1},this.parameterUpdatedEvent=new t.vpe}ngOnChanges(){this.setEditableParameters(this.parameters)}setEditableParameters(n){!n||!n.length||(this.editableParameters=n.map(e=>({...e,isEditing:!1})))}onClickEditButton(n){n.isEditing=!0,this.newData={name:n.name,id:n.id,symbol:n.measurementUnitSymbol,measurementUnitId:n.measurementUnitId}}onClickTrashButton(n){}onClickSaveButton(n){!this.newData.name.length||this.newData.measurementUnitId<0||this.newData.id<0||this.httpService.put(d.G.toolParametersApi,{id:this.newData.id,name:this.newData.name,measurementUnitId:this.newData.measurementUnitId}).subscribe(()=>{this.toasrtServie.success("Par\xe1metro actualizado exitosamente."),this.parameterUpdatedEvent.emit()})}onClickCancelButton(n){n.isEditing=!1}onSelectNewMeasurementUnit(n){const e=this.measurementUnits.find(o=>o.measurementUnitId==n.id);!e||(this.newData={...this.newData,measurementUnitId:e.measurementUnitId,symbol:e.symbol})}static#t=this.\u0275fac=function(e){return new(e||k)(t.Y36(b.O),t.Y36(C._W))};static#e=this.\u0275cmp=t.Xpm({type:k,selectors:[["app-tool-parameters-table"]],inputs:{parameters:"parameters",measurementUnits:"measurementUnits"},outputs:{parameterUpdatedEvent:"parameterUpdatedEvent"},features:[t.TTD],decls:1,vars:1,consts:[["class","table",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"text-center"],["role","button",1,"me-2",3,"icon","click"],["role","button",3,"icon","click"],["type","text",1,"form-control","form-control-row",3,"value","ngModel","ngModelChange"],[3,"options","selectedOptionId","onSelectOptionEvent",4,"ngIf"],[3,"options","selectedOptionId","onSelectOptionEvent"]],template:function(e,o){1&e&&t.YNc(0,j,10,1,"table",0),2&e&&t.Q6J("ngIf",o.editableParameters)},dependencies:[a.sg,a.O5,w.BN,r.Fj,r.JJ,r.On,M.J,N.s],styles:["td[_ngcontent-%COMP%]{vertical-align:middle}fa-icon[_ngcontent-%COMP%]{color:#adb5bd}fa-icon[_ngcontent-%COMP%]:hover{color:#0d6efd}"]})}function X(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"app-dropdown",10),t.NdJ("onSelectOptionEvent",function(i){t.CHM(e);const l=t.oxw(2);return t.KtG(l.onSelectMeasurementUnit(i))}),t.ALo(1,"toDropdownItem"),t.qZA()}if(2&s){const e=t.oxw(2);t.Q6J("label","Unidad de medida")("options",t.xi3(1,2,e.measurementUnits,"measurementUnits"))}}function L(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"form",1),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSubmit())}),t.TgZ(1,"div",2)(2,"div",3)(3,"label",4),t._uU(4,"Nombre"),t.qZA(),t._UZ(5,"input",5),t.qZA(),t.TgZ(6,"div",3),t.YNc(7,X,2,5,"app-dropdown",6),t.qZA(),t.TgZ(8,"div",7)(9,"button",8),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cancelCreationEvent.emit())}),t._uU(10,"Cancelar"),t.qZA(),t.TgZ(11,"button",9),t._uU(12,"Guardar"),t.qZA()()()()}if(2&s){const e=t.oxw();t.Q6J("formGroup",e.parameterForm),t.xp6(7),t.Q6J("ngIf",e.measurementUnits),t.xp6(4),t.Q6J("disabled",!e.parameterForm.valid)}}class y{constructor(n,e,o){this.fb=n,this.toastrService=e,this.httpService=o,this.parameterCreatedEvent=new t.vpe,this.cancelCreationEvent=new t.vpe}ngOnInit(){this.initForm()}initForm(){this.parameterForm=this.fb.group({name:["",r.kI.required],measurementUnitId:[null,r.kI.required]})}onSelectMeasurementUnit(n){!this.parameterForm||this.parameterForm.patchValue({measurementUnitId:n.id})}onSubmit(){this.parameterForm&&this.parameterForm.valid&&this.httpService.post(d.G.toolParametersApi,{name:this.parameterForm.controls.name.value,measurementUnitId:this.parameterForm.controls.measurementUnitId.value}).subscribe(e=>{this.toastrService.success("Par\xe1metro creado exitosamente."),this.parameterCreatedEvent.emit()})}static#t=this.\u0275fac=function(e){return new(e||y)(t.Y36(r.qu),t.Y36(C._W),t.Y36(b.O))};static#e=this.\u0275cmp=t.Xpm({type:y,selectors:[["app-create-tool-parameter"]],inputs:{measurementUnits:"measurementUnits"},outputs:{parameterCreatedEvent:"parameterCreatedEvent",cancelCreationEvent:"cancelCreationEvent"},decls:1,vars:1,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row","align-items-end"],[1,"col-lg-4","col-md-6"],[1,"form-label"],["type","text","formControlName","name",1,"form-control"],[3,"label","options","onSelectOptionEvent",4,"ngIf"],[1,"col-lg-4","col-md-6","d-flex"],["type","button",1,"btn","btn-outline-danger","me-2",3,"click"],["type","submit",1,"btn","btn-outline-primary",3,"disabled"],[3,"label","options","onSelectOptionEvent"]],template:function(e,o){1&e&&t.YNc(0,L,13,3,"form",0),2&e&&t.Q6J("ngIf",o.parameterForm)},dependencies:[a.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,M.J,N.s]})}function R(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.setIsCreatingNewItem(!0))}),t._uU(1,"A\xf1adir nuevo elemento"),t.qZA()}}function z(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"app-create-tool-parameter",7),t.NdJ("cancelCreationEvent",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.setIsCreatingNewItem(!1))})("parameterCreatedEvent",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onParameterCreated())}),t.qZA()}if(2&s){const e=t.oxw();t.Q6J("measurementUnits",e.measurementUnits)}}class U{constructor(n){this.httpService=n,this.isCreatingNewItem=!1}ngOnInit(){this.getToolParameters(),this.getMeasurementUnits()}getToolParameters(){this.httpService.get(d.G.toolParametersApi).subscribe(n=>this.toolParameters=n)}getMeasurementUnits(){this.httpService.get(d.G.measurementUnitsApi).subscribe(n=>this.measurementUnits=n)}setIsCreatingNewItem(n){this.isCreatingNewItem=n}onParameterCreated(){this.setIsCreatingNewItem(!1),this.getToolParameters()}static#t=this.\u0275fac=function(e){return new(e||U)(t.Y36(b.O))};static#e=this.\u0275cmp=t.Xpm({type:U,selectors:[["app-tool-parameters"]],decls:8,vars:4,consts:[[1,"text-center"],[3,"parameters","measurementUnits","parameterUpdatedEvent"],[1,"row"],[1,"col-12","d-flex","justify-content-center"],["class","btn btn-outline-primary",3,"click",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"btn","btn-outline-primary",3,"click"],[3,"measurementUnits","cancelCreationEvent","parameterCreatedEvent"]],template:function(e,o){if(1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Par\xe1metros de herramientas"),t.qZA(),t.TgZ(2,"app-tool-parameters-table",1),t.NdJ("parameterUpdatedEvent",function(){return o.getToolParameters()}),t.qZA(),t.TgZ(3,"div",2)(4,"div",3),t.YNc(5,R,2,0,"button",4),t.YNc(6,z,1,1,"ng-template",null,5,t.W1O),t.qZA()()),2&e){const i=t.MAs(7);t.xp6(2),t.Q6J("parameters",o.toolParameters)("measurementUnits",o.measurementUnits),t.xp6(3),t.Q6J("ngIf",!o.isCreatingNewItem)("ngIfElse",i)}},dependencies:[a.O5,k,y]})}class x{getSettings(){return[{component:Z},{component:v},{component:U}]}static#t=this.\u0275fac=function(e){return new(e||x)};static#e=this.\u0275prov=t.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"})}function V(s,n){1&s&&t.GkF(0)}class O{constructor(){this.currentSettingIndex=0,this.settings=(0,t.f3M)(x).getSettings()}get currentSetting(){return this.settings[this.currentSettingIndex]}displaySetting(n){this.currentSettingIndex=n}static#t=this.\u0275fac=function(e){return new(e||O)};static#e=this.\u0275cmp=t.Xpm({type:O,selectors:[["app-general-settings"]],decls:14,vars:1,consts:[[1,"container"],[1,"text-center","mt-3"],[1,"row","mt-3"],[1,"col","d-flex","gap-2"],[1,"btn","btn-outline-primary",3,"click"],[4,"ngComponentOutlet"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Configuraci\xf3n general"),t.qZA(),t.TgZ(3,"section")(4,"div",2)(5,"div",3)(6,"button",4),t.NdJ("click",function(){return o.displaySetting(0)}),t._uU(7,"Tipos de trabajo"),t.qZA(),t.TgZ(8,"button",4),t.NdJ("click",function(){return o.displaySetting(1)}),t._uU(9,"Unidades de medida"),t.qZA(),t.TgZ(10,"button",4),t.NdJ("click",function(){return o.displaySetting(2)}),t._uU(11,"Par\xe1metros de herramienta"),t.qZA()()(),t.TgZ(12,"div",2),t.YNc(13,V,1,0,"ng-container",5),t.qZA()()()),2&e&&(t.xp6(13),t.Q6J("ngComponentOutlet",o.currentSetting.component))},dependencies:[a.$G]})}const tt=[{path:"",component:O}];class I{static#t=this.\u0275fac=function(e){return new(e||I)};static#e=this.\u0275mod=t.oAB({type:I});static#n=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(tt),h.Bz]})}class E{static#t=this.\u0275fac=function(e){return new(e||E)};static#e=this.\u0275mod=t.oAB({type:E});static#n=this.\u0275inj=t.cJS({imports:[a.ez,I,u.m,_.I]})}},5307:(T,f,m)=>{m.d(f,{O:()=>h});var a=m(529);var _=m(1571);class h{constructor(r){this.httpClient=r,this.api_url="/api/"}get(r){return this.httpClient.get(this.api_url+r)}post(r,p){return this.httpClient.post(this.api_url+r,p)}postFormData(r,p){const d=new a.WM({"Content-Type":"multipart/form-data"});return this.httpClient.post(this.api_url+r,p,{headers:d})}put(r,p){return this.httpClient.put(this.api_url+r,p)}delete(r){return this.httpClient.delete(this.api_url+r)}static#t=this.\u0275fac=function(p){return new(p||h)(_.LFG(a.eN))};static#e=this.\u0275prov=_.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}},1875:(T,f,m)=>{m.d(f,{J:()=>r});var a=m(1571),u=m(6895),_=m(9453);function h(p,d){if(1&p&&(a.TgZ(0,"label",6),a._uU(1),a.qZA()),2&p){const g=a.oxw();a.xp6(1),a.Oqu(g.label)}}function t(p,d){if(1&p){const g=a.EpF();a.TgZ(0,"li",7),a.NdJ("click",function(){const C=a.CHM(g).$implicit,w=a.oxw();return a.KtG(w.onSelectOption(C))}),a.TgZ(1,"p",8),a._uU(2),a.qZA()()}if(2&p){const g=d.$implicit;a.xp6(2),a.Oqu(g.description)}}class r{constructor(){this.buttonText="Seleccionar",this.onSelectOptionEvent=new a.vpe}ngOnChanges(){this.selectedOptionId&&this.options&&(this.selectedOption=this.options.find(d=>d.id==this.selectedOptionId))}onSelectOption(d){this.selectedOption=d,this.onSelectOptionEvent.emit(d)}static#t=this.\u0275fac=function(g){return new(g||r)};static#e=this.\u0275cmp=a.Xpm({type:r,selectors:[["app-dropdown"]],inputs:{label:"label",buttonText:"buttonText",options:"options",selectedOptionId:"selectedOptionId"},outputs:{onSelectOptionEvent:"onSelectOptionEvent"},features:[a.TTD],decls:7,vars:3,consts:[["ngbDropdown","",1,"app-dropdown"],["class","form-label",4,"ngIf"],["ngbDropdownToggle","","type","button","aria-controls","dropdown-basic",1,"btn","app-dropdown--button"],[1,"caret"],["ngbDropdownMenu","","role","menu",1,"app-dropdown--menu","p-0"],["class","dp-item","ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],[1,"form-label"],["ngbDropdownItem","",1,"dp-item",3,"click"],["role","button",1,"m-0","ps-2","pe-2"]],template:function(g,c){1&g&&(a.TgZ(0,"div",0),a.YNc(1,h,2,1,"label",1),a.TgZ(2,"button",2),a._uU(3),a._UZ(4,"span",3),a.qZA(),a.TgZ(5,"ul",4),a.YNc(6,t,3,1,"li",5),a.qZA()()),2&g&&(a.xp6(1),a.Q6J("ngIf",c.label),a.xp6(2),a.hij(" ",c.selectedOption?c.selectedOption.description:c.buttonText," "),a.xp6(3),a.Q6J("ngForOf",c.options))},dependencies:[u.sg,u.O5,_.jt,_.iD,_.Vi,_.TH],styles:[".dp-item[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem;border-bottom:1px solid rgba(200,200,200,.75)}.dp-item[_ngcontent-%COMP%]:hover{background:rgba(200,200,200,.1)}.dp-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.app-dropdown--button[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border:1px solid #ced4da;width:100%}.app-dropdown--menu[_ngcontent-%COMP%]{max-height:200px;overflow:auto}"]})}},7281:(T,f,m)=>{m.d(f,{s:()=>_});var a=m(1066),u=m(1571);class _{transform(t,r=""){if(!t)return new Array;switch(r){case"user":case"employee":return t.map(c=>({id:c.userId,description:c.name}));case"customer":case"branch":case"equipment":return t.map(c=>({id:c.id,description:c.name}));case"workOrderActivity":return t.map(c=>({id:c.id,description:c.description}));case"measurementUnits":return t.map(c=>({id:c.measurementUnitId,description:"NA"==c.displayName?"NA":`${c.displayName} (${c.symbol})`}));case"workState":const p=new a.$;return t.map(c=>({id:c.id,description:p.transform(c)}));default:const{idPropName:d,descriptionPropName:g}=this.findProperties(t[0]);return t.map(c=>({id:c[d],description:c[g]}))}}findProperties(t){let r="",p="";for(let d in t)d.match(/^id$/i)?.length&&(r=d),(d.match(/^name$/i)?.length||d.includes("Description"))&&(p=d);return{idPropName:r,descriptionPropName:p}}static#t=this.\u0275fac=function(r){return new(r||_)};static#e=this.\u0275pipe=u.Yjl({name:"toDropdownItem",type:_,pure:!0})}},1066:(T,f,m)=>{m.d(f,{$:()=>u});var a=m(1571);class u{transform(h){if(!h)return"";switch(h.id){case 1:return"Abierta";case 2:return"En proceso";case 3:return"Cerrada";default:return""}}static#t=this.\u0275fac=function(t){return new(t||u)};static#e=this.\u0275pipe=a.Yjl({name:"workState",type:u,pure:!0})}}}]);