"use strict";(self.webpackChunkToolsManagerClientApp=self.webpackChunkToolsManagerClientApp||[]).push([[294],{3294:(L,T,i)=>{i.r(T),i.d(T,{UsersManagementModule:()=>g});var r=i(6895),u=i(8869),t=i(1571),h=i(6858),U=i(2687),b=i(2216);function v(s,o){if(1&s&&(t.TgZ(0,"button",7),t._UZ(1,"fa-icon",6),t.qZA()),2&s){const e=t.oxw(3);t.xp6(1),t.Q6J("icon",e.faCircleInfo)}}const _=function(s){return["/tools-output",s]};function A(s,o){if(1&s&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t.YNc(7,v,2,1,"button",4),t.TgZ(8,"a",5),t._UZ(9,"fa-icon",6),t.qZA()()()),2&s){const e=o.$implicit,n=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,5,e.outputDateTime)," "),t.xp6(3),t.hij(" ","open"==e.outputToolState.outputToolStateName.toLowerCase()?"Abierto":"Cerrado"," "),t.xp6(2),t.Q6J("ngIf",n.actions),t.xp6(1),t.Q6J("routerLink",t.VKq(7,_,e.outputToolId)),t.xp6(1),t.Q6J("icon",n.faCircleInfo)}}function C(s,o){if(1&s&&(t.TgZ(0,"table",2)(1,"thead")(2,"tr")(3,"th"),t._uU(4," Fecha de salida "),t.qZA(),t.TgZ(5,"th"),t._uU(6," Estado "),t.qZA(),t.TgZ(7,"th"),t._uU(8," Acciones "),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,A,10,9,"tr",3),t.qZA()()),2&s){const e=t.oxw();t.xp6(10),t.Q6J("ngForOf",e.outputsTool)}}function x(s,o){1&s&&(t.TgZ(0,"p"),t._uU(1," No se encontraron salidas de herramienta\n"),t.qZA())}class c{constructor(){this.faCircleInfo=U.DBf}static#t=this.\u0275fac=function(e){return new(e||c)};static#e=this.\u0275cmp=t.Xpm({type:c,selectors:[["output-tool-list"]],inputs:{outputsTool:"outputsTool",actions:"actions"},decls:2,vars:2,consts:[["class","table",4,"ngIf"],[4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["class","action-button",4,"ngIf"],[3,"routerLink"],[1,"text-primary",3,"icon"],[1,"action-button"]],template:function(e,n){1&e&&(t.YNc(0,C,11,1,"table",0),t.YNc(1,x,2,0,"p",1)),2&e&&(t.Q6J("ngIf",n.outputsTool&&n.outputsTool.length),t.xp6(1),t.Q6J("ngIf",n.outputsTool&&!n.outputsTool.length))},dependencies:[r.sg,r.O5,b.BN,u.rH,r.uU]})}function y(s,o){if(1&s&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&s){const e=o.$implicit;t.xp6(1),t.hij(" ",e.displayName," ")}}function F(s,o){if(1&s&&(t.TgZ(0,"div",1)(1,"h2",2),t._uU(2,"Detalle de usuario"),t.qZA(),t.TgZ(3,"div",3)(4,"div",4)(5,"p")(6,"b"),t._uU(7,"Nombre: "),t.qZA(),t._uU(8),t.qZA()(),t.TgZ(9,"div",5)(10,"p")(11,"b"),t._uU(12,"Roles:"),t.qZA()(),t.TgZ(13,"ul"),t.YNc(14,y,2,1,"li",6),t.qZA()()(),t.TgZ(15,"div",7)(16,"h4",8),t._uU(17,"Salidas de herramienta"),t.qZA(),t._UZ(18,"output-tool-list",9),t.qZA()()),2&s){const e=t.oxw();t.xp6(8),t.hij(" ",e.user.name,""),t.xp6(6),t.Q6J("ngForOf",e.user.userRoles),t.xp6(4),t.Q6J("outputsTool",e.user.outputsTool)}}class d{constructor(o,e){this.route=o,this.httpService=e}ngOnInit(){this.getUser()}getUser(){const o=this.route.snapshot.paramMap.get("id");this.httpService.get(`Users/employee/${o}`).subscribe(e=>this.user=e)}static#t=this.\u0275fac=function(e){return new(e||d)(t.Y36(u.gz),t.Y36(h.O))};static#e=this.\u0275cmp=t.Xpm({type:d,selectors:[["app-users-management-detail"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"text-center","mt-3"],[1,"row","mt-3","g-3"],[1,"col-12"],[1,"col"],[4,"ngFor","ngForOf"],[1,"row","mt-3"],[1,"text-center","mb-3"],[3,"outputsTool"]],template:function(e,n){1&e&&t.YNc(0,F,19,3,"div",0),2&e&&t.Q6J("ngIf",n.user)},dependencies:[r.sg,r.O5,c]})}var M=i(3131),a=i(433),Z=i(18);function J(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"form",8),t.NdJ("ngSubmit",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.addUserForm.valid&&l.onSubmit())}),t.TgZ(1,"div",9)(2,"label",10),t._uU(3,"Nombre"),t.qZA(),t._UZ(4,"input",11),t.qZA(),t.TgZ(5,"button",12),t._uU(6,"Enviar"),t.qZA()()}if(2&s){const e=t.oxw();t.Q6J("formGroup",e.addUserForm),t.xp6(5),t.Q6J("disabled",!e.addUserForm.valid)}}class p{constructor(o,e,n){this.bsModalRef=o,this.fb=e,this.httpService=n,this.UserAddedEvent=new t.vpe}ngOnInit(){this.initForm()}initForm(){this.addUserForm=this.fb.group({name:["",a.kI.required]})}onSubmit(){this.httpService.post("Users/addEmployee",{name:this.addUserForm?.controls.name.value}).subscribe(e=>{this.bsModalRef.hide(),this.bsModalRef.onHide.emit(e)})}static#t=this.\u0275fac=function(e){return new(e||p)(t.Y36(Z.UZ),t.Y36(a.qu),t.Y36(h.O))};static#e=this.\u0275cmp=t.Xpm({type:p,selectors:[["app-add-user-modal"]],outputs:{UserAddedEvent:"UserAddedEvent"},decls:11,vars:1,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","userName","formControlName","name",1,"form-control"],[1,"btn","btn-outline-primary",3,"disabled"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Agregar Nuevo Usuario"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.bsModalRef.hide()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4),t.YNc(7,J,7,2,"form",5),t.qZA(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return n.bsModalRef.hide()}),t._uU(10,"Cerrar"),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("ngIf",n.addUserForm))},dependencies:[r.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u]})}var N=i(8073),I=i(5090);class m{constructor(o,e,n){this.modalService=o,this.httpService=e,this.router=n}ngOnInit(){this.getUsersList()}onOpenAddUserModal(){this.modalRef=this.modalService.show(p),this.modalRef?.onHide&&this.modalRef.onHide.subscribe(o=>{!o.name||this.getUsersList()})}getUsersList(){this.httpService.get("Users/employees").subscribe(o=>this.users=o)}onUserClicked(o){this.router.navigateByUrl(`/${M.p7.usersManagement}/${o.id}`)}static#t=this.\u0275fac=function(e){return new(e||m)(t.Y36(Z.tT),t.Y36(h.O),t.Y36(u.F0))};static#e=this.\u0275cmp=t.Xpm({type:m,selectors:[["app-users-management"]],decls:10,vars:4,consts:[[1,"container"],[1,"text-center","mt-3"],[1,"btn","btn-outline-primary",3,"click"],[3,"items","rowClickedEvent"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Administraci\xf3n de usuarios"),t.qZA(),t.TgZ(3,"div",1)(4,"button",2),t.NdJ("click",function(){return n.onOpenAddUserModal()}),t._uU(5,"Agregar usuario"),t.qZA()(),t.TgZ(6,"h4",1),t._uU(7,"Lista de usuarios"),t.qZA(),t.TgZ(8,"app-items-list",3),t.NdJ("rowClickedEvent",function(q){return n.onUserClicked(q)}),t.ALo(9,"toItemList"),t.qZA()()),2&e&&(t.xp6(8),t.Q6J("items",t.xi3(9,1,n.users,"user")))},dependencies:[N.H,I.R]})}const O=[{path:"",component:m},{path:":id",component:d}];class f{static#t=this.\u0275fac=function(e){return new(e||f)};static#e=this.\u0275mod=t.oAB({type:f});static#o=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(O),u.Bz]})}var S=i(6733);class g{static#t=this.\u0275fac=function(e){return new(e||g)};static#e=this.\u0275mod=t.oAB({type:g});static#o=this.\u0275inj=t.cJS({imports:[r.ez,f,S.m]})}}}]);