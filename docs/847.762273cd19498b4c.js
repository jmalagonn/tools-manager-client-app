"use strict";(self.webpackChunkToolsManagerClientApp=self.webpackChunkToolsManagerClientApp||[]).push([[847],{6858:(v,g,o)=>{o.d(g,{O:()=>m});var e=o(529),d=o(2340),u=o(1571);class m{constructor(c){this.httpClient=c,this.api_url=d.N.apiUrl}get(c){return this.httpClient.get(this.api_url+c)}post(c,s){return new e.WM({"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET,HEAD,OPTIONS,POST,PUT","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept, Authorization"}),this.httpClient.post(this.api_url+c,s)}put(c,s){return this.httpClient.put(this.api_url+c,s)}postFormData(c,s){const n=new e.WM({"Content-Type":"multipart/form-data"});return this.httpClient.post(this.api_url+c,s,{headers:n})}static#e=this.\u0275fac=function(s){return new(s||m)(u.LFG(e.eN))};static#t=this.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})}},4028:(v,g,o)=>{o.d(g,{d:()=>C});var e=o(1571),d=o(2687),u=o(6895),m=o(2216),a=o(433),c=o(2771),s=o(6858),n=o(1875),_=o(7281);function f(p,r){if(1&p){const t=e.EpF();e.TgZ(0,"div",14)(1,"app-dropdown",15),e.NdJ("onSelectOptionEvent",function(l){e.CHM(t);const h=e.oxw();return e.KtG(h.onSelectOption(l))}),e.ALo(2,"toDropdownItem"),e.qZA()()}if(2&p){const t=e.oxw();e.xp6(1),e.Q6J("options",e.xi3(2,2,t.measurementUnits,"measurementUnits"))("label","Unidad de medida")}}class b{constructor(r,t){this.fb=r,this.httpService=t,this.faCheck=d.LEp,this.faX=d.EOp,this.cancelEvent=new e.vpe,this.addNewParameterEvent=new e.vpe}ngOnInit(){this.getMeasurementUnits(),this.initForm()}initForm(){this.addParameterForm=this.fb.group({parameterName:[null,a.kI.required],measurementUnitId:[null,a.kI.required],measurementUnitSymbol:[null],parameterValue:[null,a.kI.required]})}getMeasurementUnits(){this.httpService.get(c.G8.measurementUnitsApi).subscribe(r=>this.measurementUnits=r)}onSelectOption(r){const t=this.measurementUnits.find(i=>i.measurementUnitId==r.id);this.addParameterForm.patchValue({measurementUnitId:t.measurementUnitId,measurementUnitSymbol:t.symbol})}addNewParameter(){!this.addParameterForm.valid||this.addNewParameterEvent.emit({name:this.addParameterForm.controls.parameterName.value,measurementUnitId:this.addParameterForm.controls.measurementUnitId.value,measurementUnitSymbol:this.addParameterForm.controls.measurementUnitSymbol.value,parameterValue:this.addParameterForm.controls.parameterValue.value})}static#e=this.\u0275fac=function(t){return new(t||b)(e.Y36(a.qu),e.Y36(s.O))};static#t=this.\u0275cmp=e.Xpm({type:b,selectors:[["app-add-new-parameter"]],outputs:{cancelEvent:"cancelEvent",addNewParameterEvent:"addNewParameterEvent"},decls:18,vars:5,consts:[[3,"formGroup"],[1,"row"],[1,"text-center"],[1,"col-lg-3","col-md-5"],["for","parameterName",1,"form-label"],["type","text","id","parameterName","formControlName","parameterName",1,"form-control"],["class","col-md-3",4,"ngIf"],[1,"col-lg-3","col-md-2"],["for","parameterValue",1,"form-label"],["type","text","id","parameterValue","formControlName","parameterValue",1,"form-control"],[1,"col-lg-3","col-md-2","action-buttons"],["type","button",1,"btn","btn-outline-success","me-2",3,"disabled","click"],[3,"icon"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"col-md-3"],[3,"options","label","onSelectOptionEvent"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"h2",2),e._uU(3,"Nuevo par\xe1metero"),e.qZA(),e.TgZ(4,"div",3)(5,"label",4),e._uU(6,"Nombre del par\xe1metro"),e.qZA(),e._UZ(7,"input",5),e.qZA(),e.YNc(8,f,3,5,"div",6),e.TgZ(9,"div",7)(10,"label",8),e._uU(11,"Valor/Descripci\xf3n"),e.qZA(),e._UZ(12,"input",9),e.qZA(),e.TgZ(13,"div",10)(14,"button",11),e.NdJ("click",function(){return i.addNewParameter()}),e._UZ(15,"fa-icon",12),e.qZA(),e.TgZ(16,"button",13),e.NdJ("click",function(){return i.cancelEvent.emit()}),e._UZ(17,"fa-icon",12),e.qZA()()()()),2&t&&(e.Q6J("formGroup",i.addParameterForm),e.xp6(8),e.Q6J("ngIf",i.measurementUnits),e.xp6(6),e.Q6J("disabled",!i.addParameterForm.valid),e.xp6(1),e.Q6J("icon",i.faCheck),e.xp6(2),e.Q6J("icon",i.faX))},dependencies:[u.O5,m.BN,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,n.J,_.s],styles:[".action-buttons[_ngcontent-%COMP%]{padding-top:2rem}"]})}function w(p,r){if(1&p){const t=e.EpF();e.TgZ(0,"form",1)(1,"div",2)(2,"h2",3),e._uU(3,"Configurar par\xe1metero"),e.qZA(),e.TgZ(4,"div",4)(5,"label",5),e._uU(6,"Nombre del par\xe1metro"),e.qZA(),e._UZ(7,"input",6),e.qZA(),e.TgZ(8,"div",7)(9,"label",5),e._uU(10,"Unidad de medida"),e.qZA(),e._UZ(11,"input",6),e.qZA(),e.TgZ(12,"div",8)(13,"label",9),e._uU(14,"Valor/Descripci\xf3n"),e.qZA(),e._UZ(15,"input",10),e.qZA(),e.TgZ(16,"div",11)(17,"button",12),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.setParameterValue())}),e._UZ(18,"fa-icon",13),e.qZA(),e.TgZ(19,"button",14),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.cancelEvent.emit())}),e._UZ(20,"fa-icon",13),e.qZA()()()()}if(2&p){const t=e.oxw();e.Q6J("formGroup",t.setParameterForm),e.xp6(7),e.Q6J("value",t.toolParameter.name),e.xp6(4),e.Q6J("value",t.toolParameter.measurementUnitSymbol),e.xp6(6),e.Q6J("disabled",!t.setParameterForm.valid),e.xp6(1),e.Q6J("icon",t.faCheck),e.xp6(2),e.Q6J("icon",t.faX)}}class P{constructor(r){this.fb=r,this.faCheck=d.LEp,this.faX=d.EOp,this.cancelEvent=new e.vpe,this.setParameterEvent=new e.vpe}ngOnInit(){this.initForm()}initForm(){this.setParameterForm=this.fb.group({parameterValue:[null,a.kI.required]})}setParameterValue(){!this.setParameterForm.valid||this.setParameterEvent.emit({id:this.toolParameter.id,measurementUnitId:this.toolParameter.measurementUnitId,measurementUnitSymbol:this.toolParameter.measurementUnitSymbol,name:this.toolParameter.name,parameterValue:this.setParameterForm.controls.parameterValue.value})}static#e=this.\u0275fac=function(t){return new(t||P)(e.Y36(a.qu))};static#t=this.\u0275cmp=e.Xpm({type:P,selectors:[["app-set-parameter"]],inputs:{toolParameter:"toolParameter"},outputs:{cancelEvent:"cancelEvent",setParameterEvent:"setParameterEvent"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"text-center"],[1,"col-lg-3","col-md-5"],[1,"form-label"],["type","text","disabled","",1,"form-control",3,"value"],[1,"col-md-3"],[1,"col-lg-3","col-md-2"],["for","parameterValue",1,"form-label"],["type","text","id","parameterValue","formControlName","parameterValue",1,"form-control"],[1,"col-lg-3","col-md-2","action-buttons"],["type","button",1,"btn","btn-outline-success","me-2",3,"disabled","click"],[3,"icon"],["type","button",1,"btn","btn-outline-danger",3,"click"]],template:function(t,i){1&t&&e.YNc(0,w,21,6,"form",0),2&t&&e.Q6J("ngIf",i.toolParameter)},dependencies:[u.O5,m.BN,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".action-buttons[_ngcontent-%COMP%]{padding-top:2rem}"]})}function T(p,r){if(1&p){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"fa-icon",9),e.NdJ("click",function(){const h=e.CHM(t).$implicit,x=e.oxw(3);return e.KtG(x.onSetParameter(h))}),e.qZA()()()}if(2&p){const t=r.$implicit,i=e.oxw(3);e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.measurementUnitSymbol),e.xp6(2),e.Q6J("icon",i.faPlus)}}function E(p,r){if(1&p&&(e.TgZ(0,"table",7)(1,"thead")(2,"tr")(3,"th"),e._uU(4,"Nombre"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Magnitud"),e.qZA(),e._UZ(7,"th"),e.qZA()(),e.TgZ(8,"tbody"),e.YNc(9,T,7,3,"tr",8),e.qZA()()),2&p){const t=e.oxw(2);e.xp6(9),e.Q6J("ngForOf",t.parametersList)}}function A(p,r){1&p&&(e.TgZ(0,"p"),e._uU(1,"No hay m\xe1s par\xe1metros para agregar."),e.qZA())}function N(p,r){if(1&p){const t=e.EpF();e.ynx(0),e.YNc(1,E,10,1,"table",3),e.TgZ(2,"div"),e.YNc(3,A,2,0,"p",0),e.qZA(),e.TgZ(4,"div",4)(5,"button",5),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.onCreateNewParameter())}),e._uU(6," Crear nuevo par\xe1metro "),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.onCancelAddParameter())}),e._uU(8," Cancelar "),e.qZA()(),e.BQk()}if(2&p){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.parametersList.length),e.xp6(2),e.Q6J("ngIf",!t.parametersList.length)}}function Z(p,r){if(1&p){const t=e.EpF();e.TgZ(0,"app-add-new-parameter",10),e.NdJ("addNewParameterEvent",function(l){e.CHM(t);const h=e.oxw();return e.KtG(h.onNewParameterCreated(l))})("cancelEvent",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.onCancelCreateNewParameter())}),e.qZA()}}function U(p,r){if(1&p){const t=e.EpF();e.TgZ(0,"app-set-parameter",11),e.NdJ("cancelEvent",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.onCancelSetParameter())})("setParameterEvent",function(l){e.CHM(t);const h=e.oxw();return e.KtG(h.parameterWasSet(l))}),e.qZA()}if(2&p){const t=e.oxw();e.Q6J("toolParameter",t.parameterToSet)}}class C{constructor(){this.parametersList=[],this.faPlus=d.r8p,this.isCreatingNewParameter=!1,this.isSettingParameter=!1,this.cancelAddParameterEvent=new e.vpe,this.newParameterAddedEvent=new e.vpe}ngOnChanges(r){this.setParametersList()}setParametersList(){!this.existingParameters||(this.parametersList=this.parametersToFilter&&this.parametersToFilter.length?this.existingParameters.filter(r=>!this.parametersToFilter.some(t=>t.id==r.id)):this.existingParameters)}onCreateNewParameter(){this.isCreatingNewParameter=!0}onCancelCreateNewParameter(){this.isCreatingNewParameter=!1}onCancelAddParameter(){this.cancelAddParameterEvent.emit()}onNewParameterCreated(r){this.isCreatingNewParameter=!1,this.newParameterAddedEvent.emit(r)}onSetParameter(r){this.isSettingParameter=!0,this.parameterToSet=r}onCancelSetParameter(){this.isSettingParameter=!1}parameterWasSet(r){this.isSettingParameter=!1,this.newParameterAddedEvent.emit(r)}static#e=this.\u0275fac=function(t){return new(t||C)};static#t=this.\u0275cmp=e.Xpm({type:C,selectors:[["app-add-parameter"]],inputs:{existingParameters:"existingParameters",parametersToFilter:"parametersToFilter"},outputs:{cancelAddParameterEvent:"cancelAddParameterEvent",newParameterAddedEvent:"newParameterAddedEvent"},features:[e.TTD],decls:3,vars:3,consts:[[4,"ngIf"],[3,"addNewParameterEvent","cancelEvent",4,"ngIf"],[3,"toolParameter","cancelEvent","setParameterEvent",4,"ngIf"],["class","table",4,"ngIf"],[1,"text-center"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-outline-danger","ms-3",3,"click"],[1,"table"],[4,"ngFor","ngForOf"],["role","button",3,"icon","click"],[3,"addNewParameterEvent","cancelEvent"],[3,"toolParameter","cancelEvent","setParameterEvent"]],template:function(t,i){1&t&&(e.YNc(0,N,9,2,"ng-container",0),e.YNc(1,Z,1,0,"app-add-new-parameter",1),e.YNc(2,U,1,1,"app-set-parameter",2)),2&t&&(e.Q6J("ngIf",i.parametersList&&!i.isCreatingNewParameter&&!i.isSettingParameter),e.xp6(1),e.Q6J("ngIf",i.isCreatingNewParameter),e.xp6(1),e.Q6J("ngIf",i.isSettingParameter))},dependencies:[u.sg,u.O5,m.BN,b,P]})}},1875:(v,g,o)=>{o.d(g,{J:()=>c});var e=o(1571),d=o(6895),u=o(9453);function m(s,n){if(1&s&&(e.TgZ(0,"label",6),e._uU(1),e.qZA()),2&s){const _=e.oxw();e.xp6(1),e.Oqu(_.label)}}function a(s,n){if(1&s){const _=e.EpF();e.TgZ(0,"li",7),e.NdJ("click",function(){const w=e.CHM(_).$implicit,P=e.oxw();return e.KtG(P.onSelectOption(w))}),e.TgZ(1,"p",8),e._uU(2),e.qZA()()}if(2&s){const _=n.$implicit;e.xp6(2),e.Oqu(_.description)}}class c{constructor(){this.buttonText="Seleccionar",this.onSelectOptionEvent=new e.vpe}onSelectOption(n){this.buttonText=n.description,this.onSelectOptionEvent.emit(n)}static#e=this.\u0275fac=function(_){return new(_||c)};static#t=this.\u0275cmp=e.Xpm({type:c,selectors:[["app-dropdown"]],inputs:{label:"label",buttonText:"buttonText",options:"options"},outputs:{onSelectOptionEvent:"onSelectOptionEvent"},decls:7,vars:3,consts:[["ngbDropdown","",1,"app-dropdown"],["class","form-label",4,"ngIf"],["ngbDropdownToggle","","type","button","aria-controls","dropdown-basic",1,"btn","app-dropdown--button"],[1,"caret"],["ngbDropdownMenu","","role","menu",1,"app-dropdown--menu"],["class","dp-item","ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],[1,"form-label"],["ngbDropdownItem","",1,"dp-item",3,"click"],["role","button",1,"m-0","ps-2","pe-2"]],template:function(_,f){1&_&&(e.TgZ(0,"div",0),e.YNc(1,m,2,1,"label",1),e.TgZ(2,"button",2),e._uU(3),e._UZ(4,"span",3),e.qZA(),e.TgZ(5,"ul",4),e.YNc(6,a,3,1,"li",5),e.qZA()()),2&_&&(e.xp6(1),e.Q6J("ngIf",f.label),e.xp6(2),e.hij(" ",f.selectedOption?f.selectedOption.description:f.buttonText," "),e.xp6(3),e.Q6J("ngForOf",f.options))},dependencies:[d.sg,d.O5,u.jt,u.iD,u.Vi,u.TH],styles:[".dp-item[_ngcontent-%COMP%]:hover{background:rgba(200,200,200,.1)}.app-dropdown--button[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border:1px solid #ced4da;width:100%}.app-dropdown--menu[_ngcontent-%COMP%]{max-height:200px;overflow:auto}"]})}},9993:(v,g,o)=>{o.d(g,{w:()=>a});var e=o(1571),d=o(1481),u=o(6895);function m(c,s){if(1&c&&e._UZ(0,"img",1),2&c){const n=e.oxw();e.Q6J("src",n.imgSrc,e.LSH)}}class a{constructor(s){this.sanitizer=s}ngOnChanges(){this.generateImageThumbnail()}generateImageThumbnail(){!this.compImage&&!this.appFile||(this.imgSrc=this.appFile?this.appFile.url:this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(this.compImage)))}static#e=this.\u0275fac=function(n){return new(n||a)(e.Y36(d.H7))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-image-thumbnail"]],inputs:{compImage:"compImage",appFile:"appFile"},features:[e.TTD],decls:1,vars:1,consts:[[3,"src",4,"ngIf"],[3,"src"]],template:function(n,_){1&n&&e.YNc(0,m,1,1,"img",0),2&n&&e.Q6J("ngIf",_.imgSrc)},dependencies:[u.O5],styles:["img[_ngcontent-%COMP%]{height:9rem;object-fit:contain;border-radius:.5rem}"]})}},7281:(v,g,o)=>{o.d(g,{s:()=>d});var e=o(1571);class d{transform(m,a=""){if(!m)return new Array;switch(a){case"user":case"employee":return m.map(n=>({id:n.userId,description:n.name}));case"customer":case"branch":case"equipment":return m.map(n=>({id:n.id,description:n.name}));case"workItemActivityLog":return m.map(n=>({id:n.workItemActivityLogId,description:n.description}));case"measurementUnits":return m.map(n=>({id:n.measurementUnitId,description:"NA"==n.displayName?"NA":`${n.displayName} (${n.symbol})`}));default:const{idPropName:c,descriptionPropName:s}=this.findProperties(m[0]);return m.map(n=>({id:n[c],description:n[s]}))}}findProperties(m){let a="",c="";for(let s in m)s.match(/id/i)?.length&&(a=s),(s.match(/name/i)?.length||s.includes("Description"))&&(c=s);return{idPropName:a,descriptionPropName:c}}static#e=this.\u0275fac=function(a){return new(a||d)};static#t=this.\u0275pipe=e.Yjl({name:"toDropdownItem",type:d,pure:!0})}},2340:(v,g,o)=>{o.d(g,{N:()=>e});const e={production:!0,apiUrl:"https://management.gmcrefrigeracion.com/api/",filesUrl:""}}}]);