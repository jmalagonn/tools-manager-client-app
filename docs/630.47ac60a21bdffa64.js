"use strict";(self.webpackChunkToolsManagerClientApp=self.webpackChunkToolsManagerClientApp||[]).push([[630],{9630:(So,Pt,p)=>{p.r(Pt),p.d(Pt,{ToolsManagementModule:()=>V});var d=p(6895),x=p(8869),h=p(2771),t=p(1571),y=p(6858),Bt=p(1481);function Kt(o,e){if(1&o&&t._UZ(0,"img",1),2&o){const n=t.oxw();t.Q6J("src",n.imgSrc,t.LSH)}}class w{constructor(e){this.sanitizer=e}ngOnChanges(){console.log(this.appFile),this.generateImageThumbnail()}generateImageThumbnail(){!this.compImage&&!this.appFile||(this.imgSrc=this.appFile?this.appFile.url:this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(this.compImage)))}static#t=this.\u0275fac=function(n){return new(n||w)(t.Y36(Bt.H7))};static#e=this.\u0275cmp=t.Xpm({type:w,selectors:[["app-image-thumbnail"]],inputs:{compImage:"compImage",appFile:"appFile"},features:[t.TTD],decls:1,vars:1,consts:[[3,"src",4,"ngIf"],[3,"src"]],template:function(n,r){1&n&&t.YNc(0,Kt,1,1,"img",0),2&n&&t.Q6J("ngIf",r.imgSrc)},dependencies:[d.O5],styles:["img[_ngcontent-%COMP%]{height:9rem;object-fit:contain;border-radius:.5rem}"]})}var c=p(433);function Wt(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"form",1),t.NdJ("ngSubmit",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.editToolForm.valid&&i.onSubmit())}),t.TgZ(1,"div",2)(2,"label",3),t._uU(3,"Nombre"),t.qZA(),t._UZ(4,"input",4),t.qZA(),t.TgZ(5,"div")(6,"button",5),t._uU(7,"Guardar"),t.qZA(),t.TgZ(8,"button",6),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.onCancel())}),t._uU(9,"Cancelar"),t.qZA()()()}if(2&o){const n=t.oxw();t.Q6J("formGroup",n.editToolForm),t.xp6(6),t.Q6J("disabled",!n.editToolForm.valid)}}class A{constructor(e){this.fb=e,this.updatedToolEvent=new t.vpe,this.cancelUpdateToolEvent=new t.vpe}ngOnInit(){this.initForm()}initForm(){!this.tool||(this.editToolForm=this.fb.group({toolId:[this.tool.toolId,c.kI.required],toolName:[this.tool.toolName,c.kI.required]}))}onSubmit(){this.updatedToolEvent.emit(this.editToolForm?.value)}onCancel(){this.cancelUpdateToolEvent.emit()}static#t=this.\u0275fac=function(n){return new(n||A)(t.Y36(c.qu))};static#e=this.\u0275cmp=t.Xpm({type:A,selectors:[["app-edit-tool-form"]],inputs:{tool:"tool"},outputs:{updatedToolEvent:"updatedToolEvent",cancelUpdateToolEvent:"cancelUpdateToolEvent"},decls:1,vars:1,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","toolName",1,"form-label","fw-bold"],["type","text","id","toolName","formControlName","toolName",1,"form-control"],["type","submit",1,"btn","btn-outline-primary",3,"disabled"],["type","button",1,"btn","btn-outline-dark","ms-3",3,"click"]],template:function(n,r){1&n&&t.YNc(0,Wt,10,2,"form",0),2&n&&t.Q6J("ngIf",r.editToolForm)},dependencies:[d.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u]})}var m=p(5861),_=p(2687),j=p(8246);function Xt(o,e){if(o.match(/^[a-z]+:\/\//i))return o;if(o.match(/^\/\//))return window.location.protocol+o;if(o.match(/^[a-z]+:/i))return o;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=o,i.href}const te=(()=>{let o=0;return()=>(o+=1,`u${`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4)}${o}`)})();function b(o){const e=[];for(let n=0,r=o.length;n<r;n++)e.push(o[n]);return e}function C(o,e){const r=(o.ownerDocument.defaultView||window).getComputedStyle(o).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function qt(o,e={}){const n=e.width||function ee(o){const e=C(o,"border-left-width"),n=C(o,"border-right-width");return o.clientWidth+e+n}(o),r=e.height||function oe(o){const e=C(o,"border-top-width"),n=C(o,"border-bottom-width");return o.clientHeight+e+n}(o);return{width:n,height:r}}function ne(){let o,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(o=parseInt(n,10),Number.isNaN(o)&&(o=1)),o||window.devicePixelRatio||1}const g=16384;function re(o){(o.width>g||o.height>g)&&(o.width>g&&o.height>g?o.width>o.height?(o.height*=g/o.width,o.width=g):(o.width*=g/o.height,o.height=g):o.width>g?(o.height*=g/o.width,o.width=g):(o.width*=g/o.height,o.height=g))}function ie(o,e={}){return new Promise(o.toBlob?n=>{o.toBlob(n,e.type?e.type:"image/png",e.quality?e.quality:1)}:n=>{const r=window.atob(o.toDataURL(e.type?e.type:void 0,e.quality?e.quality:void 0).split(",")[1]),i=r.length,a=new Uint8Array(i);for(let l=0;l<i;l+=1)a[l]=r.charCodeAt(l);n(new Blob([a],{type:e.type?e.type:"image/png"}))})}function E(o){return new Promise((e,n)=>{const r=new Image;r.decode=()=>e(r),r.onload=()=>e(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=o})}function ae(o){return z.apply(this,arguments)}function z(){return(z=(0,m.Z)(function*(o){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(o)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)})).apply(this,arguments)}function le(o,e,n){return B.apply(this,arguments)}function B(){return(B=(0,m.Z)(function*(o,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),i.appendChild(a),a.appendChild(o),ae(i)})).apply(this,arguments)}const f=(o,e)=>{if(o instanceof e)return!0;const n=Object.getPrototypeOf(o);return null!==n&&(n.constructor.name===e.name||f(n,e))};function Ot(o,e,n){const r=window.getComputedStyle(o,n),i=r.getPropertyValue("content");if(""===i||"none"===i)return;const a=te();try{e.className=`${e.className} ${a}`}catch{return}const l=document.createElement("style");l.appendChild(function ue(o,e,n){const r=`.${o}:${e}`,i=n.cssText?function se(o){const e=o.getPropertyValue("content");return`${o.cssText} content: '${e.replace(/'|"/g,"")}';`}(n):function ce(o){return b(o).map(e=>`${e}: ${o.getPropertyValue(e)}${o.getPropertyPriority(e)?" !important":""};`).join(" ")}(n);return document.createTextNode(`${r}{${i}}`)}(a,n,r)),e.appendChild(l)}const Jt="application/font-woff",Lt="image/jpeg",pe={woff:Jt,woff2:Jt,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Lt,jpeg:Lt,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function K(o){const e=function de(o){const e=/\.([^./]*?)$/g.exec(o);return e?e[1]:""}(o).toLowerCase();return pe[e]||""}function fe(o){return o.split(/,/)[1]}function W(o){return-1!==o.search(/^(data:)/)}function kt(o,e){return`data:${e};base64,${o}`}function Rt(o,e,n){return X.apply(this,arguments)}function X(){return(X=(0,m.Z)(function*(o,e,n){const r=yield fetch(o,e);if(404===r.status)throw new Error(`Resource "${r.url}" not found`);const i=yield r.blob();return new Promise((a,l)=>{const s=new FileReader;s.onerror=l,s.onloadend=()=>{try{a(n({res:r,result:s.result}))}catch(u){l(u)}},s.readAsDataURL(i)})})).apply(this,arguments)}const tt={};function _e(o,e,n){let r=o.replace(/\?.*/,"");return n&&(r=o),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}function et(o,e,n){return ot.apply(this,arguments)}function ot(){return(ot=(0,m.Z)(function*(o,e,n){const r=_e(o,e,n.includeQueryParams);if(null!=tt[r])return tt[r];let i;n.cacheBust&&(o+=(/\?/.test(o)?"&":"?")+(new Date).getTime());try{i=kt(yield Rt(o,n.fetchRequestInit,({res:l,result:s})=>(e||(e=l.headers.get("Content-Type")||""),fe(s))),e)}catch(a){i=n.imagePlaceholder||"";let l=`Failed to fetch resource: ${o}`;a&&(l="string"==typeof a?a:a.message),l&&console.warn(l)}return tt[r]=i,i})).apply(this,arguments)}function ge(o){return nt.apply(this,arguments)}function nt(){return(nt=(0,m.Z)(function*(o){const e=o.toDataURL();return"data:,"===e?o.cloneNode(!1):E(e)})).apply(this,arguments)}function he(o,e){return rt.apply(this,arguments)}function rt(){return(rt=(0,m.Z)(function*(o,e){if(o.currentSrc){const a=document.createElement("canvas"),l=a.getContext("2d");return a.width=o.clientWidth,a.height=o.clientHeight,l?.drawImage(o,0,0,a.width,a.height),E(a.toDataURL())}const n=o.poster,r=K(n);return E(yield et(n,r,e))})).apply(this,arguments)}function Te(o){return it.apply(this,arguments)}function it(){return(it=(0,m.Z)(function*(o){var e;try{if(null!==(e=o?.contentDocument)&&void 0!==e&&e.body)return yield I(o.contentDocument.body,{},!0)}catch{}return o.cloneNode(!1)})).apply(this,arguments)}function be(o,e){return at.apply(this,arguments)}function at(){return(at=(0,m.Z)(function*(o,e){return f(o,HTMLCanvasElement)?ge(o):f(o,HTMLVideoElement)?he(o,e):f(o,HTMLIFrameElement)?Te(o):o.cloneNode(!1)})).apply(this,arguments)}const ve=o=>null!=o.tagName&&"SLOT"===o.tagName.toUpperCase();function xe(o,e,n){return lt.apply(this,arguments)}function lt(){return(lt=(0,m.Z)(function*(o,e,n){var r,i;let a=[];return a=ve(o)&&o.assignedNodes?b(o.assignedNodes()):f(o,HTMLIFrameElement)&&(null===(r=o.contentDocument)||void 0===r?void 0:r.body)?b(o.contentDocument.body.childNodes):b((null!==(i=o.shadowRoot)&&void 0!==i?i:o).childNodes),0===a.length||f(o,HTMLVideoElement)||(yield a.reduce((l,s)=>l.then(()=>I(s,n)).then(u=>{u&&e.appendChild(u)}),Promise.resolve())),e})).apply(this,arguments)}function Ae(o,e){return f(e,Element)&&(function ye(o,e){const n=e.style;if(!n)return;const r=window.getComputedStyle(o);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):b(r).forEach(i=>{let a=r.getPropertyValue(i);"font-size"===i&&a.endsWith("px")&&(a=Math.floor(parseFloat(a.substring(0,a.length-2)))-.1+"px"),f(o,HTMLIFrameElement)&&"display"===i&&"inline"===a&&(a="block"),"d"===i&&e.getAttribute("d")&&(a=`path(${e.getAttribute("d")})`),n.setProperty(i,a,r.getPropertyPriority(i))})}(o,e),function me(o,e){Ot(o,e,":before"),Ot(o,e,":after")}(o,e),function Ze(o,e){f(o,HTMLTextAreaElement)&&(e.innerHTML=o.value),f(o,HTMLInputElement)&&e.setAttribute("value",o.value)}(o,e),function we(o,e){if(f(o,HTMLSelectElement)){const r=Array.from(e.children).find(i=>o.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}(o,e)),e}function Ce(o,e){return st.apply(this,arguments)}function st(){return(st=(0,m.Z)(function*(o,e){const n=o.querySelectorAll?o.querySelectorAll("use"):[];if(0===n.length)return o;const r={};for(let a=0;a<n.length;a++){const s=n[a].getAttribute("xlink:href");if(s){const u=o.querySelector(s),T=document.querySelector(s);!u&&T&&!r[s]&&(r[s]=yield I(T,e,!0))}}const i=Object.values(r);if(i.length){const a="http://www.w3.org/1999/xhtml",l=document.createElementNS(a,"svg");l.setAttribute("xmlns",a),l.style.position="absolute",l.style.width="0",l.style.height="0",l.style.overflow="hidden",l.style.display="none";const s=document.createElementNS(a,"defs");l.appendChild(s);for(let u=0;u<i.length;u++)s.appendChild(i[u]);o.appendChild(l)}return o})).apply(this,arguments)}function I(o,e,n){return ct.apply(this,arguments)}function ct(){return(ct=(0,m.Z)(function*(o,e,n){return n||!e.filter||e.filter(o)?Promise.resolve(o).then(r=>be(r,e)).then(r=>xe(o,r,e)).then(r=>Ae(o,r)).then(r=>Ce(r,e)):null})).apply(this,arguments)}const Qt=/url\((['"]?)([^'"]+?)\1\)/g,Ee=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Ie=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Fe(o){const e=o.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function Se(o){const e=[];return o.replace(Qt,(n,r,i)=>(e.push(i),n)),e.filter(n=>!W(n))}function Ue(o,e,n,r,i){return ut.apply(this,arguments)}function ut(){return(ut=(0,m.Z)(function*(o,e,n,r,i){try{const a=n?Xt(e,n):e,l=K(e);let s;return s=i?kt(yield i(a),l):yield et(a,l,r),o.replace(Fe(e),`$1${s}$3`)}catch{}return o})).apply(this,arguments)}function Ne(o,{preferredFontFormat:e}){return e?o.replace(Ie,n=>{for(;;){const[r,,i]=Ee.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):o}function Mt(o){return-1!==o.search(Qt)}function Gt(o,e,n){return mt.apply(this,arguments)}function mt(){return(mt=(0,m.Z)(function*(o,e,n){if(!Mt(o))return o;const r=Ne(o,n);return Se(r).reduce((a,l)=>a.then(s=>Ue(s,l,e,n)),Promise.resolve(r))})).apply(this,arguments)}function F(o,e,n){return pt.apply(this,arguments)}function pt(){return(pt=(0,m.Z)(function*(o,e,n){var r;const i=null===(r=e.style)||void 0===r?void 0:r.getPropertyValue(o);if(i){const a=yield Gt(i,null,n);return e.style.setProperty(o,a,e.style.getPropertyPriority(o)),!0}return!1})).apply(this,arguments)}function Pe(o,e){return dt.apply(this,arguments)}function dt(){return(dt=(0,m.Z)(function*(o,e){(yield F("background",o,e))||(yield F("background-image",o,e)),(yield F("mask",o,e))||(yield F("mask-image",o,e))})).apply(this,arguments)}function qe(o,e){return ft.apply(this,arguments)}function ft(){return(ft=(0,m.Z)(function*(o,e){const n=f(o,HTMLImageElement);if((!n||W(o.src))&&(!f(o,SVGImageElement)||W(o.href.baseVal)))return;const r=n?o.src:o.href.baseVal,i=yield et(r,K(r),e);yield new Promise((a,l)=>{o.onload=a,o.onerror=l;const s=o;s.decode&&(s.decode=a),"lazy"===s.loading&&(s.loading="eager"),n?(o.srcset="",o.src=i):o.href.baseVal=i})})).apply(this,arguments)}function Oe(o,e){return _t.apply(this,arguments)}function _t(){return(_t=(0,m.Z)(function*(o,e){const r=b(o.childNodes).map(i=>Yt(i,e));yield Promise.all(r).then(()=>o)})).apply(this,arguments)}function Yt(o,e){return gt.apply(this,arguments)}function gt(){return(gt=(0,m.Z)(function*(o,e){f(o,Element)&&(yield Pe(o,e),yield qe(o,e),yield Oe(o,e))})).apply(this,arguments)}function Je(o,e){const{style:n}=o;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return null!=r&&Object.keys(r).forEach(i=>{n[i]=r[i]}),o}const $t={};function Dt(o){return ht.apply(this,arguments)}function ht(){return(ht=(0,m.Z)(function*(o){let e=$t[o];return null!=e||(e={url:o,cssText:yield(yield fetch(o)).text()},$t[o]=e),e})).apply(this,arguments)}function Ht(o,e){return Tt.apply(this,arguments)}function Tt(){return Tt=(0,m.Z)(function*(o,e){let n=o.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(n.match(/url\([^)]+\)/g)||[]).map(function(){var l=(0,m.Z)(function*(s){let u=s.replace(r,"$1");return u.startsWith("https://")||(u=new URL(u,o.url).href),Rt(u,e.fetchRequestInit,({result:T})=>(n=n.replace(s,`url(${T})`),[s,T]))});return function(s){return l.apply(this,arguments)}}());return Promise.all(a).then(()=>n)}),Tt.apply(this,arguments)}function Vt(o){if(null==o)return[];const e=[];let r=o.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(null===u)break;e.push(u[0])}r=r.replace(i,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let u=a.exec(r);if(null===u){if(u=s.exec(r),null===u)break;a.lastIndex=s.lastIndex}else s.lastIndex=a.lastIndex;e.push(u[0])}return e}function Le(o,e){return bt.apply(this,arguments)}function bt(){return(bt=(0,m.Z)(function*(o,e){const n=[],r=[];return o.forEach(i=>{if("cssRules"in i)try{b(i.cssRules||[]).forEach((a,l)=>{if(a.type===CSSRule.IMPORT_RULE){let s=l+1;const T=Dt(a.href).then(v=>Ht(v,e)).then(v=>Vt(v).forEach(Nt=>{try{i.insertRule(Nt,Nt.startsWith("@import")?s+=1:i.cssRules.length)}catch(Fo){console.error("Error inserting rule from remote css",{rule:Nt,error:Fo})}})).catch(v=>{console.error("Error loading remote css",v.toString())});r.push(T)}})}catch(a){const l=o.find(s=>null==s.href)||document.styleSheets[0];null!=i.href&&r.push(Dt(i.href).then(s=>Ht(s,e)).then(s=>Vt(s).forEach(u=>{l.insertRule(u,i.cssRules.length)})).catch(s=>{console.error("Error loading remote stylesheet",s)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(o.forEach(i=>{if("cssRules"in i)try{b(i.cssRules||[]).forEach(a=>{n.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${i.href}`,a)}}),n))})).apply(this,arguments)}function ke(o){return o.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>Mt(e.style.getPropertyValue("src")))}function Re(o,e){return vt.apply(this,arguments)}function vt(){return(vt=(0,m.Z)(function*(o,e){if(null==o.ownerDocument)throw new Error("Provided element is not within a Document");const n=b(o.ownerDocument.styleSheets);return ke(yield Le(n,e))})).apply(this,arguments)}function Qe(o,e){return xt.apply(this,arguments)}function xt(){return(xt=(0,m.Z)(function*(o,e){const n=yield Re(o,e);return(yield Promise.all(n.map(i=>Gt(i.cssText,i.parentStyleSheet?i.parentStyleSheet.href:null,e)))).join("\n")})).apply(this,arguments)}function Me(o,e){return yt.apply(this,arguments)}function yt(){return(yt=(0,m.Z)(function*(o,e){const n=null!=e.fontEmbedCSS?e.fontEmbedCSS:e.skipFonts?null:yield Qe(o,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r)}})).apply(this,arguments)}function Ge(o){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,m.Z)(function*(o,e={}){const{width:n,height:r}=qt(o,e),i=yield I(o,e,!0);return yield Me(i,e),yield Yt(i,e),Je(i,e),yield le(i,n,r)})).apply(this,arguments)}function S(o){return wt.apply(this,arguments)}function wt(){return(wt=(0,m.Z)(function*(o,e={}){const{width:n,height:r}=qt(o,e),i=yield Ge(o,e),a=yield E(i),l=document.createElement("canvas"),s=l.getContext("2d"),u=e.pixelRatio||ne(),T=e.canvasWidth||n,v=e.canvasHeight||r;return l.width=T*u,l.height=v*u,e.skipAutoScale||re(l),l.style.width=`${T}`,l.style.height=`${v}`,e.backgroundColor&&(s.fillStyle=e.backgroundColor,s.fillRect(0,0,l.width,l.height)),s.drawImage(a,0,0,l.width,l.height),l})).apply(this,arguments)}function It(){return(It=(0,m.Z)(function*(o,e={}){const n=yield S(o,e);return yield ie(n)})).apply(this,arguments)}var $e=p(7185),Z=p(2216),St=p(7129);class U{constructor(e){this.toastrService=e,this.qrCodeElementType=j.TT.IMG,this.qrCodeErrorCorrectionLevel=j.Jk.HIGH,this.faImage=_.VmB,this.faSave=_.r6l}copyOrSaveQRInfo(e=!0){var n=this;return(0,m.Z)(function*(){const r=document.getElementById("tool-qr-info"),i=r.firstChild;i.innerHTML=n.tool.toolName;const a=yield function Ye(o){return It.apply(this,arguments)}(r,{backgroundColor:"white"});e?yield navigator.clipboard.write([new ClipboardItem({"image/png":a})]):n.saveQrInfo(a),i.innerHTML="C\xf3digo QR",n.toastrService.success("Imagen copiada al portapapeles")})()}saveQrInfo(e){var n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=`${this.tool.toolName}.png`,r.click(),r.remove()}static#t=this.\u0275fac=function(n){return new(n||U)(t.Y36($e._W))};static#e=this.\u0275cmp=t.Xpm({type:U,selectors:[["app-qr-info"]],inputs:{tool:"tool"},decls:15,vars:8,consts:[["id","tool-qr-info"],[1,"text-center","tool-qr-info--name"],[1,"qr-card"],[1,"text-center",3,"elementType","value","errorCorrectionLevel"],[1,"text-center"],[1,"d-flex","justify-content-center"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[3,"icon"],[1,"btn","btn-sm","btn-outline-primary","ms-2",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"C\xf3digo QR"),t.qZA(),t.TgZ(3,"div",2),t._UZ(4,"ngx-qrcode",3),t.TgZ(5,"p",4),t._uU(6),t.ALo(7,"lastCharacters"),t.qZA()()(),t.TgZ(8,"div",5)(9,"button",6),t.NdJ("click",function(){return r.copyOrSaveQRInfo()}),t._uU(10,"Copiar "),t._UZ(11,"fa-icon",7),t.qZA(),t.TgZ(12,"button",8),t.NdJ("click",function(){return r.copyOrSaveQRInfo(!1)}),t._uU(13,"Guardar "),t._UZ(14,"fa-icon",7),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("elementType",r.qrCodeElementType)("value",r.tool.toolGuid)("errorCorrectionLevel",r.qrCodeErrorCorrectionLevel),t.xp6(2),t.Oqu(t.lcZ(7,6,r.tool.toolGuid)),t.xp6(5),t.Q6J("icon",r.faImage),t.xp6(3),t.Q6J("icon",r.faSave))},dependencies:[Z.BN,j.zF,St.$]})}function De(o,e){if(1&o&&(t.TgZ(0,"div",10)(1,"p")(2,"b"),t._uU(3),t.qZA(),t._uU(4),t.qZA()()),2&o){const n=e.$implicit;t.xp6(3),t.hij("",n.name,":"),t.xp6(1),t.hij(" ",n.measurementUnitSymbol?n.parameterValue+" | "+n.measurementUnitSymbol:n.parameterValue,"")}}function He(o,e){1&o&&t._UZ(0,"app-image-thumbnail",17),2&o&&t.Q6J("appFile",e.$implicit)}function Ve(o,e){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",3)(2,"div",10)(3,"p")(4,"b"),t._uU(5,"Nombre:"),t.qZA(),t._uU(6),t.qZA()(),t.TgZ(7,"div",10)(8,"p")(9,"b"),t._uU(10,"Estado:"),t.qZA(),t._uU(11),t.qZA()(),t.YNc(12,De,5,2,"div",11),t.qZA(),t.TgZ(13,"div",12)(14,"h2",7),t._uU(15,"Im\xe1genes"),t.qZA(),t.TgZ(16,"div",13),t.YNc(17,He,1,1,"app-image-thumbnail",14),t.qZA()(),t.TgZ(18,"div",15)(19,"button",16),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.setUpdatingTool(!0))}),t._uU(20,"Editar herramienta"),t.qZA()(),t.BQk()}if(2&o){const n=t.oxw(2);t.xp6(6),t.hij(" ",n.tool.toolName,""),t.xp6(5),t.hij(" ",n.tool.toolState.toolStateName,""),t.xp6(1),t.Q6J("ngForOf",n.tool.toolParameters),t.xp6(5),t.Q6J("ngForOf",n.tool.files)}}function je(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"app-edit-tool-form",18),t.NdJ("cancelUpdateToolEvent",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.setUpdatingTool(!1))})("updatedToolEvent",function(i){t.CHM(n);const a=t.oxw(2);return t.KtG(a.onToolUpdated(i))}),t.qZA()}if(2&o){const n=t.oxw(2);t.Q6J("tool",n.tool)}}function ze(o,e){if(1&o&&(t.TgZ(0,"div",1)(1,"h1",2),t._uU(2),t.qZA(),t.TgZ(3,"div",3)(4,"div",4),t._UZ(5,"app-qr-info",5),t.qZA(),t.TgZ(6,"div",6)(7,"h2",7),t._uU(8,"Informaci\xf3n general"),t.qZA(),t.YNc(9,Ve,21,4,"ng-container",8),t.YNc(10,je,1,1,"app-edit-tool-form",9),t.qZA()()()),2&o){const n=t.oxw();t.xp6(2),t.Oqu(n.tool.toolName),t.xp6(3),t.Q6J("tool",n.tool),t.xp6(4),t.Q6J("ngIf",!n.updatingTool),t.xp6(1),t.Q6J("ngIf",n.updatingTool)}}class N{constructor(e,n){this.route=e,this.httpService=n,this.updatingTool=!1}ngOnInit(){this.getTool()}getTool(){const e=this.route.snapshot.paramMap.get("id");this.httpService.get(`${h.G8.toolsApi}/${e}`).subscribe(n=>this.tool=n)}setUpdatingTool(e){this.updatingTool=e}onToolUpdated(e){this.httpService.put(h.G8.toolsApi,e).subscribe(n=>{this.tool=n,this.updatingTool=!1})}static#t=this.\u0275fac=function(n){return new(n||N)(t.Y36(x.gz),t.Y36(y.O))};static#e=this.\u0275cmp=t.Xpm({type:N,selectors:[["app-tool-detail"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"text-center","mt-3"],[1,"row","mt-3"],[1,"col-sm-4"],[3,"tool"],[1,"col-sm-8"],[1,"text-center"],[4,"ngIf"],[3,"tool","cancelUpdateToolEvent","updatedToolEvent",4,"ngIf"],[1,"col-sm-6"],["class","col-sm-6",4,"ngFor","ngForOf"],[1,"row-mt-3"],[1,"d-flex","gap-2"],[3,"appFile",4,"ngFor","ngForOf"],[1,"mt-3"],["type","button",1,"btn","btn-outline-primary",3,"click"],[3,"appFile"],[3,"tool","cancelUpdateToolEvent","updatedToolEvent"]],template:function(n,r){1&n&&t.YNc(0,ze,11,4,"div",0),2&n&&t.Q6J("ngIf",r.tool)},dependencies:[d.sg,d.O5,w,A,U]})}var P=p(9453);function Be(o,e){if(1&o&&(t.TgZ(0,"form",9)(1,"div",10)(2,"label",11),t._uU(3,"Nombre"),t.qZA(),t._UZ(4,"input",12),t.qZA()()),2&o){const n=t.oxw();t.Q6J("formGroup",n.addToolForm)}}class q{constructor(e,n,r){this.activeModal=e,this.fb=n,this.httpService=r,this.toolAddedEvent=new t.vpe}ngOnInit(){this.initForm()}initForm(){this.addToolForm=this.fb.group({toolName:["",c.kI.required]})}onSubmit(){this.httpService.post("Tools",{toolName:this.addToolForm?.controls.toolName.value}).subscribe(()=>this.activeModal.close(!0))}static#t=this.\u0275fac=function(n){return new(n||q)(t.Y36(P.Kz),t.Y36(c.qu),t.Y36(y.O))};static#e=this.\u0275cmp=t.Xpm({type:q,selectors:[["app-add-tool-modal"]],outputs:{toolAddedEvent:"toolAddedEvent"},decls:13,vars:2,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[3,"formGroup",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"btn","btn-outline-primary",3,"disabled","click"],[3,"formGroup"],[1,"mb-3"],["for","toolName",1,"form-label"],["type","text","id","toolName","formControlName","toolName",1,"form-control"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Agregar Nueva herramienta"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return r.activeModal.close(!1)}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4),t.YNc(7,Be,5,1,"form",5),t.qZA(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return r.activeModal.close(!1)}),t._uU(10,"Cancelar"),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){return r.addToolForm.valid&&r.onSubmit()}),t._uU(12,"Guardar"),t.qZA()()),2&n&&(t.xp6(7),t.Q6J("ngIf",r.addToolForm),t.xp6(4),t.Q6J("disabled",!r.addToolForm.valid))},dependencies:[d.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u]})}var jt=p(1875);function Ke(o,e){1&o&&(t.TgZ(0,"p"),t._uU(1,"No hay herramientas seleccionadas"),t.qZA())}function We(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"lastCharacters"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._UZ(7,"fa-icon",4),t.TgZ(8,"fa-icon",5),t.NdJ("click",function(){const a=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.onDeleteTool(a))}),t.qZA()()()}if(2&o){const n=e.$implicit,r=t.oxw(2);t.xp6(2),t.Oqu(t.xi3(3,4,n.toolGuid,6)),t.xp6(3),t.Oqu(n.toolName),t.xp6(2),t.Q6J("icon",r.faCircleInfo),t.xp6(1),t.Q6J("icon",r.faTrash)}}function Xe(o,e){if(1&o&&(t.TgZ(0,"table",2)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Id"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Nombre"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Acciones"),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,We,9,7,"tr",3),t.qZA()()),2&o){const n=t.oxw();t.xp6(10),t.Q6J("ngForOf",n.tools)}}class O{constructor(){this.faTrash=_.$aW,this.faCircleInfo=_.DBf,this.deleteToolEvent=new t.vpe}onDeleteTool(e){this.deleteToolEvent.emit(e)}static#t=this.\u0275fac=function(n){return new(n||O)};static#e=this.\u0275cmp=t.Xpm({type:O,selectors:[["app-selected-tools-list"]],inputs:{tools:"tools"},outputs:{deleteToolEvent:"deleteToolEvent"},decls:2,vars:2,consts:[[4,"ngIf"],["class","table",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["role","button",1,"me-2",3,"icon"],["role","button",1,"text-danger",3,"icon","click"]],template:function(n,r){1&n&&(t.YNc(0,Ke,2,0,"p",0),t.YNc(1,Xe,11,1,"table",1)),2&n&&(t.Q6J("ngIf",!r.tools||r.tools&&!r.tools.length),t.xp6(1),t.Q6J("ngIf",r.tools&&r.tools.length))},dependencies:[d.sg,d.O5,Z.BN,St.$]})}function to(o,e){1&o&&(t.TgZ(0,"p"),t._uU(1,"No hay herramientas disponibles"),t.qZA())}function eo(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"lastCharacters"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._UZ(7,"fa-icon",4),t.TgZ(8,"fa-icon",5),t.NdJ("click",function(){const a=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.onSelectTool(a))}),t.qZA()()()}if(2&o){const n=e.$implicit,r=t.oxw(2);t.xp6(2),t.Oqu(t.xi3(3,4,n.toolGuid,6)),t.xp6(3),t.Oqu(n.toolName),t.xp6(2),t.Q6J("icon",r.faCircleInfo),t.xp6(1),t.Q6J("icon",r.faPlus)}}function oo(o,e){if(1&o&&(t.TgZ(0,"table",2)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Id"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Nombre"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Acciones"),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,eo,9,7,"tr",3),t.qZA()()),2&o){const n=t.oxw();t.xp6(10),t.Q6J("ngForOf",n.tools)}}class J{constructor(){this.faPlus=_.r8p,this.faCircleInfo=_.DBf,this.selectToolEvent=new t.vpe}onSelectTool(e){this.selectToolEvent.emit(e)}static#t=this.\u0275fac=function(n){return new(n||J)};static#e=this.\u0275cmp=t.Xpm({type:J,selectors:[["app-available-tools-list"]],inputs:{tools:"tools"},outputs:{selectToolEvent:"selectToolEvent"},decls:2,vars:2,consts:[[4,"ngIf"],["class","table",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["role","button",1,"me-2",3,"icon"],["role","button",1,"text-primary",3,"icon","click"]],template:function(n,r){1&n&&(t.YNc(0,to,2,0,"p",0),t.YNc(1,oo,11,1,"table",1)),2&n&&(t.Q6J("ngIf",r.tools&&!r.tools.length),t.xp6(1),t.Q6J("ngIf",r.tools&&r.tools.length))},dependencies:[d.sg,d.O5,Z.BN,St.$]})}var zt=p(7281);function no(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"div",15)(1,"div",12)(2,"label",16),t._uU(3,"Responsable"),t.qZA(),t.TgZ(4,"app-dropdown",17),t.NdJ("onSelectOptionEvent",function(i){t.CHM(n);const a=t.oxw(2);return t.KtG(a.onSelectResponsible(i))}),t.ALo(5,"toDropdownItem"),t.qZA()()()}if(2&o){const n=t.oxw(2);t.xp6(4),t.Q6J("options",t.xi3(5,1,n.employees,"user"))}}function ro(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"form",9),t.YNc(1,no,6,4,"div",10),t.TgZ(2,"div",11)(3,"div",12)(4,"h5"),t._uU(5,"Herramientas seleccionadas"),t.qZA(),t.TgZ(6,"app-selected-tools-list",13),t.NdJ("deleteToolEvent",function(i){t.CHM(n);const a=t.oxw();return t.KtG(a.onDeleteTool(i))}),t.qZA()()(),t.TgZ(7,"div",11)(8,"div",12)(9,"h5"),t._uU(10,"Listado de herramientas"),t.qZA(),t.TgZ(11,"app-available-tools-list",14),t.NdJ("selectToolEvent",function(i){t.CHM(n);const a=t.oxw();return t.KtG(a.onSelectTool(i))}),t.qZA()()()()}if(2&o){const n=t.oxw();t.Q6J("formGroup",n.registerOutputForm),t.xp6(1),t.Q6J("ngIf",n.employees),t.xp6(5),t.Q6J("tools",n.selectedTools),t.xp6(5),t.Q6J("tools",n.availableTools)}}class L{constructor(e,n,r){this.activeModal=e,this.httpService=n,this.fb=r,this.availableTools=[],this.selectedTools=[]}ngOnInit(){this.initForm(),this.getEmployees(),this.getTools()}getEmployees(){this.httpService.get("Users/employees").subscribe(e=>this.employees=e)}getTools(){this.httpService.get("Tools/available-tools").subscribe(e=>this.availableTools=e)}onSelectTool(e){this.availableTools=this.availableTools?.filter(n=>n.toolId!=e.toolId),this.selectedTools?.push(e),this.registerOutputForm.controls.tools.patchValue(this.selectedTools)}onDeleteTool(e){this.selectedTools=this.selectedTools.filter(n=>n.toolId!=e.toolId),this.availableTools.push(e),this.registerOutputForm.controls.tools.patchValue(this.selectedTools)}initForm(){this.registerOutputForm=this.fb.group({responsible:[null,c.kI.required],tools:[null,c.kI.required]})}registerOutput(){this.httpService.post(h.G8.toolOutputsApi,this.registerOutputForm?.value).subscribe(()=>this.activeModal.close(!0))}onSelectResponsible(e){this.responsible=this.employees.find(n=>n.userId==e.id),this.registerOutputForm.controls.responsible.setValue({...this.responsible})}static#t=this.\u0275fac=function(n){return new(n||L)(t.Y36(P.Kz),t.Y36(y.O),t.Y36(c.qu))};static#e=this.\u0275cmp=t.Xpm({type:L,selectors:[["app-add-tools-output-modal"]],decls:13,vars:2,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[3,"formGroup",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[1,"btn","btn-outline-primary","ms-2",3,"disabled","click"],[3,"formGroup"],["class","row",4,"ngIf"],[1,"row","mt-3"],[1,"col"],[3,"tools","deleteToolEvent"],[3,"tools","selectToolEvent"],[1,"row"],["for","responsible",1,"form-label"],[1,"d-block",3,"options","onSelectOptionEvent"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Registrar nueva salida"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return r.activeModal.close()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4),t.YNc(7,ro,12,4,"form",5),t.qZA(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return r.activeModal.close()}),t._uU(10,"Cerrar"),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){return r.registerOutput()}),t._uU(12,"Guardar"),t.qZA()()),2&n&&(t.xp6(7),t.Q6J("ngIf",r.registerOutputForm),t.xp6(4),t.Q6J("disabled",!r.registerOutputForm.valid))},dependencies:[d.O5,c._Y,c.JL,c.sg,jt.J,O,J,zt.s]})}function io(o,e){1&o&&(t.TgZ(0,"p",5),t._uU(1,"No se han registrado usuarios a\xfan."),t.qZA())}const ao=function(o){return[o]};function lo(o,e){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"a",8),t._UZ(7,"fa-icon",9),t.qZA()()()),2&o){const n=e.$implicit,r=t.oxw(3);t.xp6(2),t.hij(" ",n.toolName," "),t.xp6(2),t.hij(" ",n.toolState.toolStateName," "),t.xp6(2),t.Q6J("routerLink",t.VKq(4,ao,n.toolId)),t.xp6(1),t.Q6J("icon",r.faCircleInfo)}}function so(o,e){if(1&o&&(t.TgZ(0,"table",6)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Nombre"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Estado"),t.qZA(),t._UZ(7,"th"),t.qZA()(),t.TgZ(8,"tbody"),t.YNc(9,lo,8,6,"tr",7),t.qZA()()),2&o){const n=t.oxw(2);t.xp6(9),t.Q6J("ngForOf",n.tools)}}function co(o,e){if(1&o&&(t.TgZ(0,"div",1)(1,"div",2),t.YNc(2,io,2,0,"p",3),t.YNc(3,so,10,1,"table",4),t.qZA()()),2&o){const n=t.oxw();t.xp6(2),t.Q6J("ngIf",!n.tools.length),t.xp6(1),t.Q6J("ngIf",n.tools.length)}}class k{constructor(){this.faPen=_.IwR,this.faTrash=_.$aW,this.faCircleInfo=_.DBf}static#t=this.\u0275fac=function(n){return new(n||k)};static#e=this.\u0275cmp=t.Xpm({type:k,selectors:[["app-tools-list"]],inputs:{tools:"tools"},decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col"],["class","text-center",4,"ngIf"],["class","table",4,"ngIf"],[1,"text-center"],[1,"table"],[4,"ngFor","ngForOf"],[3,"routerLink"],["role","button",1,"me-2","text-primary",3,"icon"]],template:function(n,r){1&n&&t.YNc(0,co,4,2,"div",0),2&n&&t.Q6J("ngIf",r.tools)},dependencies:[d.sg,d.O5,x.rH,Z.BN]})}class R{transform(e,...n){return 1==e.toolOutputStateId?"Abierto":"Cerrado"}static#t=this.\u0275fac=function(n){return new(n||R)};static#e=this.\u0275pipe=t.Yjl({name:"outputToolState",type:R,pure:!0})}function uo(o,e){1&o&&(t.TgZ(0,"p"),t._uU(1,"No hay salidas de herramienta registradas. "),t.qZA())}function mo(o,e){if(1&o&&(t.TgZ(0,"tr")(1,"td")(2,"a",6),t._uU(3),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"outputToolState"),t.qZA()()),2&o){const n=e.$implicit,r=t.oxw(2);t.xp6(2),t.Q6J("routerLink","/"+r.routeConstants.toolOutput+"/"+n.toolOutputId),t.xp6(1),t.hij(" ",n.toolOutputId," "),t.xp6(2),t.Oqu(t.xi3(6,5,n.outputDateTime,"dd/MM/YYYY")),t.xp6(3),t.Oqu(n.responsible.name),t.xp6(2),t.hij(" ",t.lcZ(11,8,n.toolOutputState)," ")}}function po(o,e){if(1&o&&(t.TgZ(0,"table",4)(1,"thead")(2,"tr")(3,"th"),t._uU(4," Id "),t.qZA(),t.TgZ(5,"th"),t._uU(6," Fecha de salida "),t.qZA(),t.TgZ(7,"th"),t._uU(8," Responsable "),t.qZA(),t.TgZ(9,"th"),t._uU(10," Estado "),t.qZA()()(),t.TgZ(11,"tbody"),t.YNc(12,mo,12,10,"tr",5),t.qZA()()),2&o){const n=t.oxw();t.xp6(12),t.Q6J("ngForOf",n.toolOutputs)}}class Q{constructor(){this.routeConstants=h.p7}static#t=this.\u0275fac=function(n){return new(n||Q)};static#e=this.\u0275cmp=t.Xpm({type:Q,selectors:[["app-tool-outputs-list"]],inputs:{toolOutputs:"toolOutputs"},decls:5,vars:2,consts:[[1,"row","mt-3"],[1,"col"],[4,"ngIf","ngIfElse"],["noToolsOutput",""],[1,"table","mt-4"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(n,r){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,uo,2,0,"p",2),t.YNc(3,po,13,1,"ng-template",null,3,t.W1O),t.qZA()()),2&n){const i=t.MAs(4);t.xp6(2),t.Q6J("ngIf",!r.toolOutputs||!r.toolOutputs.length)("ngIfElse",i)}},dependencies:[d.sg,d.O5,x.rH,d.uU,R]})}class M{constructor(e,n){this.modalService=e,this.httpService=n,this.routeConstants=h.p7}ngOnInit(){this.getToolsList(),this.getToolOutputs()}onOpenAddToolModal(){this.modalRef=this.modalService.open(q),this.modalRef.closed.subscribe(e=>{e&&this.getToolsList()})}getToolsList(){this.httpService.get("Tools").subscribe(e=>this.tools=e)}getToolOutputs(){this.httpService.get(h.G8.toolOutputsApi).subscribe(e=>this.toolOutputs=e)}openAddToolOutputModal(){this.modalRef=this.modalService.open(L,{size:"lg",scrollable:!0}),this.modalRef.closed.subscribe(()=>this.getToolOutputs())}static#t=this.\u0275fac=function(n){return new(n||M)(t.Y36(P.FF),t.Y36(y.O))};static#e=this.\u0275cmp=t.Xpm({type:M,selectors:[["app-tools-management"]],decls:17,vars:3,consts:[[1,"container"],[1,"text-center","mt-3"],[3,"tools"],[1,"text-center"],[1,"btn","btn-outline-primary",3,"routerLink"],[1,"mt-5"],[3,"toolOutputs"],[1,"btn","btn-outline-primary",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Administraci\xf3n de equipos y herramienta"),t.qZA(),t.TgZ(3,"section")(4,"h2",1),t._uU(5,"Inventario"),t.qZA(),t._UZ(6,"app-tools-list",2),t.TgZ(7,"div",3)(8,"a",4),t._uU(9,"Agregar nuevo elemento"),t.qZA()()(),t.TgZ(10,"section",5)(11,"h2",3),t._uU(12,"Salidas de herramienta"),t.qZA(),t._UZ(13,"app-tool-outputs-list",6),t.TgZ(14,"div",3)(15,"button",7),t.NdJ("click",function(){return r.openAddToolOutputModal()}),t._uU(16,"Agregar nueva elemento"),t.qZA()()()()),2&n&&(t.xp6(6),t.Q6J("tools",r.tools),t.xp6(2),t.Q6J("routerLink",r.routeConstants.addToolPath),t.xp6(5),t.Q6J("toolOutputs",r.toolOutputs))},dependencies:[x.rH,k,Q]})}var fo=p(3366);function _o(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"div",14)(1,"app-dropdown",15),t.NdJ("onSelectOptionEvent",function(i){t.CHM(n);const a=t.oxw();return t.KtG(a.onSelectOption(i))}),t.ALo(2,"toDropdownItem"),t.qZA()()}if(2&o){const n=t.oxw();t.xp6(1),t.Q6J("options",t.xi3(2,2,n.measurementUnits,"measurementUnits"))("label","Unidad de medida")}}class G{constructor(e,n){this.fb=e,this.httpService=n,this.faCheck=_.LEp,this.faX=_.EOp,this.cancelEvent=new t.vpe,this.addNewParameterEvent=new t.vpe}ngOnInit(){this.getMeasurementUnits(),this.initForm()}initForm(){this.addParameterForm=this.fb.group({parameterName:[null,c.kI.required],measurementUnitId:[null,c.kI.required],measurementUnitSymbol:[null],parameterValue:[null,c.kI.required]})}getMeasurementUnits(){this.httpService.get(h.G8.measurementUnitsApi).subscribe(e=>this.measurementUnits=e)}onSelectOption(e){const n=this.measurementUnits.find(r=>r.measurementUnitId==e.id);this.addParameterForm.patchValue({measurementUnitId:n.measurementUnitId,measurementUnitSymbol:n.symbol})}addNewParameter(){!this.addParameterForm.valid||this.addNewParameterEvent.emit({name:this.addParameterForm.controls.parameterName.value,measurementUnitId:this.addParameterForm.controls.measurementUnitId.value,measurementUnitSymbol:this.addParameterForm.controls.measurementUnitSymbol.value,parameterValue:this.addParameterForm.controls.parameterValue.value})}static#t=this.\u0275fac=function(n){return new(n||G)(t.Y36(c.qu),t.Y36(y.O))};static#e=this.\u0275cmp=t.Xpm({type:G,selectors:[["app-add-new-parameter"]],outputs:{cancelEvent:"cancelEvent",addNewParameterEvent:"addNewParameterEvent"},decls:18,vars:5,consts:[[3,"formGroup"],[1,"row"],[1,"text-center"],[1,"col-lg-3","col-md-5"],["for","parameterName",1,"form-label"],["type","text","id","parameterName","formControlName","parameterName",1,"form-control"],["class","col-md-3",4,"ngIf"],[1,"col-lg-3","col-md-2"],["for","parameterValue",1,"form-label"],["type","text","id","parameterValue","formControlName","parameterValue",1,"form-control"],[1,"col-lg-3","col-md-2","action-buttons"],["type","button",1,"btn","btn-outline-success","me-2",3,"disabled","click"],[3,"icon"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"col-md-3"],[3,"options","label","onSelectOptionEvent"]],template:function(n,r){1&n&&(t.TgZ(0,"form",0)(1,"div",1)(2,"h2",2),t._uU(3,"Nuevo par\xe1metero"),t.qZA(),t.TgZ(4,"div",3)(5,"label",4),t._uU(6,"Nombre del par\xe1metro"),t.qZA(),t._UZ(7,"input",5),t.qZA(),t.YNc(8,_o,3,5,"div",6),t.TgZ(9,"div",7)(10,"label",8),t._uU(11,"Valor"),t.qZA(),t._UZ(12,"input",9),t.qZA(),t.TgZ(13,"div",10)(14,"button",11),t.NdJ("click",function(){return r.addNewParameter()}),t._UZ(15,"fa-icon",12),t.qZA(),t.TgZ(16,"button",13),t.NdJ("click",function(){return r.cancelEvent.emit()}),t._UZ(17,"fa-icon",12),t.qZA()()()()),2&n&&(t.Q6J("formGroup",r.addParameterForm),t.xp6(8),t.Q6J("ngIf",r.measurementUnits),t.xp6(6),t.Q6J("disabled",!r.addParameterForm.valid),t.xp6(1),t.Q6J("icon",r.faCheck),t.xp6(2),t.Q6J("icon",r.faX))},dependencies:[d.O5,Z.BN,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,jt.J,zt.s],styles:[".action-buttons[_ngcontent-%COMP%]{padding-top:2rem}"]})}function go(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"form",1)(1,"div",2)(2,"h2",3),t._uU(3,"Configurar par\xe1metero"),t.qZA(),t.TgZ(4,"div",4)(5,"label",5),t._uU(6,"Nombre del par\xe1metro"),t.qZA(),t._UZ(7,"input",6),t.qZA(),t.TgZ(8,"div",7)(9,"label",5),t._uU(10,"Unidad de medida"),t.qZA(),t._UZ(11,"input",6),t.qZA(),t.TgZ(12,"div",8)(13,"label",9),t._uU(14,"Valor"),t.qZA(),t._UZ(15,"input",10),t.qZA(),t.TgZ(16,"div",11)(17,"button",12),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.setParameterValue())}),t._UZ(18,"fa-icon",13),t.qZA(),t.TgZ(19,"button",14),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.cancelEvent.emit())}),t._UZ(20,"fa-icon",13),t.qZA()()()()}if(2&o){const n=t.oxw();t.Q6J("formGroup",n.setParameterForm),t.xp6(7),t.Q6J("value",n.toolParameter.name),t.xp6(4),t.Q6J("value",n.toolParameter.measurementUnitSymbol),t.xp6(6),t.Q6J("disabled",!n.setParameterForm.valid),t.xp6(1),t.Q6J("icon",n.faCheck),t.xp6(2),t.Q6J("icon",n.faX)}}class Y{constructor(e){this.fb=e,this.faCheck=_.LEp,this.faX=_.EOp,this.cancelEvent=new t.vpe,this.setParameterEvent=new t.vpe}ngOnInit(){this.initForm()}initForm(){this.setParameterForm=this.fb.group({parameterValue:[null,c.kI.required]})}setParameterValue(){!this.setParameterForm.valid||this.setParameterEvent.emit({id:this.toolParameter.id,measurementUnitId:this.toolParameter.measurementUnitId,measurementUnitSymbol:this.toolParameter.measurementUnitSymbol,name:this.toolParameter.name,parameterValue:this.setParameterForm.controls.parameterValue.value})}static#t=this.\u0275fac=function(n){return new(n||Y)(t.Y36(c.qu))};static#e=this.\u0275cmp=t.Xpm({type:Y,selectors:[["app-set-parameter"]],inputs:{toolParameter:"toolParameter"},outputs:{cancelEvent:"cancelEvent",setParameterEvent:"setParameterEvent"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"text-center"],[1,"col-lg-3","col-md-5"],[1,"form-label"],["type","text","disabled","",1,"form-control",3,"value"],[1,"col-md-3"],[1,"col-lg-3","col-md-2"],["for","parameterValue",1,"form-label"],["type","text","id","parameterValue","formControlName","parameterValue",1,"form-control"],[1,"col-lg-3","col-md-2","action-buttons"],["type","button",1,"btn","btn-outline-success","me-2",3,"disabled","click"],[3,"icon"],["type","button",1,"btn","btn-outline-danger",3,"click"]],template:function(n,r){1&n&&t.YNc(0,go,21,6,"form",0),2&n&&t.Q6J("ngIf",r.toolParameter)},dependencies:[d.O5,Z.BN,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u],styles:[".action-buttons[_ngcontent-%COMP%]{padding-top:2rem}"]})}var Ut=p(1894),ho=p(5090);class ${transform(e){return e.measurementUnitSymbol?`${e.parameterValue} | ${e.measurementUnitSymbol}`:`${e.parameterValue}`}static#t=this.\u0275fac=function(n){return new(n||$)};static#e=this.\u0275pipe=t.Yjl({name:"parameterValue",type:$,pure:!0})}function To(o,e){if(1&o&&(t.TgZ(0,"div",15)(1,"label",16),t._uU(2),t.qZA(),t._UZ(3,"input",17),t.ALo(4,"parameterValue"),t.qZA()),2&o){const n=e.$implicit;t.xp6(2),t.Oqu(n.name),t.xp6(1),t.Q6J("value",t.lcZ(4,2,n))}}function bo(o,e){if(1&o&&(t.TgZ(0,"div",12)(1,"h2",13),t._uU(2,"Par\xe1metros a\xf1adidos"),t.qZA(),t.YNc(3,To,5,4,"div",14),t.qZA()),2&o){const n=t.oxw();t.xp6(3),t.Q6J("ngForOf",n.tool.toolParameters)}}function vo(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"div",1)(1,"button",18),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.initAdditionalInformation())}),t._uU(2,"Agregar informaci\xf3n adicional"),t.qZA(),t.TgZ(3,"button",19),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.addNewTool())}),t._uU(4,"Guardar"),t.qZA()()}if(2&o){const n=t.oxw();t.xp6(3),t.Q6J("disabled",!n.addNewToolForm.valid)}}function xo(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"div",12)(1,"div",23)(2,"app-dropdown-input",24),t.NdJ("selectItemEvent",function(i){t.CHM(n);const a=t.oxw(2);return t.KtG(a.setExistingParameter(i))})("addNewItemEvent",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.setIsAddingNewParameter(!0))}),t.ALo(3,"toItemList"),t.qZA(),t.TgZ(4,"div")(5,"button",25),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.setIsAddingAdditionalInfo(!1))}),t._uU(6,"Cancelar"),t.qZA()()()()}if(2&o){const n=t.oxw(2);t.xp6(2),t.Q6J("buttonText","Seleccionar nuevo par\xe1metro")("options",t.xi3(3,3,n.toolParameters,"toolParameter"))("showAddNewItemButton",!0)}}function yo(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"app-set-parameter",26),t.NdJ("cancelEvent",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.setIsAddingExistingParameter(!1))})("setParameterEvent",function(i){t.CHM(n);const a=t.oxw(2);return t.KtG(a.onAddParameter(i))}),t.qZA()}if(2&o){const n=t.oxw(2);t.Q6J("toolParameter",n.tempParameter)}}function Zo(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"app-add-new-parameter",27),t.NdJ("cancelEvent",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.setIsAddingNewParameter(!1))})("addNewParameterEvent",function(i){t.CHM(n);const a=t.oxw(2);return t.KtG(a.onAddParameter(i))}),t.qZA()}}function wo(o,e){if(1&o&&(t.YNc(0,xo,7,6,"div",7),t.TgZ(1,"div",12)(2,"div",20),t.YNc(3,yo,1,1,"app-set-parameter",21),t.YNc(4,Zo,1,0,"app-add-new-parameter",22),t.qZA()()),2&o){const n=t.oxw();t.Q6J("ngIf",!n.isAddingExistingParameter&&!n.isAddingNewParameter),t.xp6(3),t.Q6J("ngIf",n.isAddingExistingParameter),t.xp6(1),t.Q6J("ngIf",n.isAddingNewParameter)}}function Ao(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"ngx-dropzone-image-preview",30),t.NdJ("removed",function(){const a=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.onRemoveFile(a))}),t.qZA()}2&o&&t.Q6J("file",e.$implicit)("removable",!0)}function Co(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"ngx-dropzone",28),t.NdJ("change",function(i){t.CHM(n);const a=t.oxw();return t.KtG(a.onSelectFile(i))}),t.TgZ(1,"ngx-dropzone-label"),t._uU(2,"Haga click o arrastre hasta aqu\xed para a\xf1adir archivos"),t.qZA(),t.YNc(3,Ao,1,2,"ngx-dropzone-image-preview",29),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("accept","image/*"),t.xp6(3),t.Q6J("ngForOf",n.addNewToolForm.controls.files.value)}}class D{constructor(e,n,r,i){this.fb=e,this.httpService=n,this.router=r,this.modalService=i,this.isAddingAdditionalInfo=!1,this.isAddingExistingParameter=!1,this.isAddingNewParameter=!1}ngOnInit(){this.initForm(),this.getToolParameters()}getToolParameters(){this.httpService.get(h.G8.toolParametersApi).subscribe(e=>this.toolParameters=e)}initForm(){this.addNewToolForm=this.fb.group({toolName:[null,c.kI.required],files:[new Array]})}onAddParameter(e){this.addToolParameter(e),this.setIsAddingAdditionalInfo(!1)}addToolParameter(e){const n={id:e.id||void 0,name:e.name,measurementUnitId:e.measurementUnitId,measurementUnitSymbol:e.measurementUnitSymbol,parameterValue:e.parameterValue};this.tool&&this.tool.toolParameters?this.tool.toolParameters.push(n):this.tool={...this.tool,toolParameters:[n]}}addNewTool(){if(!this.addNewToolForm.valid)return;const e=this.addNewToolForm.controls.files.value,n=new FormData;n.append("name",this.addNewToolForm.controls.toolName.value),n.append("toolParameters",JSON.stringify(this.tool.toolParameters)),e.map(r=>n.append("files",r)),this.httpService.post(h.G8.toolsApi,n).subscribe(()=>this.router.navigateByUrl(`/${h.p7.toolsPath}`))}initAdditionalInformation(){this.setIsAddingAdditionalInfo(!0),this.setIsAddingExistingParameter(!1),this.setIsAddingNewParameter(!1)}setIsAddingAdditionalInfo(e){this.isAddingAdditionalInfo=e}setIsAddingExistingParameter(e){this.isAddingExistingParameter=e}setIsAddingNewParameter(e){this.isAddingNewParameter=e}setExistingParameter(e){this.tempParameter=this.toolParameters.find(n=>n.id==e.id),this.setIsAddingExistingParameter(!0)}onSelectFile(e){const n=this.addNewToolForm.controls.files.value;n.push(...e.addedFiles),this.addNewToolForm.patchValue({files:n})}onRemoveFile(e){if(!this.addNewToolForm.controls.files.value)return;const r=this.addNewToolForm.controls.files.value.filter(i=>i.name!=e.name);this.addNewToolForm.patchValue({files:r})}static#t=this.\u0275fac=function(n){return new(n||D)(t.Y36(c.qu),t.Y36(y.O),t.Y36(x.F0),t.Y36(P.FF))};static#e=this.\u0275cmp=t.Xpm({type:D,selectors:[["app-add-new-tool"]],decls:17,vars:5,consts:[[1,"container"],[1,"text-center","mt-3"],[3,"formGroup"],[1,"row","justify-content-center"],[1,"col-lg-4","col-sm-6"],["for","toolName",1,"form-label"],["type","text","id","toolName","formControlName","toolName",1,"form-control"],["class","row mt-3",4,"ngIf"],["class","text-center mt-3",4,"ngIf","ngIfElse"],["addingAdditionalInfo",""],[1,"row"],[3,"accept","change",4,"ngIf"],[1,"row","mt-3"],[1,"text-center"],["class","col-lg-3 col-md-4 col-sm-6",4,"ngFor","ngForOf"],[1,"col-lg-3","col-md-4","col-sm-6"],[1,"form-label"],["type","text","disabled","",1,"form-control",3,"value"],[1,"btn","btn-outline-primary","ms-2",3,"click"],[1,"btn","btn-outline-primary","ms-2",3,"disabled","click"],[1,"col"],[3,"toolParameter","cancelEvent","setParameterEvent",4,"ngIf"],[3,"cancelEvent","addNewParameterEvent",4,"ngIf"],[1,"col","d-flex","justify-content-center"],[3,"buttonText","options","showAddNewItemButton","selectItemEvent","addNewItemEvent"],[1,"btn","btn-outline-danger","ms-2",3,"click"],[3,"toolParameter","cancelEvent","setParameterEvent"],[3,"cancelEvent","addNewParameterEvent"],[3,"accept","change"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngFor","ngForOf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed"]],template:function(n,r){if(1&n&&(t.TgZ(0,"section",0)(1,"h1",1),t._uU(2,"Agregar nuevo equipo o herramienta"),t.qZA(),t.TgZ(3,"form",2)(4,"div",3)(5,"div",4)(6,"label",5),t._uU(7,"Nombre"),t.qZA(),t._UZ(8,"input",6),t.qZA()(),t.YNc(9,bo,4,1,"div",7),t.YNc(10,vo,5,1,"div",8),t.YNc(11,wo,5,3,"ng-template",null,9,t.W1O),t.TgZ(13,"div",10)(14,"h2",1),t._uU(15,"A\xf1adir im\xe1genes"),t.qZA(),t.YNc(16,Co,4,2,"ngx-dropzone",11),t.qZA()()()),2&n){const i=t.MAs(12);t.xp6(3),t.Q6J("formGroup",r.addNewToolForm),t.xp6(6),t.Q6J("ngIf",r.tool&&r.tool.toolParameters&&r.tool.toolParameters.length),t.xp6(1),t.Q6J("ngIf",!r.isAddingAdditionalInfo)("ngIfElse",i),t.xp6(6),t.Q6J("ngIf",r.addNewToolForm)}},dependencies:[d.sg,d.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,fo.i,G,Y,Ut._f,Ut.NP,Ut.sv,ho.R,$]})}const Eo=[{path:"",component:M},{path:"add-tool",component:D},{path:":id",component:N}];class H{static#t=this.\u0275fac=function(n){return new(n||H)};static#e=this.\u0275mod=t.oAB({type:H});static#o=this.\u0275inj=t.cJS({imports:[x.Bz.forChild(Eo),x.Bz]})}var Io=p(6619);class V{static#t=this.\u0275fac=function(n){return new(n||V)};static#e=this.\u0275mod=t.oAB({type:V});static#o=this.\u0275inj=t.cJS({imports:[d.ez,H,Io.m]})}}}]);